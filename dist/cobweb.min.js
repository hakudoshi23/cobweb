!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(e,n){for(var r in n)if(r&&n.hasOwnProperty(r)){var o=n[r];"object"==typeof o?e[r]?t(e[r],o):e[r]=o:"undefined"==typeof e[r]&&(e[r]=o)}}e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t}),window.extend=t}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};window.TreeNode=e,e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},e.extend=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1),this.instance.logger.debug(e,arguments);for(var n=0;n<t.length;n++)t[n].apply(null,arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(){},t=function(t,n){this.debug=n?console.debug.bind():e,this.info=n?console.info.bind():e,this.warn=console.warn.bind(),this.error=console.error.bind()};window.Logger=t}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=n||{},extend(this.options,e),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this,!0),this.events=new EventHandler(this),t.prototype.modules.load(this),this.events.trigger("app.loaded")};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var a in t)0===t[a].dependencies.length&&r.push(a);for(;r.length>0;){var i=r[0];if(r.splice(0,1),t[i]){var s=t[i];o.push(i);for(var c=0;c<s.dependant.length;c++){var u=s.dependant[c];n(o,t[u])&&r.push(u)}}else e.events.trigger("modules.error.missing",i),e.logger.warning("Missing module '"+i+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){n=n||[],this.all[e]={dependencies:n,init:t}},load:function(n){this.instance=n,e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var a=r[o];try{this.all[a].init(n),n.events.trigger("modules.loaded",a)}catch(e){n.logger.error("Loading module "+a,e),n.events.trigger("modules.error",a,e)}}n.events.trigger("modules.loaded.all",r)},print:function(e){if(e)for(var t in this.all){var n=this.all[t];e.logger.debug("Name: ",t),e.logger.debug("\tDependencies: ",n.dependencies),e.logger.debug("\tDependant: ",n.dependant)}else console.error('Error: "load" should be called before "print"')}}}(),function(){"use strict";function e(e,n){var r=t();e.append(r)}function t(){var e=document.createElement("div");return e.className="pane-header",e}Cobweb.prototype.modules.add("pane-header",function(t){t.events.on("pane.create",function(n){e(n,t)})},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){if(this.types.has(n)){var r=this.types.get(n);r.onPaneType(t,e);var o=t.querySelector(".pane-header");r.onCreateHeader(o,e),t.attrData("pane-type",n)}}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t){e.events.trigger("pane.create",t)}function n(t,n){e.events.trigger("pane.split",t,n)}function r(t){e.events.trigger("pane.resize",t)}e.events.on("app.loaded",function(){e.pane.internal=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneCreate:t,onPaneSplit:n,onPaneResize:r}})}),e.pane={}})}(),function(){"use strict";Cobweb.prototype.modules.add("interaction-mode",function(e){e.surface.interaction={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["surface"])}(),function(){"use strict";function e(e,t){var o=document.createElement("canvas");o.id="surface"+r++,o.className="surface",e.append(o),t.surface.data=t.surface.data||{},t.surface.data[o.id]={},t.surface.data[o.id].surface={proj:mat4.create(),center:[0,0,0],rotation:[0,-.4],distance:5,getViewMatrix:function(e){var t=[0,0,0];this.getCameraPosition(t),mat4.lookAt(e,t,this.center,[0,1,0])},getCameraPosition:function(e){e[2]=-this.distance,vec3.rotateX(e,e,this.rotation[1]),vec3.rotateY(e,e,-this.rotation[0]),vec3.add(e,e,this.center)}},n(t,e),t.events.trigger("surface.create",o)}function t(e,t){var n=document.createElement("label");n.innerHTML="Surface Pane",e.appendChild(n)}function n(e,t){var n=t.querySelector("canvas"),r=n.getContext("2d"),o=e.surface.data[n.id],a=t.querySelector(".pane-header"),i=a?a.height():0,s=t.width(),c=t.height()-i;o.imgData=r.createImageData(s,c),o.buffer=new Uint8Array(s*c*4),n.height=c,n.width=s,mat4.perspective(o.surface.proj,45*DEG2RAD,s/c,.1,1e3)}var r=0;Cobweb.prototype.modules.add("surface",function(r){r.pane.types.add("surface",{onPaneType:e,onCreateHeader:t}),r.events.on("pane.resize",function(e){"surface"===e.attrData("pane-type")&&n(r,e)}),window.addEventListener("resize",function(e){for(var t=r.pane.internal.container.querySelectorAll(".pane canvas"),o=0;o<t.length;o++)n(r,t[o].parentNode)}),r.events.on("pane.create",function(e){r.pane.setType(e,"surface")}),r.surface={}},["pane-types"])}(),function(){"use strict";function e(e,t,n){t&&(e[0]=t[0]+.005*n[0],e[1]=t[1]+.005*n[1])}function t(e,t){return e?[e[0]-t[0],e[1]-t[1]]:[0,0]}var n=null,r=null;Cobweb.prototype.modules.add("common-interaction",function(o){o.surface.interaction.add("common",{onMouseMove:function(a,i){if(a.target.dataset.moving){var s=a.target,c=o.surface.data[s.id];if(c){var u=t(r,i);e(c.surface.rotation,n,u)}}return!1},onMouseDown:function(e,t){if(2===e.which){e.target.dataset.moving="true";var a=e.target,i=o.surface.data[a.id];n=i.surface.rotation.slice(),r=t}return!0},onMouseUp:function(a,i){if(2===a.which){delete a.target.dataset.moving;var s=a.target,c=o.surface.data[s.id],u=t(r,i);e(c.surface.rotation,n,u),r=null}return!0},onClick:function(e,t){return!0}})},["surface-interaction"])}(),function(){"use strict";Cobweb.prototype.modules.add("object-interaction",function(e){e.surface.interaction.add("object",{onMouseMove:function(e,t){return!0},onMouseDown:function(t,n){return e.logger.debug("onMouseDown",t),!0},onMouseUp:function(t,n){return e.logger.debug("onMouseUp",t),!0},onClick:function(t,n){return e.logger.debug("onClick",t),!0}}),e.events.on("surface.create",function(t){e.surface.setInteraction(t,"object")})},["surface-interaction"])}(),function(){"use strict";function e(e,n){var r=t(n);switch(n.type){case"mousemove":return e.onMouseMove(n,r);case"mousedown":return e.onMouseDown(n,r);case"mouseup":return e.onMouseUp(n,r);case"click":return e.onClick(n,r)}}function t(e){var t;return t=e.pageX||e.pageY?[e.pageX,e.pageY]:[e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop],t[0]-=e.target.offsetLeft,t[1]-=e.target.offsetTop,t}Cobweb.prototype.modules.add("surface-interaction",function(t){function n(n){var r=t.surface.getInteraction(n.target),o=e(r,n);if(o){var a=t.surface.interaction.get("common");e(a,n)}}t.surface.setInteraction=function(e,n){var r=t.surface.interaction;r.has(n)&&e.attrData("surface-interaction",n)},t.surface.getInteraction=function(e){var n=t.surface.interaction,r=e.attrData("surface-interaction");return n.get(r)},t.events.on("surface.create",function(e){e.onmousemove=n,e.onmousedown=n,e.onmouseup=n,e.onclick=n}),t.events.on("pane.split",function(e,t){t.attrData("surface-interaction",e.attrData("surface-interaction"))})},["interaction-mode","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  vec4 ambient = vec4(0.1, 0.1, 0.1, 1);  gl_FragColor = ambient + u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[.7,.7,.7,1],u_lightvector:null,u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(a){for(var i=e.scene.root.dfs(),s=0;s<i.length;s++){var c=i[s].data;if("object"===c.type){var u=vec3.create();a.getCameraPosition(u),vec3.normalize(u,u),o.u_lightvector=u,a.getViewMatrix(n),mat4.multiply(n,n,c.model),mat4.multiply(r,a.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive)}}}),e.events.on("surface.create",function(t){e.surface.setRender(t,"solid")})},["surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.surface.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("render",n)},e.surface.getRender=function(t){var n=e.graphics.renders,r=t.attrData("render");return n.get(r)};for(var t=document.querySelectorAll(".pane"),n=0;n<t.length;n++)if("surface"==t[n].dataset.paneType){var r=t[n].querySelector("canvas");r.dataset.render="solid"}e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=e.surface.data[t.id],r=e.graphics.gl,o=t.clientWidth,a=t.clientHeight;r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.viewport(0,0,o,a);var i=e.surface.getRender(t);i&&i(n.surface);var s=t.getContext("2d");s&&(r.readPixels(0,0,o,a,r.RGBA,r.UNSIGNED_BYTE,n.buffer),n.imgData.data.set(n.buffer),s.putImageData(n.imgData,0,0))}var t=function(t){this.instance=t,this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.349,.349,.349,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e)})}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){e.scene={root:TreeNode.extend({})};var t=mat4.create();mat4.rotateY(t,t,.8),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,mesh:GL.Mesh.cube(),model:t}),e.scene.root.add({type:"ligth",color:[1,1,1],intensity:1})},["graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsInRyZWUuanMiLCJldmVudHMuanMiLCJsb2dnZXIuanMiLCJjb2J3ZWIuanMiLCJtb2R1bGVzLmpzIiwicGFuZS9wYW5lLWhlYWRlci5qcyIsInBhbmUvcGFuZS10eXBlcy5qcyIsInBhbmUvcGFuZXMuanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24tbW9kZXMuanMiLCJwYW5lL3N1cmZhY2Uvc3VyZmFjZS5qcyIsInBhbmUvc3VyZmFjZS9pbnRlcmFjdGlvbi9jb21tb24taW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24vb2JqZWN0LWludGVyYWN0aW9uLmpzIiwicGFuZS9zdXJmYWNlL2ludGVyYWN0aW9uL3N1cmZhY2UtaW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvcmVuZGVyL3JlbmRlci1zb2xpZC5qcyIsInBhbmUvc3VyZmFjZS9yZW5kZXIvc3VyZmFjZS1yZW5kZXIuanMiLCJncmFwaGljLXJlbmRlci5qcyIsImdyYXBoaWMuanMiLCJzY2VuZS5qcyJdLCJuYW1lcyI6WyJzYWZlRXh0ZW5kIiwicHJvdG90eXBlIiwicHJvcGVydHkiLCJ2YWx1ZSIsIkFycmF5IiwiYSIsInRoaXMiLCJjb25jYXQiLCJpIiwibGVuZ3RoIiwiaiIsInNwbGljZSIsImNhbGxiYWNrIiwiczQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkhUTUxFbGVtZW50Iiwib2xkQ2xhc3NOYW1lcyIsIm5ld0NsYXNzTmFtZXMiLCJhcmd1bWVudHMiLCJjbGFzc05hbWUiLCJ0cmltIiwicmVwbGFjZSIsInNwbGl0IiwidW5pcXVlIiwiam9pbiIsInF1ZXJ5Q2xhc3NOYW1lcyIsImN1cnJlbnRDbGFzc05hbWVzIiwiaW5kZXgiLCJuYW1lIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzTmFtZXMiLCJyZW1vdmVFYWNoIiwiZm9yRWFjaCIsImF0dHIiLCJ3aW5kb3ciLCJfX2RhdGFfY2FjaGUiLCJXZWFrTWFwIiwiZWxBdHRycyIsImdldCIsInVuZGVmaW5lZCIsInNldCIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJFbGVtZW50IiwibWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsIm1hdGNoZXMiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInF1ZXJ5IiwicGFyZW50RWxlbWVudCIsImN1cnJlbnQiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsImhlaWdodCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJndWlkIiwib3ZlcmxhcCIsInF1ZXJ5U2VsZWN0b3IiLCJfZXh0ZW5kIiwib3B0aW9ucyIsImRlZmF1bHRzIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiT2JqZWN0Iiwib2JqIiwibmV3T2JqIiwiY2xvbmUiLCJleHRlbmQiLCJUcmVlTm9kZSIsInBhcmVudCIsImNoaWxkcmVuIiwiaXNSb290IiwiYWRkIiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsInB1c2giLCJyZW1vdmUiLCJzbGljZSIsImRmcyIsImNoZWNrIiwib3V0IiwiYmZzIiwiX1RyZWVOb2RlIiwiY2FsbCIsImNyZWF0ZSIsIkV2ZW50SGFuZGxlciIsImluc3RhbmNlIiwibGlzdGVuZXJzIiwidHJpZ2dlciIsImxvZ2dlciIsImRlYnVnIiwiYXBwbHkiLCJvbiIsIm9mZiIsImFycmF5IiwiZW1wdHlGdW5jdGlvbiIsIkxvZ2dlciIsImlzRGVidWciLCJjb25zb2xlIiwiYmluZCIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJkZWZhdWx0T3B0aW9ucyIsImNvbnRhaW5lciIsInNlbGVjdG9yIiwiQ29id2ViIiwiRXJyb3IiLCJhZGRDbGFzcyIsImV2ZW50cyIsIm1vZHVsZXMiLCJsb2FkIiwiYWRkUmV2ZXJzZURlcGVuZGVuY2llcyIsIm1vZHVsZSIsImRlcGVuZGFudCIsImRlcGVuZGVuY2llcyIsImRlcFBsdWdpbiIsInRvcG9sb2dpY2FsU29ydCIsImNhbmRpZGF0ZXMiLCJzb3J0ZWROYW1lcyIsIm5leHROYW1lIiwiZGVwTmFtZSIsImFsbERlcGVuZGVuY2llc01ldCIsIndhcm5pbmciLCJrZXlzIiwibG9hZGVkVW50aWxOb3ciLCJhbGwiLCJpbml0IiwiZXgiLCJwcmludCIsIm9uQ3JlYXRlQ2FsbGJhY2siLCJwYW5lIiwiaGVhZGVyIiwiY3JlYXRlSGVhZGVyIiwiYXBwZW5kIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInBhbmVUeXBlcyIsImNhbGxiYWNrcyIsImhhcyIsIm9sZFBhbmUiLCJuZXdQYW5lIiwib2xkVHlwZSIsImF0dHJEYXRhIiwic2V0VHlwZSIsInR5cGVzIiwidHlwZUNhbGxiYWNrcyIsIm9uUGFuZVR5cGUiLCJwYW5lSGVhZGVyIiwib25DcmVhdGVIZWFkZXIiLCJvblBhbmVDcmVhdGUiLCJvblBhbmVTcGxpdCIsIm9yaWdpbiIsIm9uUGFuZVJlc2l6ZSIsImludGVybmFsIiwiUGFuZSIsInNlcGFyYXRvciIsInNpemUiLCJzdXJmYWNlIiwiaW50ZXJhY3Rpb24iLCJvblN1cmZhY2VQYW5lVHlwZSIsImNhbnZhcyIsImlkIiwic3VyZmFjZUluZGV4IiwicHJvaiIsIm1hdDQiLCJjZW50ZXIiLCJyb3RhdGlvbiIsImRpc3RhbmNlIiwiZ2V0Vmlld01hdHJpeCIsInZpZXciLCJleWUiLCJnZXRDYW1lcmFQb3NpdGlvbiIsImxvb2tBdCIsInZlYzMiLCJyb3RhdGVYIiwicm90YXRlWSIsInVwZGF0ZUNhbnZhc1NpemUiLCJvbkNyZWF0ZVN1cmZhY2VIZWFkZXIiLCJsYWJlbCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJoZWFkZXJIZWlnaHQiLCJpbWdEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwiYnVmZmVyIiwiVWludDhBcnJheSIsInBlcnNwZWN0aXZlIiwiREVHMlJBRCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN1cmZhY2VzIiwicGFyZW50Tm9kZSIsImNvbWJpbmUiLCJ0YXJnZXQiLCJvcmlnaW5hbFJvdGF0aW9uIiwiZGVsdGEiLCJnZXRDb29yZHNEZWx0YSIsImluaXRpYWwiLCJtb3VzZURvd25Db29yZHMiLCJvbk1vdXNlTW92ZSIsInJlYWxDb29yZHMiLCJkYXRhc2V0IiwibW92aW5nIiwib25Nb3VzZURvd24iLCJ3aGljaCIsIm9uTW91c2VVcCIsIm9uQ2xpY2siLCJzZXRJbnRlcmFjdGlvbiIsInJ1bkNhbGxiYWNrIiwiZ2V0TG9jYWxDb29yZGluYXRlcyIsInR5cGUiLCJjb29yZGluYXRlcyIsInBhZ2VYIiwicGFnZVkiLCJjbGllbnRYIiwiYm9keSIsInNjcm9sbExlZnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRZIiwic2Nyb2xsVG9wIiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9uU3VyZmFjZUV2ZW50IiwiZ2V0SW50ZXJhY3Rpb24iLCJrZWVwUnVubmluZyIsImNvbW1vbiIsImludGVyYWN0aW9ucyIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZWRvd24iLCJvbm1vdXNldXAiLCJvbmNsaWNrIiwic2hhZGVyIiwiU2hhZGVyIiwidGVtcCIsIm12cCIsInVuaWZvcm1zIiwidV9jb2xvciIsInVfbGlnaHR2ZWN0b3IiLCJ1X21vZGVsIiwidV9tdnAiLCJncmFwaGljcyIsInJlbmRlcnMiLCJvYmpzIiwic2NlbmUiLCJyb290IiwibGlnaHREaXJlY3Rpb24iLCJub3JtYWxpemUiLCJtdWx0aXBseSIsIm1vZGVsIiwiZHJhdyIsIm1lc2giLCJwcmltaXRpdmUiLCJzZXRSZW5kZXIiLCJnZXRSZW5kZXIiLCJwYW5lcyIsInBhbmVUeXBlIiwicmVuZGVyIiwiZHJhd1JlbmRlclRhcmdldCIsImdsIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwiREVQVEhfQlVGRkVSX0JJVCIsInZpZXdwb3J0IiwicmVhZFBpeGVscyIsIlJHQkEiLCJVTlNJR05FRF9CWVRFIiwicHV0SW1hZ2VEYXRhIiwiR3JhcGhpY3MiLCJHTCIsInNjcmVlbiIsImFuaW1hdGUiLCJvbmRyYXciLCJyZW5kZXJUYXJnZXRzIiwiY2xlYXJDb2xvciIsImVuYWJsZSIsIkRFUFRIX1RFU1QiLCJtYXQiLCJUUklBTkdMRVMiLCJNZXNoIiwiY3ViZSIsImNvbG9yIiwiaW50ZW5zaXR5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBZUEsU0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FDQUYsRUFBQUMsS0FBQUQsRUFBQUMsR0FBQUMsR0FkQUgsRUFBQUksTUFBQUgsVUFBQSxTQUFBLFdBRUEsSUFBQSxHQURBSSxHQUFBQyxLQUFBQyxTQUNBQyxFQUFBLEVBQUFBLEVBQUFILEVBQUFJLFNBQUFELEVBQ0EsSUFBQSxHQUFBRSxHQUFBRixFQUFBLEVBQUFFLEVBQUFMLEVBQUFJLFNBQUFDLEVBQ0FMLEVBQUFHLEtBQUFILEVBQUFLLElBQUFMLEVBQUFNLE9BQUFELElBQUEsRUFDQSxPQUFBTCxLQUdBTCxFQUFBSSxNQUFBSCxVQUFBLFVBQUEsU0FBQVcsR0FDQSxJQUFBLEdBQUFKLEdBQUEsRUFBQUEsRUFBQUYsS0FBQUcsT0FBQUQsSUFDQUksRUFBQU4sS0FBQUUsR0FBQUEsRUFBQUYsV0NiQSxXQUNBLFlBa0lBLFNBQUFOLEdBQUFDLEVBQUFDLEVBQUFDLEdBQ0FGLEVBQUFDLEtBQUFELEVBQUFDLEdBQUFDLEdBR0EsUUFBQVUsS0FDQSxNQUFBQyxNQUFBQyxNQUFBLE9BQUEsRUFBQUQsS0FBQUUsV0FDQUMsU0FBQSxJQUFBQyxVQUFBLEdBdElBbEIsRUFBQW1CLFlBQUFsQixVQUFBLFdBQUEsV0FDQSxHQUFBbUIsR0FBQUMsQ0FDQSxLQUFBLEdBQUFiLEtBQUFjLFdBQ0FGLEVBQUFkLEtBQUFpQixVQUFBakIsS0FBQWlCLFVBQUFDLE9BQUFDLFFBQUEsT0FBQSxLQUFBQyxNQUFBLFFB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RyxFQUFBQSxFQUFBLElBRUFqTSxFQUFBZ0ssTUFBQUMsS0FBQS9LLEtBQ0E2SSxLQUFBLFNBQ0F5QyxVQUFBeEssRUFBQTZKLFNBQUFrQixHQUFBbUIsVUFDQTNCLEtBQUFrQixHQUFBVSxLQUFBQyxPQUNBL0IsTUFBQTRCLElBRUFqTSxFQUFBZ0ssTUFBQUMsS0FBQS9LLEtBQ0E2SSxLQUFBLFFBQ0FzRSxPQUFBLEVBQUEsRUFBQSxHQUNBQyxVQUFBLE1BRUEiLCJmaWxlIjoiY29id2ViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEFycmF5LnByb3RvdHlwZSwgJ3VuaXF1ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBhID0gdGhpcy5jb25jYXQoKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKVxyXG4gICAgICAgICAgICAgICAgaWYoYVtpXSA9PT0gYVtqXSkgYS5zcGxpY2Uoai0tLCAxKTtcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAnZm9yRWFjaCcsIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzW2ldLCBpLCB0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYWRkQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9sZENsYXNzTmFtZXMsIG5ld0NsYXNzTmFtZXM7XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIG9sZENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgbmV3Q2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gb2xkQ2xhc3NOYW1lcy5jb25jYXQobmV3Q2xhc3NOYW1lcykudW5pcXVlKCkuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnaGFzQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5Q2xhc3NOYW1lcywgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgcXVlcnlDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHF1ZXJ5Q2xhc3NOYW1lcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcXVlcnlDbGFzc05hbWVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2xhc3NOYW1lcy5pbmRleE9mKG5hbWUpID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncmVtb3ZlQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gMCwgY3VycmVudENsYXNzTmFtZXMsIHJlbW92ZUNsYXNzTmFtZXM7XHJcbiAgICAgICAgdmFyIHJlbW92ZUVhY2ggPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzc05hbWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzTmFtZXMuZm9yRWFjaChyZW1vdmVFYWNoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjdXJyZW50Q2xhc3NOYW1lcy51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdkYXRhJywgZnVuY3Rpb24gKGF0dHIsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cuX19kYXRhX2NhY2hlKSB3aW5kb3cuX19kYXRhX2NhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuICAgICAgICB2YXIgZWxBdHRycyA9IHdpbmRvdy5fX2RhdGFfY2FjaGUuZ2V0KHRoaXMpIHx8IHt9O1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGVsQXR0cnNbYXR0cl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZWxBdHRycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGF0dHIpIHJldHVybiBlbEF0dHJzICYmIGVsQXR0cnNbYXR0cl07XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGVsQXR0cnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdzZXREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHdpbmRvdy5fX2RhdGFfY2FjaGUuc2V0KHRoaXMsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhdHRyJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHJEYXRhJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cignZGF0YS0nICsgbmFtZSwgdmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChFbGVtZW50LnByb3RvdHlwZSwgJ21hdGNoZXMnLFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSAodGhpcy5kb2N1bWVudCB8fCB0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksXHJcbiAgICAgICAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCAmJiBtYXRjaGVzLml0ZW0oaSkgIT09IHRoaXMpIHt9XHJcbiAgICAgICAgICAgIHJldHVybiBpID4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3BhcmVudCcsIGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIGlmICghcXVlcnkpIHJldHVybiB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKCFjdXJyZW50Lm1hdGNoZXMocXVlcnkpKVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoZWlnaHQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZSArICdweCc7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudEhlaWdodDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnd2lkdGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRXaWR0aDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQod2luZG93LCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ0dVSUQtJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ3VpZCA9IG51bGwsIG92ZXJsYXAgPSBudWxsO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgZ3VpZCA9IHdpbmRvdy5ndWlkKCk7XHJcbiAgICAgICAgICAgIG92ZXJsYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGd1aWQpO1xyXG4gICAgICAgIH0gd2hpbGUob3ZlcmxhcCk7XHJcbiAgICAgICAgdGhpcy5hdHRyKCdpZCcsIGd1aWQpO1xyXG4gICAgICAgIHJldHVybiBndWlkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgIC50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoT2JqZWN0LCAnY2xvbmUnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIG5ld09iaiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iailcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBuZXdPYmpbcHJvcGVydHldID0gT2JqZWN0LmNsb25lKG9ialtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBvYmpbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5leHRlbmQgPSBfZXh0ZW5kO1xyXG5cclxuICAgIGZ1bmN0aW9uIF9leHRlbmQob3B0aW9ucywgZGVmYXVsdHMpIHtcclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wICYmIGRlZmF1bHRzLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkZWZhdWx0c1twcm9wXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbcHJvcF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2V4dGVuZChvcHRpb25zW3Byb3BdLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnNbcHJvcF0gPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBUcmVlTm9kZSA9IGZ1bmN0aW9uIChwYXJlbnQsIGRhdGEpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LlRyZWVOb2RlID0gVHJlZU5vZGU7XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmlzUm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMucGFyZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLCBkYXRhKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4uc2xpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuZGZzID0gZnVuY3Rpb24gKGNoZWNrKSB7XHJcbiAgICAgICAgdmFyIG91dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWNoZWNrIHx8IChjaGVjayAmJiBjaGVjayh0aGlzLmNoaWxkcmVuW2ldKSkpXHJcbiAgICAgICAgICAgICAgICBvdXQucHVzaCh0aGlzLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgb3V0LmNvbmNhdCh0aGlzLmNoaWxkcmVuW2ldLmRmcyhjaGVjaykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuYmZzID0gZnVuY3Rpb24gKGNoZWNrKSB7XHJcbiAgICAgICAgdmFyIG91dCA9IFtdLCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoIWNoZWNrIHx8IChjaGVjayAmJiBjaGVjayh0aGlzLmNoaWxkcmVuW2ldKSkpXHJcbiAgICAgICAgICAgICAgICBvdXQucHVzaCh0aGlzLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgb3V0LmNvbmNhdCh0aGlzLmNoaWxkcmVuW2ldLmJmcyhjaGVjaykpO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLmV4dGVuZCA9IGZ1bmN0aW9uIChkZWZhdWx0cykge1xyXG4gICAgICAgIHZhciBfVHJlZU5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIFRyZWVOb2RlLmNhbGwodGhpcywgcGFyZW50LCBkYXRhKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9UcmVlTm9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRyZWVOb2RlLnByb3RvdHlwZSk7XHJcbiAgICAgICAgX1RyZWVOb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IF9UcmVlTm9kZTtcclxuICAgICAgICBleHRlbmQoX1RyZWVOb2RlLnByb3RvdHlwZSwgZGVmYXVsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgX1RyZWVOb2RlKG51bGwpO1xyXG4gICAgfTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0gfHwgW107XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5sb2dnZXIuZGVidWcobmFtZSwgYXJndW1lbnRzKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNbbmFtZV0pIHRoaXMubGlzdGVuZXJzW25hbWVdID0gW107XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbbmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1tuYW1lXTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tuYW1lXSkge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmxpc3RlbmVyc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKGFycmF5LmluZGV4T2YoY2FsbGJhY2spID4gLTEpIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuRXZlbnRIYW5kbGVyID0gRXZlbnRIYW5kbGVyO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBlbXB0eUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gICAgdmFyIExvZ2dlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgaXNEZWJ1Zykge1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBpc0RlYnVnID8gY29uc29sZS5kZWJ1Zy5iaW5kKCkgOiBlbXB0eUZ1bmN0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmluZm8gPSBpc0RlYnVnID8gY29uc29sZS5pbmZvLmJpbmQoKSA6IGVtcHR5RnVuY3Rpb247XHJcblxyXG4gICAgICAgIHRoaXMud2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBjb25zb2xlLmVycm9yLmJpbmQoKTtcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkxvZ2dlciA9IExvZ2dlcjtcclxufSkoKSk7XHJcbiIsIihmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgICBjb250YWluZXI6IHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICcjY29id2ViJyxcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2ItY29udGFpbmVyJ1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIENvYndlYiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBleHRlbmQodGhpcy5vcHRpb25zLCBkZWZhdWx0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29udGFpbmVyIHNlbGVjdG9yOiBcXCcnICtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IgKyAnXFwnJyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGFzc05hbWUpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRhdGEoJ2luc3RhbmNlJywgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmxvYWQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignYXBwLmxvYWRlZCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuQ29id2ViID0gQ29id2ViO1xyXG59KCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMgPSB7XHJcbiAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBpbml0LCBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IGRlcGVuZGVuY2llcyxcclxuICAgICAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGFkZFJldmVyc2VEZXBlbmRlbmNpZXModGhpcy5hbGwpO1xyXG4gICAgICAgICAgICB2YXIgc29ydGVkTmFtZXMgPSB0b3BvbG9naWNhbFNvcnQoaW5zdGFuY2UsIHRoaXMuYWxsKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3J0ZWROYW1lcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gc29ydGVkTmFtZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdLmluaXQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmxvYWRlZCcsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0xvYWRpbmcgbW9kdWxlICcgKyBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3InLCBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMubG9hZGVkLmFsbCcsIHNvcnRlZE5hbWVzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByaW50OiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnTmFtZTogJywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdcXHREZXBlbmRlbmNpZXM6ICcsIG1vZHVsZS5kZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnXFx0RGVwZW5kYW50OiAnLCBtb2R1bGUuZGVwZW5kYW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBcImxvYWRcIiBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBcInByaW50XCInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkUmV2ZXJzZURlcGVuZGVuY2llcyAobW9kdWxlcykge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbW9kdWxlcykge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKCFtb2R1bGUuZGVwZW5kYW50KSBtb2R1bGUuZGVwZW5kYW50ID0gW107XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBQbHVnaW4gPSBtb2R1bGVzW21vZHVsZS5kZXBlbmRlbmNpZXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVwUGx1Z2luLmRlcGVuZGFudCkgZGVwUGx1Z2luLmRlcGVuZGFudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlcFBsdWdpbi5kZXBlbmRhbnQucHVzaChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b3BvbG9naWNhbFNvcnQgKGluc3RhbmNlLCBtb2R1bGVzKSB7XHJcbiAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSBbXSwgc29ydGVkTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1vZHVsZXMpXHJcbiAgICAgICAgICAgIGlmIChtb2R1bGVzW25hbWVdLmRlcGVuZGVuY2llcy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2gobmFtZSk7XHJcbiAgICAgICAgd2hpbGUgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgbmV4dE5hbWUgPSBjYW5kaWRhdGVzWzBdO1xyXG4gICAgICAgICAgICBjYW5kaWRhdGVzLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgaWYgKG1vZHVsZXNbbmV4dE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuZXh0TmFtZV07XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWROYW1lcy5wdXNoKG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGFudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBOYW1lID0gbW9kdWxlLmRlcGVuZGFudFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRGVwZW5kZW5jaWVzTWV0KHNvcnRlZE5hbWVzLCBtb2R1bGVzW2RlcE5hbWVdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGRlcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3IubWlzc2luZycsIG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci53YXJuaW5nKCdNaXNzaW5nIG1vZHVsZSBcXCcnICsgbmV4dE5hbWUgKyAnXFwnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1vZHVsZXMpLmxlbmd0aCAhPT0gc29ydGVkTmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yLmN5Y2xlJyk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5lcnJvcignRGVwZW5kZW5jeSBjeWNsZSBmb3VuZCBpbiBtb2R1bGVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzb3J0ZWROYW1lcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhbGxEZXBlbmRlbmNpZXNNZXQgKGxvYWRlZFVudGlsTm93LCBtb2R1bGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmIChsb2FkZWRVbnRpbE5vdy5pbmRleE9mKG1vZHVsZS5kZXBlbmRlbmNpZXNbaV0pID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZS1oZWFkZXInLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuY3JlYXRlJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgb25DcmVhdGVDYWxsYmFjayhwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3BhbmUtdHlwZXMnXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gb25DcmVhdGVDYWxsYmFjayAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgaGVhZGVyID0gY3JlYXRlSGVhZGVyKCk7XHJcbiAgICAgICAgcGFuZS5hcHBlbmQoaGVhZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVIZWFkZXIgKCkge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3BhbmUtaGVhZGVyJztcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZS10eXBlcycsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBwYW5lVHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSBjYWxsYmFja3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGRUeXBlID0gb2xkUGFuZS5hdHRyRGF0YSgncGFuZS10eXBlJyk7XHJcbiAgICAgICAgICAgIGlmIChvbGRUeXBlKSBpbnN0YW5jZS5wYW5lLnNldFR5cGUobmV3UGFuZSwgb2xkVHlwZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUudHlwZXMgPSBwYW5lVHlwZXM7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0VHlwZSA9IGZ1bmN0aW9uIChwYW5lLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGVzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGVDYWxsYmFja3MgPSB0aGlzLnR5cGVzLmdldChuYW1lKTtcclxuICAgICAgICAgICAgICAgIHR5cGVDYWxsYmFja3Mub25QYW5lVHlwZShwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFuZUhlYWRlciA9IHBhbmUucXVlcnlTZWxlY3RvcignLnBhbmUtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FsbGJhY2tzLm9uQ3JlYXRlSGVhZGVyKHBhbmVIZWFkZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScsIG5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFsncGFuZSddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3BhbmUnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ2FwcC5sb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuaW50ZXJuYWwgPSBuZXcgUGFuZSh7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IGluc3RhbmNlLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yLFxyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogM1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFuZUNyZWF0ZTogb25QYW5lQ3JlYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFuZVNwbGl0OiBvblBhbmVTcGxpdCxcclxuICAgICAgICAgICAgICAgICAgICBvblBhbmVSZXNpemU6IG9uUGFuZVJlc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAvL29uUGFuZU1lcmdlOiBvblBhbmVNZXJnZSxcclxuICAgICAgICAgICAgICAgICAgICAvL29uUGFuZURlc3Ryb3k6IG9uUGFuZURlc3Ryb3ksXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lID0ge307XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZUNyZWF0ZSAocGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5jcmVhdGUnLCBwYW5lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZVNwbGl0IChvcmlnaW4sIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUuc3BsaXQnLCBvcmlnaW4sIG5ld1BhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lUmVzaXplIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwYW5lLnJlc2l6ZScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lTWVyZ2UgKG1lcmdlciwgdG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygnb25QYW5lTWVyZ2UnLCBtZXJnZXIsIHRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZURlc3Ryb3kgKHBhbmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygnb25QYW5lRGVzdHJveScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnaW50ZXJhY3Rpb24tbW9kZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24gPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSBjYWxsYmFja3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ3N1cmZhY2UnXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgc3VyZmFjZUluZGV4ID0gMDtcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS50eXBlcy5hZGQoJ3N1cmZhY2UnLCB7XHJcbiAgICAgICAgICAgIG9uUGFuZVR5cGU6IG9uU3VyZmFjZVBhbmVUeXBlLFxyXG4gICAgICAgICAgICBvbkNyZWF0ZUhlYWRlcjogb25DcmVhdGVTdXJmYWNlSGVhZGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5yZXNpemUnLCBmdW5jdGlvbiAocGFuZSkge1xyXG4gICAgICAgICAgICBpZiAocGFuZS5hdHRyRGF0YSgncGFuZS10eXBlJykgPT09ICdzdXJmYWNlJylcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhbnZhc1NpemUoaW5zdGFuY2UsIHBhbmUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBzdXJmYWNlcyA9IGluc3RhbmNlLnBhbmUuaW50ZXJuYWwuY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgnLnBhbmUgY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3VyZmFjZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhbnZhc1NpemUoaW5zdGFuY2UsIHN1cmZhY2VzW2ldLnBhcmVudE5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5jcmVhdGUnLCBmdW5jdGlvbiAocGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLnNldFR5cGUocGFuZSwgJ3N1cmZhY2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZSA9IHt9O1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uU3VyZmFjZVBhbmVUeXBlIChwYW5lLCBpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjYW52YXMuaWQgPSAnc3VyZmFjZScgKyAoc3VyZmFjZUluZGV4KyspO1xyXG4gICAgICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnc3VyZmFjZSc7XHJcbiAgICAgICAgcGFuZS5hcHBlbmQoY2FudmFzKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5kYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhIHx8IHt9O1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuZGF0YVtjYW52YXMuaWRdID0ge307XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF0uc3VyZmFjZSA9IHtcclxuICAgICAgICAgICAgcHJvajogbWF0NC5jcmVhdGUoKSxcclxuICAgICAgICAgICAgY2VudGVyOiBbMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIHJvdGF0aW9uOiBbMCwgLTAuNF0sXHJcbiAgICAgICAgICAgIGRpc3RhbmNlOiA1LFxyXG4gICAgICAgICAgICBnZXRWaWV3TWF0cml4OiBmdW5jdGlvbiAodmlldykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV5ZSA9IFswLCAwLCAwXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2FtZXJhUG9zaXRpb24oZXllKTtcclxuICAgICAgICAgICAgICAgIG1hdDQubG9va0F0KHZpZXcsIGV5ZSwgdGhpcy5jZW50ZXIsIFswLCAxLCAwXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldENhbWVyYVBvc2l0aW9uOiBmdW5jdGlvbiAoZXllKSB7XHJcbiAgICAgICAgICAgICAgICBleWVbMl0gPSAtdGhpcy5kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHZlYzMucm90YXRlWChleWUsIGV5ZSwgdGhpcy5yb3RhdGlvblsxXSk7XHJcbiAgICAgICAgICAgICAgICB2ZWMzLnJvdGF0ZVkoZXllLCBleWUsIC10aGlzLnJvdGF0aW9uWzBdKTtcclxuICAgICAgICAgICAgICAgIHZlYzMuYWRkKGV5ZSwgZXllLCB0aGlzLmNlbnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB1cGRhdGVDYW52YXNTaXplKGluc3RhbmNlLCBwYW5lKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3N1cmZhY2UuY3JlYXRlJywgY2FudmFzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkNyZWF0ZVN1cmZhY2VIZWFkZXIgKGhlYWRlciwgaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgIGxhYmVsLmlubmVySFRNTCA9ICdTdXJmYWNlIFBhbmUnO1xyXG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSAoaW5zdGFuY2UsIHBhbmUpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gcGFuZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcblxyXG4gICAgICAgIHZhciBoZWFkZXIgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJy5wYW5lLWhlYWRlcicpO1xyXG4gICAgICAgIHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXIgPyBoZWFkZXIuaGVpZ2h0KCkgOiAwO1xyXG5cclxuICAgICAgICB2YXIgd2lkdGggPSBwYW5lLndpZHRoKCksIGhlaWdodCA9IHBhbmUuaGVpZ2h0KCkgLSBoZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgZGF0YS5pbWdEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgZGF0YS5idWZmZXIgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xyXG5cclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG5cclxuICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKGRhdGEuc3VyZmFjZS5wcm9qLCA0NSAqIERFRzJSQUQsIHdpZHRoIC8gaGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIG9yaWdpbmFsUm90YXRpb24gPSBudWxsO1xyXG4gICAgdmFyIG1vdXNlRG93bkNvb3JkcyA9IG51bGw7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnY29tbW9uLWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbi5hZGQoJ2NvbW1vbicsIHtcclxuICAgICAgICAgICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0Lm1vdmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBnZXRDb29yZHNEZWx0YShtb3VzZURvd25Db29yZHMsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lKGRhdGEuc3VyZmFjZS5yb3RhdGlvbiwgb3JpZ2luYWxSb3RhdGlvbiwgZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmRhdGFzZXQubW92aW5nID0gJ3RydWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFJvdGF0aW9uID0gZGF0YS5zdXJmYWNlLnJvdGF0aW9uLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VEb3duQ29vcmRzID0gcmVhbENvb3JkcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbk1vdXNlVXA6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGV2ZW50LnRhcmdldC5kYXRhc2V0Lm1vdmluZztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZ2V0Q29vcmRzRGVsdGEobW91c2VEb3duQ29vcmRzLCByZWFsQ29vcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21iaW5lKGRhdGEuc3VyZmFjZS5yb3RhdGlvbiwgb3JpZ2luYWxSb3RhdGlvbiwgZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlRG93bkNvb3JkcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydzdXJmYWNlLWludGVyYWN0aW9uJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbWJpbmUgKHRhcmdldCwgb3JpZ2luYWxSb3RhdGlvbiwgZGVsdGEpIHtcclxuICAgICAgICBpZiAoIW9yaWdpbmFsUm90YXRpb24pIHJldHVybjtcclxuICAgICAgICB0YXJnZXRbMF0gPSBvcmlnaW5hbFJvdGF0aW9uWzBdICsgZGVsdGFbMF0gKiAwLjAwNTtcclxuICAgICAgICB0YXJnZXRbMV0gPSBvcmlnaW5hbFJvdGF0aW9uWzFdICsgZGVsdGFbMV0gKiAwLjAwNTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb29yZHNEZWx0YSAoaW5pdGlhbCwgY3VycmVudCkge1xyXG4gICAgICAgIGlmICghaW5pdGlhbCkgcmV0dXJuIFswLCAwXTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBpbml0aWFsWzBdIC0gY3VycmVudFswXSxcclxuICAgICAgICAgICAgaW5pdGlhbFsxXSAtIGN1cnJlbnRbMV1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnb2JqZWN0LWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbi5hZGQoJ29iamVjdCcsIHtcclxuICAgICAgICAgICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1Zygnb25Nb3VzZURvd24nLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZVVwOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1Zygnb25Nb3VzZVVwJywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdvbkNsaWNrJywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdzdXJmYWNlLmNyZWF0ZScsIGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnN1cmZhY2Uuc2V0SW50ZXJhY3Rpb24oc3VyZmFjZSwgJ29iamVjdCcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0sIFsnc3VyZmFjZS1pbnRlcmFjdGlvbiddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldEludGVyYWN0aW9uID0gZnVuY3Rpb24gKHN1cmZhY2UsIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGludGVyYWN0aW9ucyA9IGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb247XHJcbiAgICAgICAgICAgIGlmIChpbnRlcmFjdGlvbnMuaGFzKG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgc3VyZmFjZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicsIG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuZ2V0SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb25zID0gaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbjtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzdXJmYWNlLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcmFjdGlvbnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignc3VyZmFjZS5jcmVhdGUnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICBzdXJmYWNlLm9ubW91c2Vtb3ZlID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25tb3VzZWRvd24gPSBvblN1cmZhY2VFdmVudDtcclxuICAgICAgICAgICAgc3VyZmFjZS5vbm1vdXNldXAgPSBvblN1cmZhY2VFdmVudDtcclxuICAgICAgICAgICAgc3VyZmFjZS5vbmNsaWNrID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uU3VyZmFjZUV2ZW50IChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0gaW5zdGFuY2Uuc3VyZmFjZS5nZXRJbnRlcmFjdGlvbihldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIga2VlcFJ1bm5pbmcgPSBydW5DYWxsYmFjayhjYWxsYmFja3MsIGV2ZW50KTtcclxuICAgICAgICAgICAgaWYgKGtlZXBSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tbW9uID0gaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbi5nZXQoJ2NvbW1vbicpO1xyXG4gICAgICAgICAgICAgICAgcnVuQ2FsbGJhY2soY29tbW9uLCBldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nLCBvbGRQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydpbnRlcmFjdGlvbi1tb2RlJywgJ3N1cmZhY2UnXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcnVuQ2FsbGJhY2sgKGNhbGxiYWNrcywgZXZlbnQpIHtcclxuICAgICAgICB2YXIgcmVhbENvb3JkcyA9IGdldExvY2FsQ29vcmRpbmF0ZXMoZXZlbnQpO1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdtb3VzZW1vdmUnOiByZXR1cm4gY2FsbGJhY2tzLm9uTW91c2VNb3ZlKGV2ZW50LCByZWFsQ29vcmRzKTtcclxuICAgICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlRG93bihldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNldXAnOiByZXR1cm4gY2FsbGJhY2tzLm9uTW91c2VVcChldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NsaWNrJzogcmV0dXJuIGNhbGxiYWNrcy5vbkNsaWNrKGV2ZW50LCByZWFsQ29vcmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxDb29yZGluYXRlcyAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgaWYgKGV2ZW50LnBhZ2VYIHx8IGV2ZW50LnBhZ2VZKSB7XHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gW2V2ZW50LnBhZ2VYLCBldmVudC5wYWdlWV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICBldmVudC5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgICAgICBldmVudC5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvb3JkaW5hdGVzWzBdIC09IGV2ZW50LnRhcmdldC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIGNvb3JkaW5hdGVzWzFdIC09IGV2ZW50LnRhcmdldC5vZmZzZXRUb3A7XHJcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncmVuZGVyLXNvbGlkJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIHNoYWRlciA9IG5ldyBTaGFkZXIoXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX3ZlcnRleDsnICtcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWMzIGFfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfbXZwOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfbW9kZWw7JyArXHJcbiAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyArXHJcbiAgICAgICAgICAgICcgICAgdl9ub3JtYWwgPSAodV9tb2RlbCAqIHZlYzQoYV9ub3JtYWwsMC4wKSkueHl6OycgK1xyXG4gICAgICAgICAgICAnICAgIGdsX1Bvc2l0aW9uID0gdV9tdnAgKiB2ZWM0KGFfdmVydGV4LDEuMCk7JyArXHJcbiAgICAgICAgICAgICd9JyxcclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMyB1X2xpZ2h0dmVjdG9yOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSB2ZWM0IHVfY29sb3I7JyArXHJcbiAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgTiA9IG5vcm1hbGl6ZSh2X25vcm1hbCk7JyArXHJcbiAgICAgICAgICAgICcgIHZlYzQgYW1iaWVudCA9IHZlYzQoMC4xLCAwLjEsIDAuMSwgMSk7JyArXHJcbiAgICAgICAgICAgICcgIGdsX0ZyYWdDb2xvciA9IGFtYmllbnQgKyB1X2NvbG9yICogbWF4KDAuMCwgZG90KHVfbGlnaHR2ZWN0b3IsTikpOycgK1xyXG4gICAgICAgICAgICAnfSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgdmFyIG12cCA9IG1hdDQuY3JlYXRlKCk7XHJcblxyXG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHtcclxuICAgICAgICAgICAgdV9jb2xvcjogWzAuNywgMC43LCAwLjcsIDFdLFxyXG4gICAgICAgICAgICB1X2xpZ2h0dmVjdG9yOiBudWxsLFxyXG4gICAgICAgICAgICB1X21vZGVsOiBudWxsLFxyXG4gICAgICAgICAgICB1X212cDogbXZwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycy5hZGQoJ3NvbGlkJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgdmFyIG9ianMgPSBpbnN0YW5jZS5zY2VuZS5yb290LmRmcygpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9ianMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSBvYmpzW2ldLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpZ2h0RGlyZWN0aW9uID0gdmVjMy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdXJmYWNlLmdldENhbWVyYVBvc2l0aW9uKGxpZ2h0RGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShsaWdodERpcmVjdGlvbiwgbGlnaHREaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnVfbGlnaHR2ZWN0b3IgPSBsaWdodERpcmVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZS5nZXRWaWV3TWF0cml4KHRlbXApO1xyXG4gICAgICAgIFx0XHRcdG1hdDQubXVsdGlwbHkodGVtcCwgdGVtcCwgb2JqLm1vZGVsKTtcclxuICAgICAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KG12cCwgc3VyZmFjZS5wcm9qLCB0ZW1wKTtcclxuXHJcbiAgICAgICAgXHRcdFx0dW5pZm9ybXMudV9tb2RlbCA9IG9iai5tb2RlbDtcclxuICAgICAgICBcdFx0XHRzaGFkZXIudW5pZm9ybXModW5pZm9ybXMpLmRyYXcob2JqLm1lc2gsIG9iai5wcmltaXRpdmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignc3VyZmFjZS5jcmVhdGUnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldFJlbmRlcihzdXJmYWNlLCAnc29saWQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnc3VyZmFjZS1yZW5kZXInXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2Uuc2V0UmVuZGVyID0gZnVuY3Rpb24gKHN1cmZhY2UsIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcnMgPSBpbnN0YW5jZS5ncmFwaGljcy5yZW5kZXJzO1xyXG4gICAgICAgICAgICBpZiAocmVuZGVycy5oYXMobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlLmF0dHJEYXRhKCdyZW5kZXInLCBuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmdldFJlbmRlciA9IGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJzID0gaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycztcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzdXJmYWNlLmF0dHJEYXRhKCdyZW5kZXInKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwYW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYW5lJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAocGFuZXNbaV0uZGF0YXNldC5wYW5lVHlwZSA9PSAnc3VyZmFjZScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBwYW5lc1tpXS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5kYXRhc2V0LnJlbmRlciA9ICdzb2xpZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJywgb2xkUGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1yZW5kZXInKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzLXJlbmRlcicsICdzdXJmYWNlJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnZ3JhcGhpY3MtcmVuZGVyJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycyA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEdyYXBoaWNzID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuZ2wgPSBHTC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBoZWlnaHQ6IHNjcmVlbi5oZWlnaHQsXHJcbiAgICAgICAgICAgIHdpZHRoOiBzY3JlZW4ud2lkdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdsLmFuaW1hdGUoKTtcclxuICAgICAgICB0aGlzLmdsLm9uZHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlclRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW5kZXJUYXJnZXRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZHJhd1JlbmRlclRhcmdldChpbnN0YW5jZSwgcmVuZGVyVGFyZ2V0c1tpXSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdsLmNsZWFyQ29sb3IoMC4zNDksIDAuMzQ5LCAwLjM0OSwgMSk7XHJcbiAgICAgICAgdGhpcy5nbC5lbmFibGUodGhpcy5nbC5ERVBUSF9URVNUKTtcclxuICAgIH07XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnZ3JhcGhpY3MnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IG5ldyBHcmFwaGljcyhpbnN0YW5jZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3UmVuZGVyVGFyZ2V0IChpbnN0YW5jZSwgY2FudmFzKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXTtcclxuICAgICAgICB2YXIgZ2wgPSBpbnN0YW5jZS5ncmFwaGljcy5nbDtcclxuXHJcbiAgICAgICAgdmFyIHdpZHRoICA9IGNhbnZhcy5jbGllbnRXaWR0aCwgaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcclxuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XHJcbiAgICAgICAgZ2wudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIHZhciByZW5kZXIgPSBpbnN0YW5jZS5zdXJmYWNlLmdldFJlbmRlcihjYW52YXMpO1xyXG4gICAgICAgIGlmIChyZW5kZXIpIHJlbmRlcihkYXRhLnN1cmZhY2UpO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGdsLnJlYWRQaXhlbHMoMCwgMCwgd2lkdGgsIGhlaWdodCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgZGF0YS5idWZmZXIpO1xyXG4gICAgICAgICAgICBkYXRhLmltZ0RhdGEuZGF0YS5zZXQoZGF0YS5idWZmZXIpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnB1dEltYWdlRGF0YShkYXRhLmltZ0RhdGEsIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3NjZW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc2NlbmUgPSB7XHJcbiAgICAgICAgICAgIHJvb3Q6IFRyZWVOb2RlLmV4dGVuZCh7fSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbWF0ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICBtYXQ0LnJvdGF0ZVkobWF0LCBtYXQsIDAuOCk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lLnJvb3QuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZTogaW5zdGFuY2UuZ3JhcGhpY3MuZ2wuVFJJQU5HTEVTLFxyXG4gICAgICAgICAgICBtZXNoOiBHTC5NZXNoLmN1YmUoKSxcclxuICAgICAgICAgICAgbW9kZWw6IG1hdCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbnN0YW5jZS5zY2VuZS5yb290LmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdsaWd0aCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiBbMSwgMSwgMV0sXHJcbiAgICAgICAgICAgIGludGVuc2l0eTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydncmFwaGljcyddKTtcclxufSkoKSk7XHJcbiJdfQ==
