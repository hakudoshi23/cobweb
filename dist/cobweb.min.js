!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}window.extend=function(e,t){for(var n in t)if(n&&t.hasOwnProperty(n)){var r=t[n];"object"==typeof r?extend(e[n],t[n]):e[n]=t[n]}},e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t})}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};window.TreeNode=e,e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},e.extend=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1),this.instance.logger.debug(e,arguments);for(var n=0;n<t.length;n++)t[n].apply(null,arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(){},t=function(t,n){this.debug=n?console.debug.bind():e,this.info=n?console.info.bind():e,this.warn=console.warn.bind(),this.error=console.error.bind()};window.Logger=t}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=e,extend(this.options,n||{}),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this,!0),this.events=new EventHandler(this),t.prototype.modules.load(this),this.events.trigger("app.loaded")};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var a in t)0===t[a].dependencies.length&&r.push(a);for(;r.length>0;){var i=r[0];if(r.splice(0,1),t[i]){var s=t[i];o.push(i);for(var c=0;c<s.dependant.length;c++){var u=s.dependant[c];n(o,t[u])&&r.push(u)}}else e.events.trigger("modules.error.missing",i),e.logger.warning("Missing module '"+i+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){n=n||[],this.all[e]={dependencies:n,init:t}},load:function(n){this.instance=n,e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var a=r[o];try{this.all[a].init(n),n.events.trigger("modules.loaded",a)}catch(e){n.logger.error("Loading module "+a,e),n.events.trigger("modules.error",a,e)}}n.events.trigger("modules.loaded.all",r)},print:function(e){if(e)for(var t in this.all){var n=this.all[t];e.logger.debug("Name: ",t),e.logger.debug("\tDependencies: ",n.dependencies),e.logger.debug("\tDependant: ",n.dependant)}else console.error('Error: "load" should be called before "print"')}}}(),function(){"use strict";function e(e,n){var r=t();e.append(r)}function t(){var e=document.createElement("div");return e.className="pane-header",e}Cobweb.prototype.modules.add("pane-header",function(t){t.events.on("pane.create",function(n){e(n,t)})},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){if(this.types.has(n)){var r=this.types.get(n);r.onPaneType(t,e);var o=t.querySelector(".pane-header");r.onCreateHeader(o,e),t.attrData("pane-type",n)}}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t){e.events.trigger("pane.create",t)}function n(t,n){e.events.trigger("pane.split",t,n)}function r(t){e.events.trigger("pane.resize",t)}e.events.on("app.loaded",function(){e.pane.internal=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneCreate:t,onPaneSplit:n,onPaneResize:r}})}),e.pane={}})}(),function(){"use strict";Cobweb.prototype.modules.add("interaction-mode",function(e){e.surface.interaction={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["surface"])}(),function(){"use strict";function e(e,t){var o=document.createElement("canvas");o.id="surface"+r++,o.className="surface",e.append(o),t.surface.data=t.surface.data||{},t.surface.data[o.id]={},t.surface.data[o.id].surface={proj:mat4.create(),center:[0,0,0],rotation:[0,-.4],distance:5,getView:function(e){var t=[0,1,0],n=[0,0,-this.distance];vec3.rotateX(n,n,this.rotation[1]),vec3.rotateY(n,n,-this.rotation[0]),vec3.add(n,n,this.center),mat4.lookAt(e,n,this.center,t)}},n(t,e),t.events.trigger("surface.create",o)}function t(e,t){var n=document.createElement("label");n.innerHTML="Surface Pane",e.appendChild(n)}function n(e,t){var n=t.querySelector("canvas"),r=n.getContext("2d"),o=e.surface.data[n.id],a=t.querySelector(".pane-header"),i=a?a.height():0,s=t.width(),c=t.height()-i;o.imgData=r.createImageData(s,c),o.buffer=new Uint8Array(s*c*4),n.height=c,n.width=s,mat4.perspective(o.surface.proj,45*DEG2RAD,s/c,.1,1e3)}var r=0;Cobweb.prototype.modules.add("surface",function(r){r.pane.types.add("surface",{onPaneType:e,onCreateHeader:t}),r.events.on("pane.resize",function(e){"surface"===e.attrData("pane-type")&&n(r,e)}),window.addEventListener("resize",function(e){for(var t=r.pane.internal.container.querySelectorAll(".pane canvas"),o=0;o<t.length;o++)n(r,t[o].parentNode)}),r.events.on("pane.create",function(e){r.pane.setType(e,"surface")}),r.surface={}},["pane-types"])}(),function(){"use strict";function e(e,t,n){t&&(e[0]=t[0]+.005*n[0],e[1]=t[1]+.005*n[1])}function t(e,t){return e?[e[0]-t[0],e[1]-t[1]]:[0,0]}var n=null,r=null;Cobweb.prototype.modules.add("common-interaction",function(o){o.surface.interaction.add("common",{onMouseMove:function(a,i){if(a.target.dataset.moving){var s=a.target,c=o.surface.data[s.id];if(c){var u=t(r,i);e(c.surface.rotation,n,u)}}return!1},onMouseDown:function(e,t){e.target.dataset.moving="true";var a=e.target,i=o.surface.data[a.id];return n=i.surface.rotation.slice(),r=t,!0},onMouseUp:function(a,i){delete a.target.dataset.moving;var s=a.target,c=o.surface.data[s.id],u=t(r,i);return e(c.surface.rotation,n,u),r=null,!0},onClick:function(e,t){return!0}})},["surface-interaction"])}(),function(){"use strict";Cobweb.prototype.modules.add("object-interaction",function(e){e.surface.interaction.add("object",{onMouseMove:function(e,t){return!0},onMouseDown:function(t,n){return e.logger.debug("onMouseDown",t),!0},onMouseUp:function(t,n){return e.logger.debug("onMouseUp",t),!0},onClick:function(t,n){return e.logger.debug("onClick",t),!0}}),e.events.on("surface.create",function(t){e.surface.setInteraction(t,"object")})},["surface-interaction"])}(),function(){"use strict";function e(e,n){var r=t(n);switch(n.type){case"mousemove":return e.onMouseMove(n,r);case"mousedown":return e.onMouseDown(n,r);case"mouseup":return e.onMouseUp(n,r);case"click":return e.onClick(n,r)}}function t(e){var t;return t=e.pageX||e.pageY?[e.pageX,e.pageY]:[e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop],t[0]-=e.target.offsetLeft,t[1]-=e.target.offsetTop,t}Cobweb.prototype.modules.add("surface-interaction",function(t){function n(n){var r=t.surface.getInteraction(n.target),o=e(r,n);if(o){var a=t.surface.interaction.get("common");e(a,n)}}t.surface.setInteraction=function(e,n){var r=t.surface.interaction;r.has(n)&&e.attrData("surface-interaction",n)},t.surface.getInteraction=function(e){var n=t.surface.interaction,r=e.attrData("surface-interaction");return n.get(r)},t.events.on("surface.create",function(e){e.onmousemove=n,e.onmousedown=n,e.onmouseup=n,e.onclick=n}),t.events.on("pane.split",function(e,t){t.attrData("surface-interaction",e.attrData("surface-interaction"))})},["interaction-mode","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  gl_FragColor = u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[1,1,1,1],u_lightvector:vec3.normalize(vec3.create(),[1,-5,-3]),u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(a){for(var i=e.scene.root.dfs(),s=0;s<i.length;s++){var c=i[s].data;a.getView(n),mat4.multiply(n,n,c.model),mat4.multiply(r,a.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive)}}),e.events.on("surface.create",function(t){e.surface.setRender(t,"solid")})},["surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.surface.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("render",n)},e.surface.getRender=function(t){var n=e.graphics.renders,r=t.attrData("render");return n.get(r)};for(var t=document.querySelectorAll(".pane"),n=0;n<t.length;n++)if("surface"==t[n].dataset.paneType){var r=t[n].querySelector("canvas");r.dataset.render="solid"}e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=e.surface.data[t.id],r=e.graphics.gl,o=t.clientWidth,a=t.clientHeight;r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.viewport(0,0,o,a);var i=e.surface.getRender(t);i&&i(n.surface);var s=t.getContext("2d");s&&(r.readPixels(0,0,o,a,r.RGBA,r.UNSIGNED_BYTE,n.buffer),n.imgData.data.set(n.buffer),s.putImageData(n.imgData,0,0))}var t=function(t){this.instance=t,this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.349,.349,.349,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e)})}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){e.scene={root:TreeNode.extend({})};var t=mat4.create();mat4.rotateY(t,t,.8),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,mesh:GL.Mesh.cube(),model:t})},["graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsInRyZWUuanMiLCJldmVudHMuanMiLCJsb2dnZXIuanMiLCJjb2J3ZWIuanMiLCJtb2R1bGVzLmpzIiwicGFuZS9wYW5lLWhlYWRlci5qcyIsInBhbmUvcGFuZS10eXBlcy5qcyIsInBhbmUvcGFuZXMuanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24tbW9kZXMuanMiLCJwYW5lL3N1cmZhY2Uvc3VyZmFjZS5qcyIsInBhbmUvc3VyZmFjZS9pbnRlcmFjdGlvbi9jb21tb24taW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24vb2JqZWN0LWludGVyYWN0aW9uLmpzIiwicGFuZS9zdXJmYWNlL2ludGVyYWN0aW9uL3N1cmZhY2UtaW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvcmVuZGVyL3JlbmRlci1zb2xpZC5qcyIsInBhbmUvc3VyZmFjZS9yZW5kZXIvc3VyZmFjZS1yZW5kZXIuanMiLCJncmFwaGljLXJlbmRlci5qcyIsImdyYXBoaWMuanMiLCJzY2VuZS5qcyJdLCJuYW1lcyI6WyJzYWZlRXh0ZW5kIiwicHJvdG90eXBlIiwicHJvcGVydHkiLCJ2YWx1ZSIsIkFycmF5IiwiYSIsInRoaXMiLCJjb25jYXQiLCJpIiwibGVuZ3RoIiwiaiIsInNwbGljZSIsImNhbGxiYWNrIiwiczQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkhUTUxFbGVtZW50Iiwib2xkQ2xhc3NOYW1lcyIsIm5ld0NsYXNzTmFtZXMiLCJhcmd1bWVudHMiLCJjbGFzc05hbWUiLCJ0cmltIiwicmVwbGFjZSIsInNwbGl0IiwidW5pcXVlIiwiam9pbiIsInF1ZXJ5Q2xhc3NOYW1lcyIsImN1cnJlbnRDbGFzc05hbWVzIiwiaW5kZXgiLCJuYW1lIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzTmFtZXMiLCJyZW1vdmVFYWNoIiwiZm9yRWFjaCIsImF0dHIiLCJ3aW5kb3ciLCJfX2RhdGFfY2FjaGUiLCJXZWFrTWFwIiwiZWxBdHRycyIsImdldCIsInVuZGVmaW5lZCIsInNldCIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJFbGVtZW50IiwibWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsIm1hdGNoZXMiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInF1ZXJ5IiwicGFyZW50RWxlbWVudCIsImN1cnJlbnQiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsImhlaWdodCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJndWlkIiwib3ZlcmxhcCIsInF1ZXJ5U2VsZWN0b3IiLCJleHRlbmQiLCJkZWZhdWx0cyIsInByb3BlcnRpZXMiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsIm9iaiIsIm5ld09iaiIsImNsb25lIiwiVHJlZU5vZGUiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImlzUm9vdCIsImFkZCIsImNoaWxkIiwiY29uc3RydWN0b3IiLCJwdXNoIiwicmVtb3ZlIiwic2xpY2UiLCJkZnMiLCJjaGVjayIsIm91dCIsImJmcyIsIl9UcmVlTm9kZSIsImNhbGwiLCJjcmVhdGUiLCJFdmVudEhhbmRsZXIiLCJpbnN0YW5jZSIsImxpc3RlbmVycyIsInRyaWdnZXIiLCJsb2dnZXIiLCJkZWJ1ZyIsImFwcGx5Iiwib24iLCJvZmYiLCJhcnJheSIsImVtcHR5RnVuY3Rpb24iLCJMb2dnZXIiLCJpc0RlYnVnIiwiY29uc29sZSIsImJpbmQiLCJpbmZvIiwid2FybiIsImVycm9yIiwiZGVmYXVsdE9wdGlvbnMiLCJjb250YWluZXIiLCJzZWxlY3RvciIsIkNvYndlYiIsIm9wdGlvbnMiLCJFcnJvciIsImFkZENsYXNzIiwiZXZlbnRzIiwibW9kdWxlcyIsImxvYWQiLCJhZGRSZXZlcnNlRGVwZW5kZW5jaWVzIiwibW9kdWxlIiwiZGVwZW5kYW50IiwiZGVwZW5kZW5jaWVzIiwiZGVwUGx1Z2luIiwidG9wb2xvZ2ljYWxTb3J0IiwiY2FuZGlkYXRlcyIsInNvcnRlZE5hbWVzIiwibmV4dE5hbWUiLCJkZXBOYW1lIiwiYWxsRGVwZW5kZW5jaWVzTWV0Iiwid2FybmluZyIsImtleXMiLCJsb2FkZWRVbnRpbE5vdyIsImFsbCIsImluaXQiLCJleCIsInByaW50Iiwib25DcmVhdGVDYWxsYmFjayIsInBhbmUiLCJoZWFkZXIiLCJjcmVhdGVIZWFkZXIiLCJhcHBlbmQiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwicGFuZVR5cGVzIiwiY2FsbGJhY2tzIiwiaGFzIiwib2xkUGFuZSIsIm5ld1BhbmUiLCJvbGRUeXBlIiwiYXR0ckRhdGEiLCJzZXRUeXBlIiwidHlwZXMiLCJ0eXBlQ2FsbGJhY2tzIiwib25QYW5lVHlwZSIsInBhbmVIZWFkZXIiLCJvbkNyZWF0ZUhlYWRlciIsIm9uUGFuZUNyZWF0ZSIsIm9uUGFuZVNwbGl0Iiwib3JpZ2luIiwib25QYW5lUmVzaXplIiwiaW50ZXJuYWwiLCJQYW5lIiwic2VwYXJhdG9yIiwic2l6ZSIsInN1cmZhY2UiLCJpbnRlcmFjdGlvbiIsIm9uU3VyZmFjZVBhbmVUeXBlIiwiY2FudmFzIiwiaWQiLCJzdXJmYWNlSW5kZXgiLCJwcm9qIiwibWF0NCIsImNlbnRlciIsInJvdGF0aW9uIiwiZGlzdGFuY2UiLCJnZXRWaWV3IiwidmlldyIsInVwIiwiZXllIiwidmVjMyIsInJvdGF0ZVgiLCJyb3RhdGVZIiwibG9va0F0IiwidXBkYXRlQ2FudmFzU2l6ZSIsIm9uQ3JlYXRlU3VyZmFjZUhlYWRlciIsImxhYmVsIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImhlYWRlckhlaWdodCIsImltZ0RhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJidWZmZXIiLCJVaW50OEFycmF5IiwicGVyc3BlY3RpdmUiLCJERUcyUkFEIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic3VyZmFjZXMiLCJwYXJlbnROb2RlIiwiY29tYmluZSIsInRhcmdldCIsIm9yaWdpbmFsUm90YXRpb24iLCJkZWx0YSIsImdldENvb3Jkc0RlbHRhIiwiaW5pdGlhbCIsIm1vdXNlRG93bkNvb3JkcyIsIm9uTW91c2VNb3ZlIiwicmVhbENvb3JkcyIsImRhdGFzZXQiLCJtb3ZpbmciLCJvbk1vdXNlRG93biIsIm9uTW91c2VVcCIsIm9uQ2xpY2siLCJzZXRJbnRlcmFjdGlvbiIsInJ1bkNhbGxiYWNrIiwiZ2V0TG9jYWxDb29yZGluYXRlcyIsInR5cGUiLCJjb29yZGluYXRlcyIsInBhZ2VYIiwicGFnZVkiLCJjbGllbnRYIiwiYm9keSIsInNjcm9sbExlZnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRZIiwic2Nyb2xsVG9wIiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9uU3VyZmFjZUV2ZW50IiwiZ2V0SW50ZXJhY3Rpb24iLCJrZWVwUnVubmluZyIsImNvbW1vbiIsImludGVyYWN0aW9ucyIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZWRvd24iLCJvbm1vdXNldXAiLCJvbmNsaWNrIiwic2hhZGVyIiwiU2hhZGVyIiwidGVtcCIsIm12cCIsInVuaWZvcm1zIiwidV9jb2xvciIsInVfbGlnaHR2ZWN0b3IiLCJub3JtYWxpemUiLCJ1X21vZGVsIiwidV9tdnAiLCJncmFwaGljcyIsInJlbmRlcnMiLCJvYmpzIiwic2NlbmUiLCJyb290IiwibXVsdGlwbHkiLCJtb2RlbCIsImRyYXciLCJtZXNoIiwicHJpbWl0aXZlIiwic2V0UmVuZGVyIiwiZ2V0UmVuZGVyIiwicGFuZXMiLCJwYW5lVHlwZSIsInJlbmRlciIsImRyYXdSZW5kZXJUYXJnZXQiLCJnbCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJ2aWV3cG9ydCIsInJlYWRQaXhlbHMiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInB1dEltYWdlRGF0YSIsIkdyYXBoaWNzIiwiR0wiLCJzY3JlZW4iLCJhbmltYXRlIiwib25kcmF3IiwicmVuZGVyVGFyZ2V0cyIsImNsZWFyQ29sb3IiLCJlbmFibGUiLCJERVBUSF9URVNUIiwibWF0IiwiVFJJQU5HTEVTIiwiTWVzaCIsImN1YmUiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFlQSxTQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBQyxLQUFBRCxFQUFBQyxHQUFBQyxHQWRBSCxFQUFBSSxNQUFBSCxVQUFBLFNBQUEsV0FFQSxJQUFBLEdBREFJLEdBQUFDLEtBQUFDLFNBQ0FDLEVBQUEsRUFBQUEsRUFBQUgsRUFBQUksU0FBQUQsRUFDQSxJQUFBLEdBQUFFLEdBQUFGLEVBQUEsRUFBQUUsRUFBQUwsRUFBQUksU0FBQUMsRUFDQUwsRUFBQUcsS0FBQUgsRUFBQUssSUFBQUwsRUFBQU0sT0FBQUQsSUFBQSxFQUNBLE9BQUFMLEtBR0FMLEVBQUFJLE1BQUFILFVBQUEsVUFBQSxTQUFBVyxHQUNBLElBQUEsR0FBQUosR0FBQSxFQUFBQSxFQUFBRixLQUFBRyxPQUFBRCxJQUNBSSxFQUFBTixLQUFBRSxHQUFBQSxFQUFBRixXQ2JBLFdBQ0EsWUFrSUEsU0FBQU4sR0FBQUMsRUFBQUMsRUFBQUMsR0FDQUYsRUFBQUMsS0FBQUQsRUFBQUMsR0FBQUMsR0FHQSxRQUFBVSxLQUNBLE1BQUFDLE1BQUFDLE1BQUEsT0FBQSxFQUFBRCxLQUFBRSxXQUNBQyxTQUFBLElBQUFDLFVBQUEsR0F0SUFsQixFQUFBbUIsWUFBQWxCLFVBQUEsV0FBQSxXQUNBLEdBQUFtQixHQUFBQyxDQUNBLEtBQUEsR0FBQWIsS0FBQWMsV0FDQUYsRUFBQWQsS0FBQWlCLFVBQUFqQixLQUFBaUIsVUFBQUMsT0FBQUMsUUFBQSxPQUFBLEtBQUFDLE1BQUEsUUFDQUwsRUFBQUMsVUFBQWQsR0FBQWMsVUFBQWQsR0FBQWdCLE9BQUFDLFFBQUEsT0FBQSxLQUFBQyxNQUFBLFFBQ0FwQixL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S0FBQUQsSUFBQUMsRUFBQTJKLFFBQ0FMLEVBQUFxRixhQUFBM08sRUFBQXlKLFFBQUEsRUFBQSxJQW5DQSxHQUFBbUYsR0FBQSxTQUFBdkwsR0FDQTVGLEtBQUE0RixTQUFBQSxFQUNBNUYsS0FBQTBRLEdBQUFVLEdBQUExTCxRQUNBOUIsT0FBQXlOLE9BQUF6TixPQUNBRSxNQUFBdU4sT0FBQXZOLFFBRUE5RCxLQUFBMFEsR0FBQVksVUFDQXRSLEtBQUEwUSxHQUFBYSxPQUFBLFdBRUEsSUFBQSxHQURBQyxHQUFBck8sU0FBQUUsaUJBQUEsVUFDQW5ELEVBQUEsRUFBQUEsRUFBQXNSLEVBQUFyUixPQUFBRCxJQUNBdVEsRUFBQTdLLEVBQUE0TCxFQUFBdFIsS0FFQUYsS0FBQTBRLEdBQUFlLFdBQUEsS0FBQSxLQUFBLEtBQUEsR0FDQXpSLEtBQUEwUSxHQUFBZ0IsT0FBQTFSLEtBQUEwUSxHQUFBaUIsWUFHQTNLLFFBQUFySCxVQUFBMEgsUUFBQXZDLElBQUEsV0FBQSxTQUFBYyxHQUNBQSxFQUFBOEosU0FBQSxHQUFBeUIsR0FBQXZMLFFDcEJBLFdBQ0EsWUFFQW9CLFFBQUFySCxVQUFBMEgsUUFBQXZDLElBQUEsUUFBQSxTQUFBYyxHQUNBQSxFQUFBaUssT0FDQUMsS0FBQXBMLFNBQUFSLFdBR0EsSUFBQTBOLEdBQUFoSCxLQUFBbEYsUUFDQWtGLE1BQUFVLFFBQUFzRyxFQUFBQSxFQUFBLElBRUFoTSxFQUFBaUssTUFBQUMsS0FBQWhMLEtBQ0E2SSxLQUFBLFNBQ0F3QyxVQUFBdkssRUFBQThKLFNBQUFnQixHQUFBbUIsVUFDQTNCLEtBQUFrQixHQUFBVSxLQUFBQyxPQUNBL0IsTUFBQTRCLE1BRUEiLCJmaWxlIjoiY29id2ViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEFycmF5LnByb3RvdHlwZSwgJ3VuaXF1ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBhID0gdGhpcy5jb25jYXQoKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKVxyXG4gICAgICAgICAgICAgICAgaWYoYVtpXSA9PT0gYVtqXSkgYS5zcGxpY2Uoai0tLCAxKTtcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAnZm9yRWFjaCcsIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzW2ldLCBpLCB0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYWRkQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9sZENsYXNzTmFtZXMsIG5ld0NsYXNzTmFtZXM7XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIG9sZENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgbmV3Q2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gb2xkQ2xhc3NOYW1lcy5jb25jYXQobmV3Q2xhc3NOYW1lcykudW5pcXVlKCkuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnaGFzQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5Q2xhc3NOYW1lcywgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgcXVlcnlDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHF1ZXJ5Q2xhc3NOYW1lcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcXVlcnlDbGFzc05hbWVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2xhc3NOYW1lcy5pbmRleE9mKG5hbWUpID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncmVtb3ZlQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gMCwgY3VycmVudENsYXNzTmFtZXMsIHJlbW92ZUNsYXNzTmFtZXM7XHJcbiAgICAgICAgdmFyIHJlbW92ZUVhY2ggPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzc05hbWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzTmFtZXMuZm9yRWFjaChyZW1vdmVFYWNoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjdXJyZW50Q2xhc3NOYW1lcy51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdkYXRhJywgZnVuY3Rpb24gKGF0dHIsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cuX19kYXRhX2NhY2hlKSB3aW5kb3cuX19kYXRhX2NhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuICAgICAgICB2YXIgZWxBdHRycyA9IHdpbmRvdy5fX2RhdGFfY2FjaGUuZ2V0KHRoaXMpIHx8IHt9O1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGVsQXR0cnNbYXR0cl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZWxBdHRycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGF0dHIpIHJldHVybiBlbEF0dHJzICYmIGVsQXR0cnNbYXR0cl07XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGVsQXR0cnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdzZXREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHdpbmRvdy5fX2RhdGFfY2FjaGUuc2V0KHRoaXMsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhdHRyJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHJEYXRhJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cignZGF0YS0nICsgbmFtZSwgdmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChFbGVtZW50LnByb3RvdHlwZSwgJ21hdGNoZXMnLFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSAodGhpcy5kb2N1bWVudCB8fCB0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksXHJcbiAgICAgICAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCAmJiBtYXRjaGVzLml0ZW0oaSkgIT09IHRoaXMpIHt9XHJcbiAgICAgICAgICAgIHJldHVybiBpID4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3BhcmVudCcsIGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIGlmICghcXVlcnkpIHJldHVybiB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKCFjdXJyZW50Lm1hdGNoZXMocXVlcnkpKVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoZWlnaHQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZSArICdweCc7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudEhlaWdodDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnd2lkdGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRXaWR0aDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQod2luZG93LCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ0dVSUQtJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ3VpZCA9IG51bGwsIG92ZXJsYXAgPSBudWxsO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgZ3VpZCA9IHdpbmRvdy5ndWlkKCk7XHJcbiAgICAgICAgICAgIG92ZXJsYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGd1aWQpO1xyXG4gICAgICAgIH0gd2hpbGUob3ZlcmxhcCk7XHJcbiAgICAgICAgdGhpcy5hdHRyKCdpZCcsIGd1aWQpO1xyXG4gICAgICAgIHJldHVybiBndWlkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgIC50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHdpbmRvdy5leHRlbmQgPSBmdW5jdGlvbiAoZGVmYXVsdHMsIHByb3BlcnRpZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKVxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHByb3BlcnRpZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kKGRlZmF1bHRzW3Byb3BlcnR5XSwgcHJvcGVydGllc1twcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRzW3Byb3BlcnR5XSA9IHByb3BlcnRpZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHNhZmVFeHRlbmQoT2JqZWN0LCAnY2xvbmUnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIG5ld09iaiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iailcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBuZXdPYmpbcHJvcGVydHldID0gT2JqZWN0LmNsb25lKG9ialtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBvYmpbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFRyZWVOb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEgfHwge307XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuVHJlZU5vZGUgPSBUcmVlTm9kZTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuaXNSb290ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5wYXJlbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMsIGRhdGEpO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5zbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5kZnMgPSBmdW5jdGlvbiAoY2hlY2spIHtcclxuICAgICAgICB2YXIgb3V0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghY2hlY2sgfHwgKGNoZWNrICYmIGNoZWNrKHRoaXMuY2hpbGRyZW5baV0pKSlcclxuICAgICAgICAgICAgICAgIG91dC5wdXNoKHRoaXMuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgICAgICBvdXQuY29uY2F0KHRoaXMuY2hpbGRyZW5baV0uZGZzKGNoZWNrKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5iZnMgPSBmdW5jdGlvbiAoY2hlY2spIHtcclxuICAgICAgICB2YXIgb3V0ID0gW10sIGk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICghY2hlY2sgfHwgKGNoZWNrICYmIGNoZWNrKHRoaXMuY2hpbGRyZW5baV0pKSlcclxuICAgICAgICAgICAgICAgIG91dC5wdXNoKHRoaXMuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBvdXQuY29uY2F0KHRoaXMuY2hpbGRyZW5baV0uYmZzKGNoZWNrKSk7XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUuZXh0ZW5kID0gZnVuY3Rpb24gKGRlZmF1bHRzKSB7XHJcbiAgICAgICAgdmFyIF9UcmVlTm9kZSA9IGZ1bmN0aW9uIChwYXJlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgVHJlZU5vZGUuY2FsbCh0aGlzLCBwYXJlbnQsIGRhdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX1RyZWVOb2RlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVHJlZU5vZGUucHJvdG90eXBlKTtcclxuICAgICAgICBfVHJlZU5vZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gX1RyZWVOb2RlO1xyXG4gICAgICAgIGV4dGVuZChfVHJlZU5vZGUucHJvdG90eXBlLCBkZWZhdWx0cyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfVHJlZU5vZGUobnVsbCk7XHJcbiAgICB9O1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBuYW1lID0gYXJndW1lbnRzWzBdO1xyXG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tuYW1lXSB8fCBbXTtcclxuICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmxvZ2dlci5kZWJ1ZyhuYW1lLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tuYW1lXSkgdGhpcy5saXN0ZW5lcnNbbmFtZV0gPSBbXTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW25hbWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW25hbWVdKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJheSA9IHRoaXMubGlzdGVuZXJzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoYXJyYXkuaW5kZXhPZihjYWxsYmFjaykgPiAtMSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5FdmVudEhhbmRsZXIgPSBFdmVudEhhbmRsZXI7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGVtcHR5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7fTtcclxuXHJcbiAgICB2YXIgTG9nZ2VyID0gZnVuY3Rpb24gKGluc3RhbmNlLCBpc0RlYnVnKSB7XHJcbiAgICAgICAgdGhpcy5kZWJ1ZyA9IGlzRGVidWcgPyBjb25zb2xlLmRlYnVnLmJpbmQoKSA6IGVtcHR5RnVuY3Rpb247XHJcblxyXG4gICAgICAgIHRoaXMuaW5mbyA9IGlzRGVidWcgPyBjb25zb2xlLmluZm8uYmluZCgpIDogZW1wdHlGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy53YXJuID0gY29uc29sZS53YXJuLmJpbmQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuTG9nZ2VyID0gTG9nZ2VyO1xyXG59KSgpKTtcclxuIiwiKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgIGNvbnRhaW5lcjoge1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogJyNjb2J3ZWInLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdjYi1jb250YWluZXInXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgQ29id2ViID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcclxuICAgICAgICBleHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb250YWluZXIgc2VsZWN0b3I6IFxcJycgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvciArICdcXCcnKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY29udGFpbmVyLmNsYXNzTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGF0YSgnaW5zdGFuY2UnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKHRoaXMsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcih0aGlzKTtcclxuICAgICAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMubG9hZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdhcHAubG9hZGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5Db2J3ZWIgPSBDb2J3ZWI7XHJcbn0oKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcyA9IHtcclxuICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGluaXQsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMgfHwgW107XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IHtcclxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczogZGVwZW5kZW5jaWVzLFxyXG4gICAgICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgYWRkUmV2ZXJzZURlcGVuZGVuY2llcyh0aGlzLmFsbCk7XHJcbiAgICAgICAgICAgIHZhciBzb3J0ZWROYW1lcyA9IHRvcG9sb2dpY2FsU29ydChpbnN0YW5jZSwgdGhpcy5hbGwpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvcnRlZE5hbWVzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBzb3J0ZWROYW1lc1tpXTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0uaW5pdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMubG9hZGVkJywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5lcnJvcignTG9hZGluZyBtb2R1bGUgJyArIG5hbWUsIGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5lcnJvcicsIG5hbWUsIGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5sb2FkZWQuYWxsJywgc29ydGVkTmFtZXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJpbnQ6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5hbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kdWxlID0gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdOYW1lOiAnLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ1xcdERlcGVuZGVuY2llczogJywgbW9kdWxlLmRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdcXHREZXBlbmRhbnQ6ICcsIG1vZHVsZS5kZXBlbmRhbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6IFwibG9hZFwiIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIFwicHJpbnRcIicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRSZXZlcnNlRGVwZW5kZW5jaWVzIChtb2R1bGVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBtb2R1bGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoIW1vZHVsZS5kZXBlbmRhbnQpIG1vZHVsZS5kZXBlbmRhbnQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcFBsdWdpbiA9IG1vZHVsZXNbbW9kdWxlLmRlcGVuZGVuY2llc1tpXV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXBQbHVnaW4uZGVwZW5kYW50KSBkZXBQbHVnaW4uZGVwZW5kYW50ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwUGx1Z2luLmRlcGVuZGFudC5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvcG9sb2dpY2FsU29ydCAoaW5zdGFuY2UsIG1vZHVsZXMpIHtcclxuICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IFtdLCBzb3J0ZWROYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbW9kdWxlcylcclxuICAgICAgICAgICAgaWYgKG1vZHVsZXNbbmFtZV0uZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChuYW1lKTtcclxuICAgICAgICB3aGlsZSAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0TmFtZSA9IGNhbmRpZGF0ZXNbMF07XHJcbiAgICAgICAgICAgIGNhbmRpZGF0ZXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICBpZiAobW9kdWxlc1tuZXh0TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVzW25leHROYW1lXTtcclxuICAgICAgICAgICAgICAgIHNvcnRlZE5hbWVzLnB1c2gobmV4dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUuZGVwZW5kYW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcE5hbWUgPSBtb2R1bGUuZGVwZW5kYW50W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxEZXBlbmRlbmNpZXNNZXQoc29ydGVkTmFtZXMsIG1vZHVsZXNbZGVwTmFtZV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goZGVwTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5lcnJvci5taXNzaW5nJywgbmV4dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLndhcm5pbmcoJ01pc3NpbmcgbW9kdWxlIFxcJycgKyBuZXh0TmFtZSArICdcXCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMobW9kdWxlcykubGVuZ3RoICE9PSBzb3J0ZWROYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3IuY3ljbGUnKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmVycm9yKCdEZXBlbmRlbmN5IGN5Y2xlIGZvdW5kIGluIG1vZHVsZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNvcnRlZE5hbWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFsbERlcGVuZGVuY2llc01ldCAobG9hZGVkVW50aWxOb3csIG1vZHVsZSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKGxvYWRlZFVudGlsTm93LmluZGV4T2YobW9kdWxlLmRlcGVuZGVuY2llc1tpXSkgPT09IC0xKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lLWhlYWRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5jcmVhdGUnLCBmdW5jdGlvbiAocGFuZSkge1xyXG4gICAgICAgICAgICBvbkNyZWF0ZUNhbGxiYWNrKHBhbmUsIGluc3RhbmNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsncGFuZS10eXBlcyddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvbkNyZWF0ZUNhbGxiYWNrIChwYW5lLCBpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBoZWFkZXIgPSBjcmVhdGVIZWFkZXIoKTtcclxuICAgICAgICBwYW5lLmFwcGVuZChoZWFkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhlYWRlciAoKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAncGFuZS1oZWFkZXInO1xyXG4gICAgICAgIHJldHVybiBkaXY7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lLXR5cGVzJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIHBhbmVUeXBlcyA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnNwbGl0JywgZnVuY3Rpb24gKG9sZFBhbmUsIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFR5cGUgPSBvbGRQYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnKTtcclxuICAgICAgICAgICAgaWYgKG9sZFR5cGUpIGluc3RhbmNlLnBhbmUuc2V0VHlwZShuZXdQYW5lLCBvbGRUeXBlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS50eXBlcyA9IHBhbmVUeXBlcztcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRUeXBlID0gZnVuY3Rpb24gKHBhbmUsIG5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHlwZXMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZUNhbGxiYWNrcyA9IHRoaXMudHlwZXMuZ2V0KG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdHlwZUNhbGxiYWNrcy5vblBhbmVUeXBlKHBhbmUsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYW5lSGVhZGVyID0gcGFuZS5xdWVyeVNlbGVjdG9yKCcucGFuZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgICAgIHR5cGVDYWxsYmFja3Mub25DcmVhdGVIZWFkZXIocGFuZUhlYWRlciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgcGFuZS5hdHRyRGF0YSgncGFuZS10eXBlJywgbmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgWydwYW5lJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignYXBwLmxvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5pbnRlcm5hbCA9IG5ldyBQYW5lKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogaW5zdGFuY2Uub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IsXHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiAzXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25QYW5lQ3JlYXRlOiBvblBhbmVDcmVhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYW5lU3BsaXQ6IG9uUGFuZVNwbGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFuZVJlc2l6ZTogb25QYW5lUmVzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vb25QYW5lTWVyZ2U6IG9uUGFuZU1lcmdlLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vb25QYW5lRGVzdHJveTogb25QYW5lRGVzdHJveSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUgPSB7fTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lQ3JlYXRlIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwYW5lLmNyZWF0ZScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lU3BsaXQgKG9yaWdpbiwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5zcGxpdCcsIG9yaWdpbiwgbmV3UGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVSZXNpemUgKHBhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUucmVzaXplJywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVNZXJnZSAobWVyZ2VyLCB0b1JlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVNZXJnZScsIG1lcmdlciwgdG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lRGVzdHJveSAocGFuZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVEZXN0cm95JywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdpbnRlcmFjdGlvbi1tb2RlJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbiA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFsnc3VyZmFjZSddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBzdXJmYWNlSW5kZXggPSAwO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3N1cmZhY2UnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzLmFkZCgnc3VyZmFjZScsIHtcclxuICAgICAgICAgICAgb25QYW5lVHlwZTogb25TdXJmYWNlUGFuZVR5cGUsXHJcbiAgICAgICAgICAgIG9uQ3JlYXRlSGVhZGVyOiBvbkNyZWF0ZVN1cmZhY2VIZWFkZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnJlc2l6ZScsIGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGlmIChwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnKSA9PT0gJ3N1cmZhY2UnKVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZShpbnN0YW5jZSwgcGFuZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHN1cmZhY2VzID0gaW5zdGFuY2UucGFuZS5pbnRlcm5hbC5jb250YWluZXJcclxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZSBjYW52YXMnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdXJmYWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZShpbnN0YW5jZSwgc3VyZmFjZXNbaV0ucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLmNyZWF0ZScsIGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuc2V0VHlwZShwYW5lLCAnc3VyZmFjZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlID0ge307XHJcbiAgICB9LCBbJ3BhbmUtdHlwZXMnXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gb25TdXJmYWNlUGFuZVR5cGUgKHBhbmUsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIGNhbnZhcy5pZCA9ICdzdXJmYWNlJyArIChzdXJmYWNlSW5kZXgrKyk7XHJcbiAgICAgICAgY2FudmFzLmNsYXNzTmFtZSA9ICdzdXJmYWNlJztcclxuICAgICAgICBwYW5lLmFwcGVuZChjYW52YXMpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLmRhdGEgfHwge307XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF0gPSB7fTtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXS5zdXJmYWNlID0ge1xyXG4gICAgICAgICAgICBwcm9qOiBtYXQ0LmNyZWF0ZSgpLFxyXG4gICAgICAgICAgICBjZW50ZXI6IFswLCAwLCAwXSxcclxuICAgICAgICAgICAgcm90YXRpb246IFswLCAtMC40XSxcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDUsXHJcbiAgICAgICAgICAgIGdldFZpZXc6IGZ1bmN0aW9uICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXAgPSBbMCwgMSwgMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgZXllID0gWzAsIDAsIC10aGlzLmRpc3RhbmNlXTtcclxuICAgICAgICAgICAgICAgIHZlYzMucm90YXRlWChleWUsIGV5ZSwgdGhpcy5yb3RhdGlvblsxXSk7XHJcbiAgICAgICAgICAgICAgICB2ZWMzLnJvdGF0ZVkoZXllLCBleWUsIC10aGlzLnJvdGF0aW9uWzBdKTtcclxuICAgICAgICAgICAgICAgIHZlYzMuYWRkKGV5ZSwgZXllLCB0aGlzLmNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBtYXQ0Lmxvb2tBdCh2aWV3LCBleWUsIHRoaXMuY2VudGVyLCB1cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB1cGRhdGVDYW52YXNTaXplKGluc3RhbmNlLCBwYW5lKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3N1cmZhY2UuY3JlYXRlJywgY2FudmFzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkNyZWF0ZVN1cmZhY2VIZWFkZXIgKGhlYWRlciwgaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgIGxhYmVsLmlubmVySFRNTCA9ICdTdXJmYWNlIFBhbmUnO1xyXG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSAoaW5zdGFuY2UsIHBhbmUpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gcGFuZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcblxyXG4gICAgICAgIHZhciBoZWFkZXIgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJy5wYW5lLWhlYWRlcicpO1xyXG4gICAgICAgIHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXIgPyBoZWFkZXIuaGVpZ2h0KCkgOiAwO1xyXG5cclxuICAgICAgICB2YXIgd2lkdGggPSBwYW5lLndpZHRoKCksIGhlaWdodCA9IHBhbmUuaGVpZ2h0KCkgLSBoZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgZGF0YS5pbWdEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgZGF0YS5idWZmZXIgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xyXG5cclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG5cclxuICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKGRhdGEuc3VyZmFjZS5wcm9qLCA0NSAqIERFRzJSQUQsIHdpZHRoIC8gaGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIG9yaWdpbmFsUm90YXRpb24gPSBudWxsO1xyXG4gICAgdmFyIG1vdXNlRG93bkNvb3JkcyA9IG51bGw7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnY29tbW9uLWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbi5hZGQoJ2NvbW1vbicsIHtcclxuICAgICAgICAgICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0Lm1vdmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBnZXRDb29yZHNEZWx0YShtb3VzZURvd25Db29yZHMsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lKGRhdGEuc3VyZmFjZS5yb3RhdGlvbiwgb3JpZ2luYWxSb3RhdGlvbiwgZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmRhdGFzZXQubW92aW5nID0gJ3RydWUnO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGluc3RhbmNlLnN1cmZhY2UuZGF0YVtjYW52YXMuaWRdO1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSb3RhdGlvbiA9IGRhdGEuc3VyZmFjZS5yb3RhdGlvbi5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgbW91c2VEb3duQ29vcmRzID0gcmVhbENvb3JkcztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZVVwOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudC50YXJnZXQuZGF0YXNldC5tb3Zpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBnZXRDb29yZHNEZWx0YShtb3VzZURvd25Db29yZHMsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICAgICAgY29tYmluZShkYXRhLnN1cmZhY2Uucm90YXRpb24sIG9yaWdpbmFsUm90YXRpb24sIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIG1vdXNlRG93bkNvb3JkcyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnc3VyZmFjZS1pbnRlcmFjdGlvbiddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb21iaW5lICh0YXJnZXQsIG9yaWdpbmFsUm90YXRpb24sIGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFJvdGF0aW9uKSByZXR1cm47XHJcbiAgICAgICAgdGFyZ2V0WzBdID0gb3JpZ2luYWxSb3RhdGlvblswXSArIGRlbHRhWzBdICogMC4wMDU7XHJcbiAgICAgICAgdGFyZ2V0WzFdID0gb3JpZ2luYWxSb3RhdGlvblsxXSArIGRlbHRhWzFdICogMC4wMDU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29vcmRzRGVsdGEgKGluaXRpYWwsIGN1cnJlbnQpIHtcclxuICAgICAgICBpZiAoIWluaXRpYWwpIHJldHVybiBbMCwgMF07XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaW5pdGlhbFswXSAtIGN1cnJlbnRbMF0sXHJcbiAgICAgICAgICAgIGluaXRpYWxbMV0gLSBjdXJyZW50WzFdXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ29iamVjdC1pbnRlcmFjdGlvbicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24uYWRkKCdvYmplY3QnLCB7XHJcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uTW91c2VEb3duJywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VVcDogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uTW91c2VVcCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1Zygnb25DbGljaycsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignc3VyZmFjZS5jcmVhdGUnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldEludGVyYWN0aW9uKHN1cmZhY2UsICdvYmplY3QnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LCBbJ3N1cmZhY2UtaW50ZXJhY3Rpb24nXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5zZXRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChzdXJmYWNlLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb25zLmhhcyhuYW1lKSlcclxuICAgICAgICAgICAgICAgIHN1cmZhY2UuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nLCBuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmdldEludGVyYWN0aW9uID0gZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgdmFyIGludGVyYWN0aW9ucyA9IGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb247XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3VyZmFjZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJhY3Rpb25zLmdldChuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3N1cmZhY2UuY3JlYXRlJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgc3VyZmFjZS5vbm1vdXNlbW92ZSA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgICAgICBzdXJmYWNlLm9ubW91c2Vkb3duID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25tb3VzZXVwID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25jbGljayA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblN1cmZhY2VFdmVudCAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IGluc3RhbmNlLnN1cmZhY2UuZ2V0SW50ZXJhY3Rpb24oZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIGtlZXBSdW5uaW5nID0gcnVuQ2FsbGJhY2soY2FsbGJhY2tzLCBldmVudCk7XHJcbiAgICAgICAgICAgIGlmIChrZWVwUnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbW1vbiA9IGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24uZ2V0KCdjb21tb24nKTtcclxuICAgICAgICAgICAgICAgIHJ1bkNhbGxiYWNrKGNvbW1vbiwgZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBuZXdQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJywgb2xkUGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnaW50ZXJhY3Rpb24tbW9kZScsICdzdXJmYWNlJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJ1bkNhbGxiYWNrIChjYWxsYmFja3MsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHJlYWxDb29yZHMgPSBnZXRMb2NhbENvb3JkaW5hdGVzKGV2ZW50KTtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlTW92ZShldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6IHJldHVybiBjYWxsYmFja3Mub25Nb3VzZURvd24oZXZlbnQsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICBjYXNlICdtb3VzZXVwJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlVXAoZXZlbnQsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICBjYXNlICdjbGljayc6IHJldHVybiBjYWxsYmFja3Mub25DbGljayhldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldExvY2FsQ29vcmRpbmF0ZXMgKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzO1xyXG4gICAgICAgIGlmIChldmVudC5wYWdlWCB8fCBldmVudC5wYWdlWSkge1xyXG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IFtldmVudC5wYWdlWCwgZXZlbnQucGFnZVldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gW1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxyXG4gICAgICAgICAgICAgICAgZXZlbnQuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb29yZGluYXRlc1swXSAtPSBldmVudC50YXJnZXQub2Zmc2V0TGVmdDtcclxuICAgICAgICBjb29yZGluYXRlc1sxXSAtPSBldmVudC50YXJnZXQub2Zmc2V0VG9wO1xyXG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3JlbmRlci1zb2xpZCcsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKFxyXG4gICAgICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgYV92ZXJ0ZXg7JyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X212cDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X21vZGVsOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICAgIHZfbm9ybWFsID0gKHVfbW9kZWwgKiB2ZWM0KGFfbm9ybWFsLDAuMCkpLnh5ejsnICtcclxuICAgICAgICAgICAgJyAgICBnbF9Qb3NpdGlvbiA9IHVfbXZwICogdmVjNChhX3ZlcnRleCwxLjApOycgK1xyXG4gICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzMgdV9saWdodHZlY3RvcjsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjNCB1X2NvbG9yOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICB2ZWMzIE4gPSBub3JtYWxpemUodl9ub3JtYWwpOycgK1xyXG4gICAgICAgICAgICAnICBnbF9GcmFnQ29sb3IgPSB1X2NvbG9yICogbWF4KDAuMCwgZG90KHVfbGlnaHR2ZWN0b3IsTikpOycgK1xyXG4gICAgICAgICAgICAnfSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgdmFyIG12cCA9IG1hdDQuY3JlYXRlKCk7XHJcblxyXG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHtcclxuICAgICAgICAgICAgdV9jb2xvcjogWzEsIDEsIDEsIDFdLFxyXG4gICAgICAgICAgICB1X2xpZ2h0dmVjdG9yOiB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyZWF0ZSgpLCBbMSwgLTUsIC0zXSksXHJcbiAgICAgICAgICAgIHVfbW9kZWw6IG51bGwsXHJcbiAgICAgICAgICAgIHVfbXZwOiBtdnBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcy5yZW5kZXJzLmFkZCgnc29saWQnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB2YXIgb2JqcyA9IGluc3RhbmNlLnNjZW5lLnJvb3QuZGZzKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Jqcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IG9ianNbaV0uZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlLmdldFZpZXcodGVtcCk7XHJcbiAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KHRlbXAsIHRlbXAsIG9iai5tb2RlbCk7XHJcbiAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KG12cCwgc3VyZmFjZS5wcm9qLCB0ZW1wKTtcclxuXHJcbiAgICBcdFx0XHR1bmlmb3Jtcy51X21vZGVsID0gb2JqLm1vZGVsO1xyXG4gICAgXHRcdFx0c2hhZGVyLnVuaWZvcm1zKHVuaWZvcm1zKS5kcmF3KG9iai5tZXNoLCBvYmoucHJpbWl0aXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3N1cmZhY2UuY3JlYXRlJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5zZXRSZW5kZXIoc3VyZmFjZSwgJ3NvbGlkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3N1cmZhY2UtcmVuZGVyJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnc3VyZmFjZS1yZW5kZXInLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldFJlbmRlciA9IGZ1bmN0aW9uIChzdXJmYWNlLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJzID0gaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycztcclxuICAgICAgICAgICAgaWYgKHJlbmRlcnMuaGFzKG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgc3VyZmFjZS5hdHRyRGF0YSgncmVuZGVyJywgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5nZXRSZW5kZXIgPSBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVycyA9IGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnM7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3VyZmFjZS5hdHRyRGF0YSgncmVuZGVyJyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGFuZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZScpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHBhbmVzW2ldLmRhdGFzZXQucGFuZVR5cGUgPT0gJ3N1cmZhY2UnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gcGFuZXNbaV0ucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuZGF0YXNldC5yZW5kZXIgPSAnc29saWQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBuZXdQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLXJlbmRlcicsIG9sZFBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydncmFwaGljcy1yZW5kZXInLCAnc3VyZmFjZSddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMgPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgWydncmFwaGljcyddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBHcmFwaGljcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmdsID0gR0wuY3JlYXRlKHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBzY3JlZW4uaGVpZ2h0LFxyXG4gICAgICAgICAgICB3aWR0aDogc2NyZWVuLndpZHRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nbC5hbmltYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nbC5vbmRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJUYXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyVGFyZ2V0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGRyYXdSZW5kZXJUYXJnZXQoaW5zdGFuY2UsIHJlbmRlclRhcmdldHNbaV0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nbC5jbGVhckNvbG9yKDAuMzQ5LCAwLjM0OSwgMC4zNDksIDEpO1xyXG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlKHRoaXMuZ2wuREVQVEhfVEVTVCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3MoaW5zdGFuY2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhd1JlbmRlclRhcmdldCAoaW5zdGFuY2UsIGNhbnZhcykge1xyXG4gICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcbiAgICAgICAgdmFyIGdsID0gaW5zdGFuY2UuZ3JhcGhpY3MuZ2w7XHJcblxyXG4gICAgICAgIHZhciB3aWR0aCAgPSBjYW52YXMuY2xpZW50V2lkdGgsIGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB2YXIgcmVuZGVyID0gaW5zdGFuY2Uuc3VyZmFjZS5nZXRSZW5kZXIoY2FudmFzKTtcclxuICAgICAgICBpZiAocmVuZGVyKSByZW5kZXIoZGF0YS5zdXJmYWNlKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICBnbC5yZWFkUGl4ZWxzKDAsIDAsIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgZGF0YS5pbWdEYXRhLmRhdGEuc2V0KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgY29udGV4dC5wdXRJbWFnZURhdGEoZGF0YS5pbWdEYXRhLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzY2VuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lID0ge1xyXG4gICAgICAgICAgICByb290OiBUcmVlTm9kZS5leHRlbmQoe30pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1hdCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgbWF0NC5yb3RhdGVZKG1hdCwgbWF0LCAwLjgpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zY2VuZS5yb290LmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICBwcmltaXRpdmU6IGluc3RhbmNlLmdyYXBoaWNzLmdsLlRSSUFOR0xFUyxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgICAgIG1vZGVsOiBtYXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIl19
