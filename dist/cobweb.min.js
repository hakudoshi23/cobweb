!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}window.extend=function(e,t){for(var n in t)if(n&&t.hasOwnProperty(n)){var r=t[n];"object"==typeof r?extend(e[n],t[n]):e[n]=t[n]}},e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t})}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};window.TreeNode=e,e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},e.extend=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1),this.instance.logger.debug(e,arguments);for(var n=0;n<t.length;n++)t[n].apply(null,arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(){},t=function(t,n){this.debug=n?console.debug.bind():e,this.info=n?console.info.bind():e,this.warn=console.warn.bind(),this.error=console.error.bind()};window.Logger=t}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=e,extend(this.options,n||{}),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this,!0),this.events=new EventHandler(this),t.prototype.modules.load(this),this.events.trigger("app.loaded")};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var i in t)0===t[i].dependencies.length&&r.push(i);for(;r.length>0;){var a=r[0];if(r.splice(0,1),t[a]){var s=t[a];o.push(a);for(var c=0;c<s.dependant.length;c++){var u=s.dependant[c];n(o,t[u])&&r.push(u)}}else e.events.trigger("modules.error.missing",a),e.logger.warning("Missing module '"+a+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){n=n||[],this.all[e]={dependencies:n,init:t}},load:function(n){this.instance=n,e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var i=r[o];try{this.all[i].init(n),n.events.trigger("modules.loaded",i)}catch(e){n.logger.error("Loading module "+i,e),n.events.trigger("modules.error",i,e)}}n.events.trigger("modules.loaded.all",r)},print:function(e){if(e)for(var t in this.all){var n=this.all[t];e.logger.debug("Name: ",t),e.logger.debug("\tDependencies: ",n.dependencies),e.logger.debug("\tDependant: ",n.dependant)}else console.error('Error: "load" should be called before "print"')}}}(),function(){"use strict";function e(e,n){var r=t();e.append(r)}function t(){var e=document.createElement("div");return e.className="pane-header",e}Cobweb.prototype.modules.add("pane-header",function(t){t.events.on("pane.create",function(n){e(n,t)})},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){if(this.types.has(n)){var r=this.types.get(n);r.onPaneType(t,e);var o=t.querySelector(".pane-header");r.onCreateHeader(o,e),t.attrData("pane-type",n)}}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t){e.events.trigger("pane.create",t)}function n(t,n){e.events.trigger("pane.split",t,n)}function r(t){e.events.trigger("pane.resize",t)}e.events.on("app.loaded",function(){e.pane.internal=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneCreate:t,onPaneSplit:n,onPaneResize:r}})}),e.pane={}})}(),function(){"use strict";Cobweb.prototype.modules.add("interaction-mode",function(e){e.surface.interaction={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["surface"])}(),function(){"use strict";function e(e,t){var o=document.createElement("canvas");o.id="surface"+r++,o.className="surface",e.append(o);var i={proj:mat4.create(),view:mat4.create()};t.surface.data={},t.surface.data[o.id]={},t.surface.data[o.id].surface=i,mat4.perspective(i.proj,-45*DEG2RAD,o.width/o.height,.1,1e3),mat4.lookAt(i.view,[0,2,4],[0,0,0],[0,1,0]),mat4.scale(i.view,i.view,[1,1.2,1]),n(t,e),t.events.trigger("surface.create",o)}function t(e,t){var n=document.createElement("label");n.innerHTML="Surface Pane",e.appendChild(n)}function n(e,t){var n=t.querySelector("canvas"),r=n.getContext("2d"),o=e.surface.data[n.id],i=t.querySelector(".pane-header"),a=i?i.height():0,s=t.width(),c=t.height()-a;o.imgData=r.createImageData(s,c),o.buffer=new Uint8Array(s*c*4),n.height=c,n.width=s,mat4.perspective(o.surface.proj,-45*DEG2RAD,s/c,.1,1e3)}var r=0;Cobweb.prototype.modules.add("surface",function(r){r.pane.types.add("surface",{onPaneType:e,onCreateHeader:t}),r.events.on("pane.resize",function(e){"surface"===e.attrData("pane-type")&&n(r,e)}),window.addEventListener("resize",function(e){for(var t=r.pane.container.querySelectorAll(".pane canvas"),o=0;o<t.length;o++)n(r,t[o].parentNode)}),r.events.on("pane.create",function(e){r.pane.setType(e,"surface")}),r.surface={}},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("common-interaction",function(e){e.surface.interaction.add("common",{onMouseMove:function(e){return e.target.dataset.moving&&console.debug("drag"),!0},onMouseDown:function(e){return e.target.dataset.moving="true",!0},onMouseUp:function(e){return delete e.target.dataset.moving,!0},onClick:function(t){return e.logger.debug("COMMON - onClick",t),!0}})},["surface-interaction"])}(),function(){"use strict";Cobweb.prototype.modules.add("object-interaction",function(e){e.surface.interaction.add("object",{onMouseMove:function(e){return!0},onMouseDown:function(t){return e.logger.debug("onMouseDown",t),!0},onMouseUp:function(t){return e.logger.debug("onMouseUp",t),!0},onClick:function(t){return e.logger.debug("onClick",t),!0}}),e.events.on("surface.create",function(t){e.surface.setInteraction(t,"object")})},["surface-interaction"])}(),function(){"use strict";function e(e,t){switch(t.type){case"mousemove":return e.onMouseMove(t);case"mousedown":return e.onMouseDown(t);case"mouseup":return e.onMouseUp(t);case"click":return e.onClick(t)}}Cobweb.prototype.modules.add("surface-interaction",function(t){function n(n){var r=t.surface.getInteraction(n.target),o=e(r,n);if(o){var i=t.surface.interaction.get("common");e(i,n)}}t.surface.setInteraction=function(e,n){var r=t.surface.interaction;r.has(n)&&e.attrData("surface-interaction",n)},t.surface.getInteraction=function(e){var n=t.surface.interaction,r=e.attrData("surface-interaction");return n.get(r)},t.events.on("surface.create",function(e){e.onmousemove=n,e.onmousedown=n,e.onmouseup=n,e.onclick=n}),t.events.on("pane.split",function(e,t){t.attrData("surface-interaction",e.attrData("surface-interaction"))})},["interaction-mode","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  gl_FragColor = u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[1,1,1,1],u_lightvector:vec3.normalize(vec3.create(),[1,2,3]),u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(i){for(var a=e.scene.root.dfs(),s=0;s<a.length;s++){var c=a[s].data;mat4.multiply(n,i.view,c.model),mat4.multiply(r,i.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive)}}),e.events.on("surface.create",function(t){e.surface.setRender(t,"solid")})},["surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.surface.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("render",n)},e.surface.getRender=function(t){var n=e.graphics.renders,r=t.attrData("render");return n.get(r)};for(var t=document.querySelectorAll(".pane"),n=0;n<t.length;n++)if("surface"==t[n].dataset.paneType){var r=t[n].querySelector("canvas");r.dataset.render="solid"}e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=e.surface.data[t.id],r=e.graphics.gl,o=t.clientWidth,i=t.clientHeight;r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.viewport(0,0,o,i);var a=e.surface.getRender(t);a&&a(n.surface);var s=t.getContext("2d");s&&(r.readPixels(0,0,o,i,r.RGBA,r.UNSIGNED_BYTE,n.buffer),n.imgData.data.set(n.buffer),s.putImageData(n.imgData,0,0))}var t=function(t){this.instance=t,this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.4,.4,.4,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e)})}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){e.scene={root:TreeNode.extend({})};var t=mat4.create();mat4.rotateY(t,t,.8),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,mesh:GL.Mesh.cube(),model:t})},["graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsInRyZWUuanMiLCJldmVudHMuanMiLCJsb2dnZXIuanMiLCJjb2J3ZWIuanMiLCJtb2R1bGVzLmpzIiwicGFuZS9wYW5lLWhlYWRlci5qcyIsInBhbmUvcGFuZS10eXBlcy5qcyIsInBhbmUvcGFuZXMuanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24tbW9kZXMuanMiLCJwYW5lL3N1cmZhY2Uvc3VyZmFjZS5qcyIsInBhbmUvc3VyZmFjZS9pbnRlcmFjdGlvbi9jb21tb24taW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24vb2JqZWN0LWludGVyYWN0aW9uLmpzIiwicGFuZS9zdXJmYWNlL2ludGVyYWN0aW9uL3N1cmZhY2UtaW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvcmVuZGVyL3JlbmRlci1zb2xpZC5qcyIsInBhbmUvc3VyZmFjZS9yZW5kZXIvc3VyZmFjZS1yZW5kZXIuanMiLCJncmFwaGljLXJlbmRlci5qcyIsImdyYXBoaWMuanMiLCJzY2VuZS5qcyJdLCJuYW1lcyI6WyJzYWZlRXh0ZW5kIiwicHJvdG90eXBlIiwicHJvcGVydHkiLCJ2YWx1ZSIsIkFycmF5IiwiYSIsInRoaXMiLCJjb25jYXQiLCJpIiwibGVuZ3RoIiwiaiIsInNwbGljZSIsImNhbGxiYWNrIiwiczQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkhUTUxFbGVtZW50Iiwib2xkQ2xhc3NOYW1lcyIsIm5ld0NsYXNzTmFtZXMiLCJhcmd1bWVudHMiLCJjbGFzc05hbWUiLCJ0cmltIiwicmVwbGFjZSIsInNwbGl0IiwidW5pcXVlIiwiam9pbiIsInF1ZXJ5Q2xhc3NOYW1lcyIsImN1cnJlbnRDbGFzc05hbWVzIiwiaW5kZXgiLCJuYW1lIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzTmFtZXMiLCJyZW1vdmVFYWNoIiwiZm9yRWFjaCIsImF0dHIiLCJ3aW5kb3ciLCJfX2RhdGFfY2FjaGUiLCJXZWFrTWFwIiwiZWxBdHRycyIsImdldCIsInVuZGVmaW5lZCIsInNldCIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJFbGVtZW50IiwibWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsIm1hdGNoZXMiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInF1ZXJ5IiwicGFyZW50RWxlbWVudCIsImN1cnJlbnQiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsImhlaWdodCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJndWlkIiwib3ZlcmxhcCIsInF1ZXJ5U2VsZWN0b3IiLCJleHRlbmQiLCJkZWZhdWx0cyIsInByb3BlcnRpZXMiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsIm9iaiIsIm5ld09iaiIsImNsb25lIiwiVHJlZU5vZGUiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImlzUm9vdCIsImFkZCIsImNoaWxkIiwiY29uc3RydWN0b3IiLCJwdXNoIiwicmVtb3ZlIiwic2xpY2UiLCJkZnMiLCJjaGVjayIsIm91dCIsImJmcyIsIl9UcmVlTm9kZSIsImNhbGwiLCJjcmVhdGUiLCJFdmVudEhhbmRsZXIiLCJpbnN0YW5jZSIsImxpc3RlbmVycyIsInRyaWdnZXIiLCJsb2dnZXIiLCJkZWJ1ZyIsImFwcGx5Iiwib24iLCJvZmYiLCJhcnJheSIsImVtcHR5RnVuY3Rpb24iLCJMb2dnZXIiLCJpc0RlYnVnIiwiY29uc29sZSIsImJpbmQiLCJpbmZvIiwid2FybiIsImVycm9yIiwiZGVmYXVsdE9wdGlvbnMiLCJjb250YWluZXIiLCJzZWxlY3RvciIsIkNvYndlYiIsIm9wdGlvbnMiLCJFcnJvciIsImFkZENsYXNzIiwiZXZlbnRzIiwibW9kdWxlcyIsImxvYWQiLCJhZGRSZXZlcnNlRGVwZW5kZW5jaWVzIiwibW9kdWxlIiwiZGVwZW5kYW50IiwiZGVwZW5kZW5jaWVzIiwiZGVwUGx1Z2luIiwidG9wb2xvZ2ljYWxTb3J0IiwiY2FuZGlkYXRlcyIsInNvcnRlZE5hbWVzIiwibmV4dE5hbWUiLCJkZXBOYW1lIiwiYWxsRGVwZW5kZW5jaWVzTWV0Iiwid2FybmluZyIsImtleXMiLCJsb2FkZWRVbnRpbE5vdyIsImFsbCIsImluaXQiLCJleCIsInByaW50Iiwib25DcmVhdGVDYWxsYmFjayIsInBhbmUiLCJoZWFkZXIiLCJjcmVhdGVIZWFkZXIiLCJhcHBlbmQiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwicGFuZVR5cGVzIiwiY2FsbGJhY2tzIiwiaGFzIiwib2xkUGFuZSIsIm5ld1BhbmUiLCJvbGRUeXBlIiwiYXR0ckRhdGEiLCJzZXRUeXBlIiwidHlwZXMiLCJ0eXBlQ2FsbGJhY2tzIiwib25QYW5lVHlwZSIsInBhbmVIZWFkZXIiLCJvbkNyZWF0ZUhlYWRlciIsIm9uUGFuZUNyZWF0ZSIsIm9uUGFuZVNwbGl0Iiwib3JpZ2luIiwib25QYW5lUmVzaXplIiwiaW50ZXJuYWwiLCJQYW5lIiwic2VwYXJhdG9yIiwic2l6ZSIsInN1cmZhY2UiLCJpbnRlcmFjdGlvbiIsIm9uU3VyZmFjZVBhbmVUeXBlIiwiY2FudmFzIiwiaWQiLCJzdXJmYWNlSW5kZXgiLCJwcm9qIiwibWF0NCIsInZpZXciLCJwZXJzcGVjdGl2ZSIsIkRFRzJSQUQiLCJsb29rQXQiLCJzY2FsZSIsInVwZGF0ZUNhbnZhc1NpemUiLCJvbkNyZWF0ZVN1cmZhY2VIZWFkZXIiLCJsYWJlbCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJoZWFkZXJIZWlnaHQiLCJpbWdEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwiYnVmZmVyIiwiVWludDhBcnJheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN1cmZhY2VzIiwicGFyZW50Tm9kZSIsIm9uTW91c2VNb3ZlIiwidGFyZ2V0IiwiZGF0YXNldCIsIm1vdmluZyIsIm9uTW91c2VEb3duIiwib25Nb3VzZVVwIiwib25DbGljayIsInNldEludGVyYWN0aW9uIiwicnVuQ2FsbGJhY2siLCJ0eXBlIiwib25TdXJmYWNlRXZlbnQiLCJnZXRJbnRlcmFjdGlvbiIsImtlZXBSdW5uaW5nIiwiY29tbW9uIiwiaW50ZXJhY3Rpb25zIiwib25tb3VzZW1vdmUiLCJvbm1vdXNlZG93biIsIm9ubW91c2V1cCIsIm9uY2xpY2siLCJzaGFkZXIiLCJTaGFkZXIiLCJ0ZW1wIiwibXZwIiwidW5pZm9ybXMiLCJ1X2NvbG9yIiwidV9saWdodHZlY3RvciIsInZlYzMiLCJub3JtYWxpemUiLCJ1X21vZGVsIiwidV9tdnAiLCJncmFwaGljcyIsInJlbmRlcnMiLCJvYmpzIiwic2NlbmUiLCJyb290IiwibXVsdGlwbHkiLCJtb2RlbCIsImRyYXciLCJtZXNoIiwicHJpbWl0aXZlIiwic2V0UmVuZGVyIiwiZ2V0UmVuZGVyIiwicGFuZXMiLCJwYW5lVHlwZSIsInJlbmRlciIsImRyYXdSZW5kZXJUYXJnZXQiLCJnbCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJ2aWV3cG9ydCIsInJlYWRQaXhlbHMiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInB1dEltYWdlRGF0YSIsIkdyYXBoaWNzIiwiR0wiLCJzY3JlZW4iLCJhbmltYXRlIiwib25kcmF3IiwicmVuZGVyVGFyZ2V0cyIsImNsZWFyQ29sb3IiLCJlbmFibGUiLCJERVBUSF9URVNUIiwibWF0Iiwicm90YXRlWSIsIlRSSUFOR0xFUyIsIk1lc2giLCJjdWJlIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBZUEsU0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FDQUYsRUFBQUMsS0FBQUQsRUFBQUMsR0FBQUMsR0FkQUgsRUFBQUksTUFBQUgsVUFBQSxTQUFBLFdBRUEsSUFBQSxHQURBSSxHQUFBQyxLQUFBQyxT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V0FDQSxZQUVBb0IsUUFBQXJILFVBQUEwSCxRQUFBdkMsSUFBQSxRQUFBLFNBQUFjLEdBQ0FBLEVBQUF1SSxPQUNBQyxLQUFBMUosU0FBQVIsV0FHQSxJQUFBZ00sR0FBQXRGLEtBQUFsRixRQUNBa0YsTUFBQXVGLFFBQUFELEVBQUFBLEVBQUEsSUFFQXRLLEVBQUF1SSxNQUFBQyxLQUFBdEosS0FDQTZILEtBQUEsU0FDQThCLFVBQUE3SSxFQUFBb0ksU0FBQWdCLEdBQUFvQixVQUNBNUIsS0FBQWtCLEdBQUFXLEtBQUFDLE9BQ0FoQyxNQUFBNEIsTUFFQSIsImZpbGUiOiJjb2J3ZWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAndW5pcXVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNvbmNhdCgpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICBmb3IodmFyIGogPSBpICsgMTsgaiA8IGEubGVuZ3RoOyArK2opXHJcbiAgICAgICAgICAgICAgICBpZihhW2ldID09PSBhW2pdKSBhLnNwbGljZShqLS0sIDEpO1xyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChBcnJheS5wcm90b3R5cGUsICdmb3JFYWNoJywgZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhZGRDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb2xkQ2xhc3NOYW1lcywgbmV3Q2xhc3NOYW1lcztcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgb2xkQ2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBuZXdDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBvbGRDbGFzc05hbWVzLmNvbmNhdChuZXdDbGFzc05hbWVzKS51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoYXNDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcXVlcnlDbGFzc05hbWVzLCBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBxdWVyeUNsYXNzTmFtZXMgPSAhYXJndW1lbnRzW2ldID8gW10gOiBhcmd1bWVudHNbaV0udHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcXVlcnlDbGFzc05hbWVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBxdWVyeUNsYXNzTmFtZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdyZW1vdmVDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwLCBjdXJyZW50Q2xhc3NOYW1lcywgcmVtb3ZlQ2xhc3NOYW1lcztcclxuICAgICAgICB2YXIgcmVtb3ZlRWFjaCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gY3VycmVudENsYXNzTmFtZXMuaW5kZXhPZihuYW1lKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcy5mb3JFYWNoKHJlbW92ZUVhY2gpO1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGN1cnJlbnRDbGFzc05hbWVzLnVuaXF1ZSgpLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2RhdGEnLCBmdW5jdGlvbiAoYXR0ciwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHZhciBlbEF0dHJzID0gd2luZG93Ll9fZGF0YV9jYWNoZS5nZXQodGhpcykgfHwge307XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWxBdHRyc1thdHRyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB3aW5kb3cuX19kYXRhX2NhY2hlLnNldCh0aGlzLCBlbEF0dHJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYXR0cikgcmV0dXJuIGVsQXR0cnMgJiYgZWxBdHRyc1thdHRyXTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gZWxBdHRycztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICghd2luZG93Ll9fZGF0YV9jYWNoZSkgd2luZG93Ll9fZGF0YV9jYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHInLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYXR0ckRhdGEnLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKCdkYXRhLScgKyBuYW1lLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLCAnbWF0Y2hlcycsXHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHxcclxuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcclxuICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gdGhpcykge31cclxuICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncGFyZW50JywgZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB3aGlsZSAoIWN1cnJlbnQubWF0Y2hlcyhxdWVyeSkpXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hlaWdodCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICd3aWR0aCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWUgKyAncHgnO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudFdpZHRoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZCh3aW5kb3csICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnR1VJRC0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBndWlkID0gbnVsbCwgb3ZlcmxhcCA9IG51bGw7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBndWlkID0gd2luZG93Lmd1aWQoKTtcclxuICAgICAgICAgICAgb3ZlcmxhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ3VpZCk7XHJcbiAgICAgICAgfSB3aGlsZShvdmVybGFwKTtcclxuICAgICAgICB0aGlzLmF0dHIoJ2lkJywgZ3VpZCk7XHJcbiAgICAgICAgcmV0dXJuIGd1aWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlRXh0ZW5kKHByb3RvdHlwZSwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXByb3RvdHlwZVtwcm9wZXJ0eV0pIHByb3RvdHlwZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzNCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgd2luZG93LmV4dGVuZCA9IGZ1bmN0aW9uIChkZWZhdWx0cywgcHJvcGVydGllcykge1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmQoZGVmYXVsdHNbcHJvcGVydHldLCBwcm9wZXJ0aWVzW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdHNbcHJvcGVydHldID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2FmZUV4dGVuZChPYmplY3QsICdjbG9uZScsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIgbmV3T2JqID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqKVxyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBPYmplY3QuY2xvbmUob2JqW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqW3Byb3BlcnR5XSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3T2JqO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgVHJlZU5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5UcmVlTm9kZSA9IFRyZWVOb2RlO1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcywgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmRmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5kZnMoY2hlY2spKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmJmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXSwgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5iZnMoY2hlY2spKTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5leHRlbmQgPSBmdW5jdGlvbiAoZGVmYXVsdHMpIHtcclxuICAgICAgICB2YXIgX1RyZWVOb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICBUcmVlTm9kZS5jYWxsKHRoaXMsIHBhcmVudCwgZGF0YSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBfVHJlZU5vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShUcmVlTm9kZS5wcm90b3R5cGUpO1xyXG4gICAgICAgIF9UcmVlTm9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBfVHJlZU5vZGU7XHJcbiAgICAgICAgZXh0ZW5kKF9UcmVlTm9kZS5wcm90b3R5cGUsIGRlZmF1bHRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IF9UcmVlTm9kZShudWxsKTtcclxuICAgIH07XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW25hbWVdIHx8IFtdO1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UubG9nZ2VyLmRlYnVnKG5hbWUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW25hbWVdKSB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW25hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNbbmFtZV0pIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmIChhcnJheS5pbmRleE9mKGNhbGxiYWNrKSA+IC0xKSBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkV2ZW50SGFuZGxlciA9IEV2ZW50SGFuZGxlcjtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZW1wdHlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgIHZhciBMb2dnZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGlzRGVidWcpIHtcclxuICAgICAgICB0aGlzLmRlYnVnID0gaXNEZWJ1ZyA/IGNvbnNvbGUuZGVidWcuYmluZCgpIDogZW1wdHlGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvID0gaXNEZWJ1ZyA/IGNvbnNvbGUuaW5mby5iaW5kKCkgOiBlbXB0eUZ1bmN0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLndhcm4gPSBjb25zb2xlLndhcm4uYmluZCgpO1xyXG5cclxuICAgICAgICB0aGlzLmVycm9yID0gY29uc29sZS5lcnJvci5iaW5kKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5Mb2dnZXIgPSBMb2dnZXI7XHJcbn0pKCkpO1xyXG4iLCIoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgY29udGFpbmVyOiB7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnI2NvYndlYicsXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NiLWNvbnRhaW5lcidcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBDb2J3ZWIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbnRhaW5lciBzZWxlY3RvcjogXFwnJyArXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yICsgJ1xcJycpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jb250YWluZXIuY2xhc3NOYW1lKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5kYXRhKCdpbnN0YW5jZScsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIodGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRIYW5kbGVyKHRoaXMpO1xyXG4gICAgICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5sb2FkKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoJ2FwcC5sb2FkZWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkNvYndlYiA9IENvYndlYjtcclxufSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzID0ge1xyXG4gICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgaW5pdCwgZGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcyB8fCBbXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0ge1xyXG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBkZXBlbmRlbmNpZXMsXHJcbiAgICAgICAgICAgICAgICBpbml0OiBpbml0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICBhZGRSZXZlcnNlRGVwZW5kZW5jaWVzKHRoaXMuYWxsKTtcclxuICAgICAgICAgICAgdmFyIHNvcnRlZE5hbWVzID0gdG9wb2xvZ2ljYWxTb3J0KGluc3RhbmNlLCB0aGlzLmFsbCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc29ydGVkTmFtZXMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHNvcnRlZE5hbWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXS5pbml0KGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5sb2FkZWQnLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmVycm9yKCdMb2FkaW5nIG1vZHVsZSAnICsgbmFtZSwgZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yJywgbmFtZSwgZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmxvYWRlZC5hbGwnLCBzb3J0ZWROYW1lcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmludDogZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLmFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGUgPSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ05hbWU6ICcsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnXFx0RGVwZW5kZW5jaWVzOiAnLCBtb2R1bGUuZGVwZW5kZW5jaWVzKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ1xcdERlcGVuZGFudDogJywgbW9kdWxlLmRlcGVuZGFudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogXCJsb2FkXCIgc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgXCJwcmludFwiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFJldmVyc2VEZXBlbmRlbmNpZXMgKG1vZHVsZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1vZHVsZXMpIHtcclxuICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG1vZHVsZXNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmICghbW9kdWxlLmRlcGVuZGFudCkgbW9kdWxlLmRlcGVuZGFudCA9IFtdO1xyXG4gICAgICAgICAgICBpZiAobW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwUGx1Z2luID0gbW9kdWxlc1ttb2R1bGUuZGVwZW5kZW5jaWVzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlcFBsdWdpbi5kZXBlbmRhbnQpIGRlcFBsdWdpbi5kZXBlbmRhbnQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBkZXBQbHVnaW4uZGVwZW5kYW50LnB1c2gobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9wb2xvZ2ljYWxTb3J0IChpbnN0YW5jZSwgbW9kdWxlcykge1xyXG4gICAgICAgIHZhciBjYW5kaWRhdGVzID0gW10sIHNvcnRlZE5hbWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBtb2R1bGVzKVxyXG4gICAgICAgICAgICBpZiAobW9kdWxlc1tuYW1lXS5kZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgIHdoaWxlIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIG5leHROYW1lID0gY2FuZGlkYXRlc1swXTtcclxuICAgICAgICAgICAgY2FuZGlkYXRlcy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGVzW25leHROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG1vZHVsZXNbbmV4dE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgc29ydGVkTmFtZXMucHVzaChuZXh0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRhbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwTmFtZSA9IG1vZHVsZS5kZXBlbmRhbnRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbERlcGVuZGVuY2llc01ldChzb3J0ZWROYW1lcywgbW9kdWxlc1tkZXBOYW1lXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChkZXBOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yLm1pc3NpbmcnLCBuZXh0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIud2FybmluZygnTWlzc2luZyBtb2R1bGUgXFwnJyArIG5leHROYW1lICsgJ1xcJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhtb2R1bGVzKS5sZW5ndGggIT09IHNvcnRlZE5hbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5lcnJvci5jeWNsZScpO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0RlcGVuZGVuY3kgY3ljbGUgZm91bmQgaW4gbW9kdWxlcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc29ydGVkTmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWxsRGVwZW5kZW5jaWVzTWV0IChsb2FkZWRVbnRpbE5vdywgbW9kdWxlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAobG9hZGVkVW50aWxOb3cuaW5kZXhPZihtb2R1bGUuZGVwZW5kZW5jaWVzW2ldKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3BhbmUtaGVhZGVyJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLmNyZWF0ZScsIGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIG9uQ3JlYXRlQ2FsbGJhY2socGFuZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uQ3JlYXRlQ2FsbGJhY2sgKHBhbmUsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlciA9IGNyZWF0ZUhlYWRlcigpO1xyXG4gICAgICAgIHBhbmUuYXBwZW5kKGhlYWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlSGVhZGVyICgpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICdwYW5lLWhlYWRlcic7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3BhbmUtdHlwZXMnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgcGFuZVR5cGVzID0ge1xyXG4gICAgICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2tzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICB2YXIgb2xkVHlwZSA9IG9sZFBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScpO1xyXG4gICAgICAgICAgICBpZiAob2xkVHlwZSkgaW5zdGFuY2UucGFuZS5zZXRUeXBlKG5ld1BhbmUsIG9sZFR5cGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzID0gcGFuZVR5cGVzO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnNldFR5cGUgPSBmdW5jdGlvbiAocGFuZSwgbmFtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50eXBlcy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlQ2FsbGJhY2tzID0gdGhpcy50eXBlcy5nZXQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FsbGJhY2tzLm9uUGFuZVR5cGUocGFuZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhbmVIZWFkZXIgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJy5wYW5lLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgdHlwZUNhbGxiYWNrcy5vbkNyZWF0ZUhlYWRlcihwYW5lSGVhZGVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnLCBuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ3BhbmUnXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdhcHAubG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmludGVybmFsID0gbmV3IFBhbmUoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBpbnN0YW5jZS5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvcixcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblBhbmVDcmVhdGU6IG9uUGFuZUNyZWF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBvblBhbmVTcGxpdDogb25QYW5lU3BsaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYW5lUmVzaXplOiBvblBhbmVSZXNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vblBhbmVNZXJnZTogb25QYW5lTWVyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vblBhbmVEZXN0cm95OiBvblBhbmVEZXN0cm95LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZSA9IHt9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVDcmVhdGUgKHBhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUuY3JlYXRlJywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVTcGxpdCAob3JpZ2luLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwYW5lLnNwbGl0Jywgb3JpZ2luLCBuZXdQYW5lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZVJlc2l6ZSAocGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5yZXNpemUnLCBwYW5lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZU1lcmdlIChtZXJnZXIsIHRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ29uUGFuZU1lcmdlJywgbWVyZ2VyLCB0b1JlbW92ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVEZXN0cm95IChwYW5lKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ29uUGFuZURlc3Ryb3knLCBwYW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2ludGVyYWN0aW9uLW1vZGUnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uID0ge1xyXG4gICAgICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2tzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgWydzdXJmYWNlJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHN1cmZhY2VJbmRleCA9IDA7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnc3VyZmFjZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUudHlwZXMuYWRkKCdzdXJmYWNlJywge1xyXG4gICAgICAgICAgICBvblBhbmVUeXBlOiBvblN1cmZhY2VQYW5lVHlwZSxcclxuICAgICAgICAgICAgb25DcmVhdGVIZWFkZXI6IG9uQ3JlYXRlU3VyZmFjZUhlYWRlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUucmVzaXplJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgaWYgKHBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScpID09PSAnc3VyZmFjZScpXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDYW52YXNTaXplKGluc3RhbmNlLCBwYW5lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgc3VyZmFjZXMgPSBpbnN0YW5jZS5wYW5lLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZSBjYW52YXMnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdXJmYWNlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhbnZhc1NpemUoaW5zdGFuY2UsIHN1cmZhY2VzW2ldLnBhcmVudE5vZGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuY3JlYXRlJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRUeXBlKHBhbmUsICdzdXJmYWNlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UgPSB7fTtcclxuICAgIH0sIFsncGFuZS10eXBlcyddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvblN1cmZhY2VQYW5lVHlwZSAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY2FudmFzLmlkID0gJ3N1cmZhY2UnICsgKHN1cmZhY2VJbmRleCsrKTtcclxuICAgICAgICBjYW52YXMuY2xhc3NOYW1lID0gJ3N1cmZhY2UnO1xyXG4gICAgICAgIHBhbmUuYXBwZW5kKGNhbnZhcyk7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBwcm9qOiBtYXQ0LmNyZWF0ZSgpLFxyXG4gICAgICAgICAgICB2aWV3OiBtYXQ0LmNyZWF0ZSgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmRhdGEgPSB7fTtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmRhdGFbY2FudmFzLmlkXSA9IHt9O1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuZGF0YVtjYW52YXMuaWRdLnN1cmZhY2UgPSBkYXRhO1xyXG5cclxuICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKGRhdGEucHJvaiwgLTQ1ICogREVHMlJBRCxcclxuICAgICAgICAgICAgY2FudmFzLndpZHRoIC8gY2FudmFzLmhlaWdodCwgMC4xLCAxMDAwKTtcclxuICAgICAgICBtYXQ0Lmxvb2tBdChkYXRhLnZpZXcsIFswLDIsNF0sIFswLDAsMF0sIFswLDEsMF0pO1xyXG4gICAgICAgIG1hdDQuc2NhbGUoZGF0YS52aWV3LCBkYXRhLnZpZXcsIFsxLDEuMiwxXSk7XHJcbiAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZShpbnN0YW5jZSwgcGFuZSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdzdXJmYWNlLmNyZWF0ZScsIGNhbnZhcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25DcmVhdGVTdXJmYWNlSGVhZGVyIChoZWFkZXIsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnU3VyZmFjZSBQYW5lJztcclxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUgKGluc3RhbmNlLCBwYW5lKSB7XHJcbiAgICAgICAgdmFyIGNhbnZhcyA9IHBhbmUucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IGluc3RhbmNlLnN1cmZhY2UuZGF0YVtjYW52YXMuaWRdO1xyXG5cclxuICAgICAgICB2YXIgaGVhZGVyID0gcGFuZS5xdWVyeVNlbGVjdG9yKCcucGFuZS1oZWFkZXInKTtcclxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0ID0gaGVhZGVyID8gaGVhZGVyLmhlaWdodCgpIDogMDtcclxuXHJcbiAgICAgICAgdmFyIHdpZHRoID0gcGFuZS53aWR0aCgpLCBoZWlnaHQgPSBwYW5lLmhlaWdodCgpIC0gaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgIGRhdGEuaW1nRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIGRhdGEuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcclxuXHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuXHJcbiAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShkYXRhLnN1cmZhY2UucHJvaiwgLTQ1ICogREVHMlJBRCwgd2lkdGggLyBoZWlnaHQsIDAuMSwgMTAwMCk7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdjb21tb24taW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uLmFkZCgnY29tbW9uJywge1xyXG4gICAgICAgICAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmRhdGFzZXQubW92aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnZHJhZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5kYXRhc2V0Lm1vdmluZyA9ICd0cnVlJztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbk1vdXNlVXA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGV2ZW50LnRhcmdldC5kYXRhc2V0Lm1vdmluZztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnQ09NTU9OIC0gb25DbGljaycsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3N1cmZhY2UtaW50ZXJhY3Rpb24nXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdvYmplY3QtaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uLmFkZCgnb2JqZWN0Jywge1xyXG4gICAgICAgICAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdvbk1vdXNlRG93bicsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbk1vdXNlVXA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdvbk1vdXNlVXAnLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uQ2xpY2snLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3N1cmZhY2UuY3JlYXRlJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5zZXRJbnRlcmFjdGlvbihzdXJmYWNlLCAnb2JqZWN0Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSwgWydzdXJmYWNlLWludGVyYWN0aW9uJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnc3VyZmFjZS1pbnRlcmFjdGlvbicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2Uuc2V0SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoc3VyZmFjZSwgbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb25zID0gaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbjtcclxuICAgICAgICAgICAgaWYgKGludGVyYWN0aW9ucy5oYXMobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJywgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5nZXRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uO1xyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IHN1cmZhY2UuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVyYWN0aW9ucy5nZXQobmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdzdXJmYWNlLmNyZWF0ZScsIGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25tb3VzZW1vdmUgPSBvblN1cmZhY2VFdmVudDtcclxuICAgICAgICAgICAgc3VyZmFjZS5vbm1vdXNlZG93biA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgICAgICBzdXJmYWNlLm9ubW91c2V1cCA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgICAgICBzdXJmYWNlLm9uY2xpY2sgPSBvblN1cmZhY2VFdmVudDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25TdXJmYWNlRXZlbnQgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSBpbnN0YW5jZS5zdXJmYWNlLmdldEludGVyYWN0aW9uKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciBrZWVwUnVubmluZyA9IHJ1bkNhbGxiYWNrKGNhbGxiYWNrcywgZXZlbnQpO1xyXG4gICAgICAgICAgICBpZiAoa2VlcFJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb21tb24gPSBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uLmdldCgnY29tbW9uJyk7XHJcbiAgICAgICAgICAgICAgICBydW5DYWxsYmFjayhjb21tb24sIGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnNwbGl0JywgZnVuY3Rpb24gKG9sZFBhbmUsIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgbmV3UGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicsIG9sZFBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2ludGVyYWN0aW9uLW1vZGUnLCAnc3VyZmFjZSddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBydW5DYWxsYmFjayAoY2FsbGJhY2tzLCBldmVudCkge1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdtb3VzZW1vdmUnOiByZXR1cm4gY2FsbGJhY2tzLm9uTW91c2VNb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgY2FzZSAnbW91c2Vkb3duJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlRG93bihldmVudCk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNldXAnOiByZXR1cm4gY2FsbGJhY2tzLm9uTW91c2VVcChldmVudCk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NsaWNrJzogcmV0dXJuIGNhbGxiYWNrcy5vbkNsaWNrKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdyZW5kZXItc29saWQnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgc2hhZGVyID0gbmV3IFNoYWRlcihcclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnICtcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWMzIGFfdmVydGV4OycgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgYV9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9tdnA7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9tb2RlbDsnICtcclxuICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnICtcclxuICAgICAgICAgICAgJyAgICB2X25vcm1hbCA9ICh1X21vZGVsICogdmVjNChhX25vcm1hbCwwLjApKS54eXo7JyArXHJcbiAgICAgICAgICAgICcgICAgZ2xfUG9zaXRpb24gPSB1X212cCAqIHZlYzQoYV92ZXJ0ZXgsMS4wKTsnICtcclxuICAgICAgICAgICAgJ30nLFxyXG4gICAgICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSB2ZWMzIHVfbGlnaHR2ZWN0b3I7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzQgdV9jb2xvcjsnICtcclxuICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnICtcclxuICAgICAgICAgICAgJyAgdmVjMyBOID0gbm9ybWFsaXplKHZfbm9ybWFsKTsnICtcclxuICAgICAgICAgICAgJyAgZ2xfRnJhZ0NvbG9yID0gdV9jb2xvciAqIG1heCgwLjAsIGRvdCh1X2xpZ2h0dmVjdG9yLE4pKTsnICtcclxuICAgICAgICAgICAgJ30nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIHRlbXAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgIHZhciBtdnAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgIHVfY29sb3I6IFsxLCAxLCAxLCAxXSxcclxuICAgICAgICAgICAgdV9saWdodHZlY3RvcjogdmVjMy5ub3JtYWxpemUodmVjMy5jcmVhdGUoKSwgWzEsIDIsIDNdKSxcclxuICAgICAgICAgICAgdV9tb2RlbDogbnVsbCxcclxuICAgICAgICAgICAgdV9tdnA6IG12cFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMuYWRkKCdzb2xpZCcsIGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmpzID0gaW5zdGFuY2Uuc2NlbmUucm9vdC5kZnMoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2Jqc1tpXS5kYXRhO1xyXG4gICAgXHRcdFx0bWF0NC5tdWx0aXBseSh0ZW1wLCBzdXJmYWNlLnZpZXcsIG9iai5tb2RlbCk7XHJcbiAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KG12cCwgc3VyZmFjZS5wcm9qLCB0ZW1wKTtcclxuXHJcbiAgICBcdFx0XHR1bmlmb3Jtcy51X21vZGVsID0gb2JqLm1vZGVsO1xyXG4gICAgXHRcdFx0c2hhZGVyLnVuaWZvcm1zKHVuaWZvcm1zKS5kcmF3KG9iai5tZXNoLCBvYmoucHJpbWl0aXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3N1cmZhY2UuY3JlYXRlJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5zZXRSZW5kZXIoc3VyZmFjZSwgJ3NvbGlkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3N1cmZhY2UtcmVuZGVyJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnc3VyZmFjZS1yZW5kZXInLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldFJlbmRlciA9IGZ1bmN0aW9uIChzdXJmYWNlLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJzID0gaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycztcclxuICAgICAgICAgICAgaWYgKHJlbmRlcnMuaGFzKG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgc3VyZmFjZS5hdHRyRGF0YSgncmVuZGVyJywgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5nZXRSZW5kZXIgPSBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVycyA9IGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnM7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3VyZmFjZS5hdHRyRGF0YSgncmVuZGVyJyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGFuZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZScpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHBhbmVzW2ldLmRhdGFzZXQucGFuZVR5cGUgPT0gJ3N1cmZhY2UnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gcGFuZXNbaV0ucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuZGF0YXNldC5yZW5kZXIgPSAnc29saWQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBuZXdQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLXJlbmRlcicsIG9sZFBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydncmFwaGljcy1yZW5kZXInLCAnc3VyZmFjZSddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMgPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgWydncmFwaGljcyddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBHcmFwaGljcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmdsID0gR0wuY3JlYXRlKHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBzY3JlZW4uaGVpZ2h0LFxyXG4gICAgICAgICAgICB3aWR0aDogc2NyZWVuLndpZHRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nbC5hbmltYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nbC5vbmRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJUYXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyVGFyZ2V0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGRyYXdSZW5kZXJUYXJnZXQoaW5zdGFuY2UsIHJlbmRlclRhcmdldHNbaV0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nbC5jbGVhckNvbG9yKDAuNCwgMC40LCAwLjQsIDEpO1xyXG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlKHRoaXMuZ2wuREVQVEhfVEVTVCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3MoaW5zdGFuY2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhd1JlbmRlclRhcmdldCAoaW5zdGFuY2UsIGNhbnZhcykge1xyXG4gICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5kYXRhW2NhbnZhcy5pZF07XHJcbiAgICAgICAgdmFyIGdsID0gaW5zdGFuY2UuZ3JhcGhpY3MuZ2w7XHJcblxyXG4gICAgICAgIHZhciB3aWR0aCAgPSBjYW52YXMuY2xpZW50V2lkdGgsIGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB2YXIgcmVuZGVyID0gaW5zdGFuY2Uuc3VyZmFjZS5nZXRSZW5kZXIoY2FudmFzKTtcclxuICAgICAgICBpZiAocmVuZGVyKSByZW5kZXIoZGF0YS5zdXJmYWNlKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICBnbC5yZWFkUGl4ZWxzKDAsIDAsIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgZGF0YS5pbWdEYXRhLmRhdGEuc2V0KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgY29udGV4dC5wdXRJbWFnZURhdGEoZGF0YS5pbWdEYXRhLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzY2VuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lID0ge1xyXG4gICAgICAgICAgICByb290OiBUcmVlTm9kZS5leHRlbmQoe30pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1hdCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgbWF0NC5yb3RhdGVZKG1hdCwgbWF0LCAwLjgpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zY2VuZS5yb290LmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICBwcmltaXRpdmU6IGluc3RhbmNlLmdyYXBoaWNzLmdsLlRSSUFOR0xFUyxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgICAgIG1vZGVsOiBtYXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIl19
