!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}window.extend=function(e,t){for(var n in t)if(n&&t.hasOwnProperty(n)){var r=t[n];"object"==typeof r?extend(e[n],t[n]):e[n]=t[n]}},e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t})}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};window.TreeNode=e,e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},e.extend=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1);for(var n=0;n<t.length;n++)t[n].apply(null,arguments);this.instance.logger.debug(e,arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(){},t=function(t,n){this.debug=n?console.debug.bind():e,this.info=n?console.info.bind():e,this.warn=console.warn.bind(),this.error=console.error.bind()};window.Logger=t}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=e,extend(this.options,n||{}),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this,!0),this.events=new EventHandler(this),t.prototype.modules.load(this)};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var i in t)0===t[i].dependencies.length&&r.push(i);for(;r.length>0;){var a=r[0];if(r.splice(0,1),t[a]){var s=t[a];o.push(a);for(var c=0;c<s.dependant.length;c++){var l=s.dependant[c];n(o,t[l])&&r.push(l)}}else e.events.trigger("modules.error.missing",a),e.logger.warning("Missing module '"+a+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){n=n||[],this.all[e]={dependencies:n,init:t}},load:function(n){this.instance=n,e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var i=r[o];try{this.all[i].init(n),n.events.trigger("modules.loaded",i)}catch(e){n.logger.error("Loading module "+i,e),n.events.trigger("modules.error",i,e)}}n.events.trigger("modules.loaded.all",r)},print:function(e){if(e)for(var t in this.all){var n=this.all[t];e.logger.debug("Name: ",t),e.logger.debug("\tDependencies: ",n.dependencies),e.logger.debug("\tDependant: ",n.dependant)}else console.error('Error: "load" should be called before "print"')}}}(),function(){"use strict";function e(e,n){var r=t();e.append(r)}function t(){var e=document.createElement("div");return e.className="pane-header",e}Cobweb.prototype.modules.add("pane-header",function(t){t.events.on("pane.create",function(n){e(n,t)});for(var n=t.pane.container.querySelectorAll(".pane"),r=0;r<n.length;r++)e(n[r],t)},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){if(this.types.has(n)){var r=this.types.get(n);r.onPaneType(t,e);var o=t.querySelector(".pane-header");r.onCreateHeader(o,e),t.attrData("pane-type",n)}}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t){e.events.trigger("pane.create",t)}function n(t,n){e.events.trigger("pane.split",t,n)}function r(t){e.events.trigger("pane.resize",t)}e.pane=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneCreate:t,onPaneSplit:n,onPaneResize:r}})})}(),function(){"use strict";function e(e,t){var r=document.createElement("canvas");e.append(r);var o={proj:mat4.create(),view:mat4.create()};mat4.perspective(o.proj,-45*DEG2RAD,r.width/r.height,.1,1e3),mat4.lookAt(o.view,[0,2,4],[0,0,0],[0,1,0]),mat4.scale(o.view,o.view,[1,1.2,1]),e.data("surface",o),n(e)}function t(e,t){var n=document.createElement("label");n.innerHTML="Surface Pane",e.appendChild(n)}function n(e){var t=e.querySelector("canvas"),n=t.getContext("2d"),r=e.querySelector(".pane-header"),o=r?r.height():0,i=e.width(),a=e.height()-o;e.data("buffer",new Uint8Array(i*a*4)),e.data("imgData",n.createImageData(i,a)),t.height=a,t.width=i;var s=e.data("surface");mat4.perspective(s.proj,-45*DEG2RAD,i/a,.1,1e3)}Cobweb.prototype.modules.add("surface",function(r){r.pane.types.add("surface",{onPaneType:e,onCreateHeader:t}),r.events.on("pane.resize",function(e){"surface"===e.attrData("pane-type")&&n(e)});var o=document.querySelector(".pane");r.pane.setType(o,"surface"),r.pane.setRender(o,"solid")},["pane-types","surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  gl_FragColor = u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[1,1,1,1],u_lightvector:vec3.normalize(vec3.create(),[1,2,3]),u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(i){for(var a=e.scene.root.dfs(),s=0;s<a.length;s++){var c=a[s].data;mat4.multiply(n,i.view,c.model),mat4.multiply(r,i.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive)}})},["graphics-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.pane.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("surface-render",n)},e.pane.getRender=function(t){var n=e.graphics.renders,r=t.attrData("surface-render");return n.get(r)},e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("object-interaction",function(e){e.interaction.add("object",{onMouseDown:function(t){e.logger.debug("onMouseDown",t)},onMouseUp:function(t){e.logger.debug("onMouseUp",t)},onMouseMove:function(t){e.logger.debug("onMouseMove",t)}})},["surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-interaction",function(e){e.pane.setInteraction=function(t,n){var r=e.interaction;r.has(n)&&t.attrData("surface-interaction",n)},e.pane.getInteraction=function(t){var n=e.interaction,r=t.attrData("surface-interaction");return n.get(r)},e.events.on("pane.split",function(e,t){t.attrData("surface-interaction",e.attrData("surface-interaction"))})},["interaction-mode"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=t.parent(".pane"),r=n.data("imgData"),o=n.data("surface"),i=n.data("buffer"),a=e.graphics.gl,s=t.clientWidth,c=t.clientHeight;a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,s,c);var l=e.pane.getRender(n);l&&l(o);var u=t.getContext("2d");u&&(a.readPixels(0,0,s,c,a.RGBA,a.UNSIGNED_BYTE,i),r.data.set(i),u.putImageData(r,0,0))}var t=function(t){this.instance=t,this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.4,.4,.4,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e)})}(),function(){"use strict";Cobweb.prototype.modules.add("interaction-mode",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.interaction=t})}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){e.scene={root:TreeNode.extend({})};var t=mat4.create();mat4.rotateY(t,t,.8),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,mesh:GL.Mesh.cube(),model:t})},["graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsInRyZWUuanMiLCJldmVudHMuanMiLCJsb2dnZXIuanMiLCJjb2J3ZWIuanMiLCJtb2R1bGVzLmpzIiwicGFuZS9wYW5lLWhlYWRlci5qcyIsInBhbmUvcGFuZS10eXBlcy5qcyIsInBhbmUvcGFuZXMuanMiLCJwYW5lL3N1cmZhY2Uvc3VyZmFjZS5qcyIsInBhbmUvc3VyZmFjZS9yZW5kZXIvcmVuZGVyLXNvbGlkLmpzIiwicGFuZS9zdXJmYWNlL3JlbmRlci9zdXJmYWNlLXJlbmRlci5qcyIsInBhbmUvc3VyZmFjZS9pbnRlcmFjdGlvbi9vYmplY3QtaW50ZXJhY3Rpb24uanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24vc3VyZmFjZS1pbnRlcmFjdGlvbi5qcyIsImdyYXBoaWMtcmVuZGVyLmpzIiwiZ3JhcGhpYy5qcyIsImludGVyYWN0aW9uLW1vZGVzLmpzIiwic2NlbmUuanMiXSwibmFtZXMiOlsic2FmZUV4dGVuZCIsInByb3RvdHlwZSIsInByb3BlcnR5IiwidmFsdWUiLCJBcnJheSIsImEiLCJ0aGlzIiwiY29uY2F0IiwiaSIsImxlbmd0aCIsImoiLCJzcGxpY2UiLCJjYWxsYmFjayIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJIVE1MRWxlbWVudCIsIm9sZENsYXNzTmFtZXMiLCJuZXdDbGFzc05hbWVzIiwiYXJndW1lbnRzIiwiY2xhc3NOYW1lIiwidHJpbSIsInJlcGxhY2UiLCJzcGxpdCIsInVuaXF1ZSIsImpvaW4iLCJxdWVyeUNsYXNzTmFtZXMiLCJjdXJyZW50Q2xhc3NOYW1lcyIsImluZGV4IiwibmFtZSIsImluZGV4T2YiLCJyZW1vdmVDbGFzc05hbWVzIiwicmVtb3ZlRWFjaCIsImZvckVhY2giLCJhdHRyIiwid2luZG93IiwiX19kYXRhX2NhY2hlIiwiV2Vha01hcCIsImVsQXR0cnMiLCJnZXQiLCJ1bmRlZmluZWQiLCJzZXQiLCJkYXRhIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiRWxlbWVudCIsIm1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJtYXRjaGVzIiwiZG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJxdWVyeSIsInBhcmVudEVsZW1lbnQiLCJjdXJyZW50IiwiY2xpZW50SGVpZ2h0Iiwic3R5bGUiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsIndpZHRoIiwiZ3VpZCIsIm92ZXJsYXAiLCJxdWVyeVNlbGVjdG9yIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJwcm9wZXJ0aWVzIiwiaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJvYmoiLCJuZXdPYmoiLCJjbG9uZSIsIlRyZWVOb2RlIiwicGFyZW50IiwiY2hpbGRyZW4iLCJpc1Jvb3QiLCJhZGQiLCJjaGlsZCIsImNvbnN0cnVjdG9yIiwicHVzaCIsInJlbW92ZSIsInNsaWNlIiwiZGZzIiwiY2hlY2siLCJvdXQiLCJiZnMiLCJfVHJlZU5vZGUiLCJjYWxsIiwiY3JlYXRlIiwiRXZlbnRIYW5kbGVyIiwiaW5zdGFuY2UiLCJsaXN0ZW5lcnMiLCJ0cmlnZ2VyIiwiYXBwbHkiLCJsb2dnZXIiLCJkZWJ1ZyIsIm9uIiwib2ZmIiwiYXJyYXkiLCJlbXB0eUZ1bmN0aW9uIiwiTG9nZ2VyIiwiaXNEZWJ1ZyIsImNvbnNvbGUiLCJiaW5kIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsImRlZmF1bHRPcHRpb25zIiwiY29udGFpbmVyIiwic2VsZWN0b3IiLCJDb2J3ZWIiLCJvcHRpb25zIiwiRXJyb3IiLCJhZGRDbGFzcyIsImV2ZW50cyIsIm1vZHVsZXMiLCJsb2FkIiwiYWRkUmV2ZXJzZURlcGVuZGVuY2llcyIsIm1vZHVsZSIsImRlcGVuZGFudCIsImRlcGVuZGVuY2llcyIsImRlcFBsdWdpbiIsInRvcG9sb2dpY2FsU29ydCIsImNhbmRpZGF0ZXMiLCJzb3J0ZWROYW1lcyIsIm5leHROYW1lIiwiZGVwTmFtZSIsImFsbERlcGVuZGVuY2llc01ldCIsIndhcm5pbmciLCJrZXlzIiwibG9hZGVkVW50aWxOb3ciLCJhbGwiLCJpbml0IiwiZXgiLCJwcmludCIsIm9uQ3JlYXRlQ2FsbGJhY2siLCJwYW5lIiwiaGVhZGVyIiwiY3JlYXRlSGVhZGVyIiwiYXBwZW5kIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInBhbmVzIiwicGFuZVR5cGVzIiwiY2FsbGJhY2tzIiwiaGFzIiwib2xkUGFuZSIsIm5ld1BhbmUiLCJvbGRUeXBlIiwiYXR0ckRhdGEiLCJzZXRUeXBlIiwidHlwZXMiLCJ0eXBlQ2FsbGJhY2tzIiwib25QYW5lVHlwZSIsInBhbmVIZWFkZXIiLCJvbkNyZWF0ZUhlYWRlciIsIm9uUGFuZUNyZWF0ZSIsIm9uUGFuZVNwbGl0Iiwib3JpZ2luIiwib25QYW5lUmVzaXplIiwiUGFuZSIsInNlcGFyYXRvciIsInNpemUiLCJvblN1cmZhY2VQYW5lVHlwZSIsImNhbnZhcyIsInByb2oiLCJtYXQ0IiwidmlldyIsInBlcnNwZWN0aXZlIiwiREVHMlJBRCIsImxvb2tBdCIsInNjYWxlIiwidXBkYXRlQ2FudmFzU2l6ZSIsIm9uQ3JlYXRlU3VyZmFjZUhlYWRlciIsImxhYmVsIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImhlYWRlckhlaWdodCIsIlVpbnQ4QXJyYXkiLCJjcmVhdGVJbWFnZURhdGEiLCJyb290Iiwic2V0UmVuZGVyIiwic2hhZGVyIiwiU2hhZGVyIiwidGVtcCIsIm12cCIsInVuaWZvcm1zIiwidV9jb2xvciIsInVfbGlnaHR2ZWN0b3IiLCJ2ZWMzIiwibm9ybWFsaXplIiwidV9tb2RlbCIsInVfbXZwIiwiZ3JhcGhpY3MiLCJyZW5kZXJzIiwic3VyZmFjZSIsIm9ianMiLCJzY2VuZSIsIm11bHRpcGx5IiwibW9kZWwiLCJkcmF3IiwibWVzaCIsInByaW1pdGl2ZSIsImdldFJlbmRlciIsImludGVyYWN0aW9uIiwib25Nb3VzZURvd24iLCJldmVudCIsIm9uTW91c2VVcCIsIm9uTW91c2VNb3ZlIiwic2V0SW50ZXJhY3Rpb24iLCJpbnRlcmFjdGlvbnMiLCJnZXRJbnRlcmFjdGlvbiIsImRyYXdSZW5kZXJUYXJnZXQiLCJpbWFnZURhdGEiLCJidWZmZXIiLCJnbCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJ2aWV3cG9ydCIsInJlbmRlciIsInJlYWRQaXhlbHMiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInB1dEltYWdlRGF0YSIsIkdyYXBoaWNzIiwiR0wiLCJzY3JlZW4iLCJhbmltYXRlIiwib25kcmF3IiwicmVuZGVyVGFyZ2V0cyIsImNsZWFyQ29sb3IiLCJlbmFibGUiLCJERVBUSF9URVNUIiwiaW50ZXJhY3Rpb25Nb2RlcyIsIm1hdCIsInJvdGF0ZVkiLCJ0eXBlIiwiVFJJQU5HTEVTIiwiTWVzaCIsImN1YmUiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFlQSxTQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBQyxLQUFBRCxFQUFBQyxHQUFBQyxHQWRBSCxFQUFBSSxNQUFBSCxVQUFBLFNBQUEsV0FFQSxJQUFBLEdBREFJLEdBQUFDLEtBQUFDLFNBQ0FDLEVBQUEsRUFBQUEsRUFBQUgsRUFBQUksU0FBQUQsRUFDQSxJQUFBLEdBQUFFLEdBQUFGLEVBQUEsRUFBQUUsRUFBQUwsRUFBQUksU0FBQUMsRUFDQUwsRUFBQUcsS0FBQUgsRUFBQUssSUFBQUwsRUFBQU0sT0FBQUQsSUFBQSxFQUNBLE9BQUFMLEtBR0FMLEVBQUFJLE1BQUFILFVBQUEsVUFBQSxTQUFBVyxHQUNBLElBQUEsR0FBQUosR0FBQSxFQUFBQSxFQUFBRixLQUFBRyxPQUFBRCxJQUNBSSxFQUFBTixLQUFBRSxHQUFBQSxFQUFBRixXQ2JBLFdBQ0EsWUFrSUEs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LFNBQUF6SCxHQUNBLFFBQUExQixLQUFBcUksSUFBQTNHLElBSUFrRSxHQUFBb0gsWUFBQThCLE9DcEJBLFdBQ0EsWUFFQTlILFFBQUFySCxVQUFBMEgsUUFBQXZDLElBQUEsUUFBQSxTQUFBYyxHQUNBQSxFQUFBNkcsT0FDQWpCLEtBQUE5RyxTQUFBUixXQUdBLElBQUE2SyxHQUFBdkUsS0FBQTlFLFFBQ0E4RSxNQUFBd0UsUUFBQUQsRUFBQUEsRUFBQSxJQUVBbkosRUFBQTZHLE1BQUFqQixLQUFBMUcsS0FDQW1LLEtBQUEsU0FDQW5DLFVBQUFsSCxFQUFBeUcsU0FBQXNCLEdBQUF1QixVQUNBckMsS0FBQXlCLEdBQUFhLEtBQUFDLE9BQ0F6QyxNQUFBb0MsTUFFQSIsImZpbGUiOiJjb2J3ZWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAndW5pcXVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNvbmNhdCgpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICBmb3IodmFyIGogPSBpICsgMTsgaiA8IGEubGVuZ3RoOyArK2opXHJcbiAgICAgICAgICAgICAgICBpZihhW2ldID09PSBhW2pdKSBhLnNwbGljZShqLS0sIDEpO1xyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChBcnJheS5wcm90b3R5cGUsICdmb3JFYWNoJywgZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhZGRDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb2xkQ2xhc3NOYW1lcywgbmV3Q2xhc3NOYW1lcztcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgb2xkQ2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBuZXdDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBvbGRDbGFzc05hbWVzLmNvbmNhdChuZXdDbGFzc05hbWVzKS51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoYXNDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcXVlcnlDbGFzc05hbWVzLCBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBxdWVyeUNsYXNzTmFtZXMgPSAhYXJndW1lbnRzW2ldID8gW10gOiBhcmd1bWVudHNbaV0udHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcXVlcnlDbGFzc05hbWVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBxdWVyeUNsYXNzTmFtZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdyZW1vdmVDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwLCBjdXJyZW50Q2xhc3NOYW1lcywgcmVtb3ZlQ2xhc3NOYW1lcztcclxuICAgICAgICB2YXIgcmVtb3ZlRWFjaCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gY3VycmVudENsYXNzTmFtZXMuaW5kZXhPZihuYW1lKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcy5mb3JFYWNoKHJlbW92ZUVhY2gpO1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGN1cnJlbnRDbGFzc05hbWVzLnVuaXF1ZSgpLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2RhdGEnLCBmdW5jdGlvbiAoYXR0ciwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHZhciBlbEF0dHJzID0gd2luZG93Ll9fZGF0YV9jYWNoZS5nZXQodGhpcykgfHwge307XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWxBdHRyc1thdHRyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB3aW5kb3cuX19kYXRhX2NhY2hlLnNldCh0aGlzLCBlbEF0dHJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYXR0cikgcmV0dXJuIGVsQXR0cnMgJiYgZWxBdHRyc1thdHRyXTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gZWxBdHRycztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICghd2luZG93Ll9fZGF0YV9jYWNoZSkgd2luZG93Ll9fZGF0YV9jYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHInLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYXR0ckRhdGEnLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKCdkYXRhLScgKyBuYW1lLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLCAnbWF0Y2hlcycsXHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHxcclxuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcclxuICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gdGhpcykge31cclxuICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncGFyZW50JywgZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB3aGlsZSAoIWN1cnJlbnQubWF0Y2hlcyhxdWVyeSkpXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hlaWdodCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICd3aWR0aCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWUgKyAncHgnO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudFdpZHRoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZCh3aW5kb3csICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnR1VJRC0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBndWlkID0gbnVsbCwgb3ZlcmxhcCA9IG51bGw7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBndWlkID0gd2luZG93Lmd1aWQoKTtcclxuICAgICAgICAgICAgb3ZlcmxhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ3VpZCk7XHJcbiAgICAgICAgfSB3aGlsZShvdmVybGFwKTtcclxuICAgICAgICB0aGlzLmF0dHIoJ2lkJywgZ3VpZCk7XHJcbiAgICAgICAgcmV0dXJuIGd1aWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlRXh0ZW5kKHByb3RvdHlwZSwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXByb3RvdHlwZVtwcm9wZXJ0eV0pIHByb3RvdHlwZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzNCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgd2luZG93LmV4dGVuZCA9IGZ1bmN0aW9uIChkZWZhdWx0cywgcHJvcGVydGllcykge1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmQoZGVmYXVsdHNbcHJvcGVydHldLCBwcm9wZXJ0aWVzW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdHNbcHJvcGVydHldID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2FmZUV4dGVuZChPYmplY3QsICdjbG9uZScsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIgbmV3T2JqID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqKVxyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBPYmplY3QuY2xvbmUob2JqW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqW3Byb3BlcnR5XSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3T2JqO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgVHJlZU5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5UcmVlTm9kZSA9IFRyZWVOb2RlO1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcywgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmRmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5kZnMoY2hlY2spKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmJmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXSwgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5iZnMoY2hlY2spKTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5leHRlbmQgPSBmdW5jdGlvbiAoZGVmYXVsdHMpIHtcclxuICAgICAgICB2YXIgX1RyZWVOb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICBUcmVlTm9kZS5jYWxsKHRoaXMsIHBhcmVudCwgZGF0YSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBfVHJlZU5vZGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShUcmVlTm9kZS5wcm90b3R5cGUpO1xyXG4gICAgICAgIF9UcmVlTm9kZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBfVHJlZU5vZGU7XHJcbiAgICAgICAgZXh0ZW5kKF9UcmVlTm9kZS5wcm90b3R5cGUsIGRlZmF1bHRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IF9UcmVlTm9kZShudWxsKTtcclxuICAgIH07XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW25hbWVdIHx8IFtdO1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmxvZ2dlci5kZWJ1ZyhuYW1lLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW25hbWVdKSB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW25hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNbbmFtZV0pIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmIChhcnJheS5pbmRleE9mKGNhbGxiYWNrKSA+IC0xKSBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkV2ZW50SGFuZGxlciA9IEV2ZW50SGFuZGxlcjtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZW1wdHlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgIHZhciBMb2dnZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGlzRGVidWcpIHtcclxuICAgICAgICB0aGlzLmRlYnVnID0gaXNEZWJ1ZyA/IGNvbnNvbGUuZGVidWcuYmluZCgpIDogZW1wdHlGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvID0gaXNEZWJ1ZyA/IGNvbnNvbGUuaW5mby5iaW5kKCkgOiBlbXB0eUZ1bmN0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLndhcm4gPSBjb25zb2xlLndhcm4uYmluZCgpO1xyXG5cclxuICAgICAgICB0aGlzLmVycm9yID0gY29uc29sZS5lcnJvci5iaW5kKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5Mb2dnZXIgPSBMb2dnZXI7XHJcbn0pKCkpO1xyXG4iLCIoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgY29udGFpbmVyOiB7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnI2NvYndlYicsXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NiLWNvbnRhaW5lcidcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBDb2J3ZWIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbnRhaW5lciBzZWxlY3RvcjogXFwnJyArXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yICsgJ1xcJycpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jb250YWluZXIuY2xhc3NOYW1lKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5kYXRhKCdpbnN0YW5jZScsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIodGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRIYW5kbGVyKHRoaXMpO1xyXG4gICAgICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5sb2FkKHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuQ29id2ViID0gQ29id2ViO1xyXG59KCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMgPSB7XHJcbiAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBpbml0LCBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IGRlcGVuZGVuY2llcyxcclxuICAgICAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGFkZFJldmVyc2VEZXBlbmRlbmNpZXModGhpcy5hbGwpO1xyXG4gICAgICAgICAgICB2YXIgc29ydGVkTmFtZXMgPSB0b3BvbG9naWNhbFNvcnQoaW5zdGFuY2UsIHRoaXMuYWxsKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3J0ZWROYW1lcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gc29ydGVkTmFtZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdLmluaXQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmxvYWRlZCcsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0xvYWRpbmcgbW9kdWxlICcgKyBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3InLCBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMubG9hZGVkLmFsbCcsIHNvcnRlZE5hbWVzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByaW50OiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnTmFtZTogJywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdcXHREZXBlbmRlbmNpZXM6ICcsIG1vZHVsZS5kZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnXFx0RGVwZW5kYW50OiAnLCBtb2R1bGUuZGVwZW5kYW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBcImxvYWRcIiBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBcInByaW50XCInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkUmV2ZXJzZURlcGVuZGVuY2llcyAobW9kdWxlcykge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbW9kdWxlcykge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKCFtb2R1bGUuZGVwZW5kYW50KSBtb2R1bGUuZGVwZW5kYW50ID0gW107XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBQbHVnaW4gPSBtb2R1bGVzW21vZHVsZS5kZXBlbmRlbmNpZXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVwUGx1Z2luLmRlcGVuZGFudCkgZGVwUGx1Z2luLmRlcGVuZGFudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlcFBsdWdpbi5kZXBlbmRhbnQucHVzaChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b3BvbG9naWNhbFNvcnQgKGluc3RhbmNlLCBtb2R1bGVzKSB7XHJcbiAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSBbXSwgc29ydGVkTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1vZHVsZXMpXHJcbiAgICAgICAgICAgIGlmIChtb2R1bGVzW25hbWVdLmRlcGVuZGVuY2llcy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2gobmFtZSk7XHJcbiAgICAgICAgd2hpbGUgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgbmV4dE5hbWUgPSBjYW5kaWRhdGVzWzBdO1xyXG4gICAgICAgICAgICBjYW5kaWRhdGVzLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgaWYgKG1vZHVsZXNbbmV4dE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuZXh0TmFtZV07XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWROYW1lcy5wdXNoKG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGFudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBOYW1lID0gbW9kdWxlLmRlcGVuZGFudFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRGVwZW5kZW5jaWVzTWV0KHNvcnRlZE5hbWVzLCBtb2R1bGVzW2RlcE5hbWVdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGRlcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3IubWlzc2luZycsIG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci53YXJuaW5nKCdNaXNzaW5nIG1vZHVsZSBcXCcnICsgbmV4dE5hbWUgKyAnXFwnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1vZHVsZXMpLmxlbmd0aCAhPT0gc29ydGVkTmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yLmN5Y2xlJyk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5lcnJvcignRGVwZW5kZW5jeSBjeWNsZSBmb3VuZCBpbiBtb2R1bGVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzb3J0ZWROYW1lcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhbGxEZXBlbmRlbmNpZXNNZXQgKGxvYWRlZFVudGlsTm93LCBtb2R1bGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmIChsb2FkZWRVbnRpbE5vdy5pbmRleE9mKG1vZHVsZS5kZXBlbmRlbmNpZXNbaV0pID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZS1oZWFkZXInLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuY3JlYXRlJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgb25DcmVhdGVDYWxsYmFjayhwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBwYW5lcyA9IGluc3RhbmNlLnBhbmUuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYW5lJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgb25DcmVhdGVDYWxsYmFjayhwYW5lc1tpXSwgaW5zdGFuY2UpO1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uQ3JlYXRlQ2FsbGJhY2sgKHBhbmUsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlciA9IGNyZWF0ZUhlYWRlcigpO1xyXG4gICAgICAgIHBhbmUuYXBwZW5kKGhlYWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlSGVhZGVyICgpIHtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICdwYW5lLWhlYWRlcic7XHJcbiAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3BhbmUtdHlwZXMnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgcGFuZVR5cGVzID0ge1xyXG4gICAgICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2tzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICB2YXIgb2xkVHlwZSA9IG9sZFBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScpO1xyXG4gICAgICAgICAgICBpZiAob2xkVHlwZSkgaW5zdGFuY2UucGFuZS5zZXRUeXBlKG5ld1BhbmUsIG9sZFR5cGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzID0gcGFuZVR5cGVzO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnNldFR5cGUgPSBmdW5jdGlvbiAocGFuZSwgbmFtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50eXBlcy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eXBlQ2FsbGJhY2tzID0gdGhpcy50eXBlcy5nZXQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FsbGJhY2tzLm9uUGFuZVR5cGUocGFuZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhbmVIZWFkZXIgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJy5wYW5lLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgdHlwZUNhbGxiYWNrcy5vbkNyZWF0ZUhlYWRlcihwYW5lSGVhZGVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnLCBuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ3BhbmUnXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZSA9IG5ldyBQYW5lKHtcclxuICAgICAgICAgICAgY29udGFpbmVyOiBpbnN0YW5jZS5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvcixcclxuICAgICAgICAgICAgc2VwYXJhdG9yOiB7XHJcbiAgICAgICAgICAgICAgICBzaXplOiAzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrczoge1xyXG4gICAgICAgICAgICAgICAgb25QYW5lQ3JlYXRlOiBvblBhbmVDcmVhdGUsXHJcbiAgICAgICAgICAgICAgICBvblBhbmVTcGxpdDogb25QYW5lU3BsaXQsXHJcbiAgICAgICAgICAgICAgICBvblBhbmVSZXNpemU6IG9uUGFuZVJlc2l6ZSxcclxuICAgICAgICAgICAgICAgIC8vb25QYW5lTWVyZ2U6IG9uUGFuZU1lcmdlLFxyXG4gICAgICAgICAgICAgICAgLy9vblBhbmVEZXN0cm95OiBvblBhbmVEZXN0cm95LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZUNyZWF0ZSAocGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5jcmVhdGUnLCBwYW5lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZVNwbGl0IChvcmlnaW4sIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUuc3BsaXQnLCBvcmlnaW4sIG5ld1BhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lUmVzaXplIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwYW5lLnJlc2l6ZScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lTWVyZ2UgKG1lcmdlciwgdG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygnb25QYW5lTWVyZ2UnLCBtZXJnZXIsIHRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGFuZURlc3Ryb3kgKHBhbmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1Zygnb25QYW5lRGVzdHJveScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnc3VyZmFjZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUudHlwZXMuYWRkKCdzdXJmYWNlJywge1xyXG4gICAgICAgICAgICBvblBhbmVUeXBlOiBvblN1cmZhY2VQYW5lVHlwZSxcclxuICAgICAgICAgICAgb25DcmVhdGVIZWFkZXI6IG9uQ3JlYXRlU3VyZmFjZUhlYWRlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUucmVzaXplJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgaWYgKHBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScpID09PSAnc3VyZmFjZScpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhbnZhc1NpemUocGFuZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZScpO1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0VHlwZShyb290LCAnc3VyZmFjZScpO1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0UmVuZGVyKHJvb3QsICdzb2xpZCcpO1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJywgJ3N1cmZhY2UtcmVuZGVyJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uU3VyZmFjZVBhbmVUeXBlIChwYW5lLCBpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBwYW5lLmFwcGVuZChjYW52YXMpO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgcHJvajogbWF0NC5jcmVhdGUoKSxcclxuICAgICAgICAgICAgdmlldzogbWF0NC5jcmVhdGUoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShkYXRhLnByb2osIC00NSAqIERFRzJSQUQsXHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHQsIDAuMSwgMTAwMCk7XHJcbiAgICAgICAgbWF0NC5sb29rQXQoZGF0YS52aWV3LCBbMCwyLDRdLCBbMCwwLDBdLCBbMCwxLDBdKTtcclxuICAgICAgICBtYXQ0LnNjYWxlKGRhdGEudmlldywgZGF0YS52aWV3LCBbMSwxLjIsMV0pO1xyXG4gICAgICAgIHBhbmUuZGF0YSgnc3VyZmFjZScsIGRhdGEpO1xyXG4gICAgICAgIHVwZGF0ZUNhbnZhc1NpemUocGFuZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25DcmVhdGVTdXJmYWNlSGVhZGVyIChoZWFkZXIsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnU3VyZmFjZSBQYW5lJztcclxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUgKHBhbmUpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gcGFuZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICB2YXIgaGVhZGVyID0gcGFuZS5xdWVyeVNlbGVjdG9yKCcucGFuZS1oZWFkZXInKTtcclxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0ID0gaGVhZGVyID8gaGVhZGVyLmhlaWdodCgpIDogMDtcclxuXHJcbiAgICAgICAgdmFyIHdpZHRoID0gcGFuZS53aWR0aCgpLCBoZWlnaHQgPSBwYW5lLmhlaWdodCgpIC0gaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgIHBhbmUuZGF0YSgnYnVmZmVyJywgbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KSk7XHJcbiAgICAgICAgcGFuZS5kYXRhKCdpbWdEYXRhJywgY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCkpO1xyXG5cclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHBhbmUuZGF0YSgnc3VyZmFjZScpO1xyXG4gICAgICAgIG1hdDQucGVyc3BlY3RpdmUoZGF0YS5wcm9qLCAtNDUgKiBERUcyUkFELCB3aWR0aCAvIGhlaWdodCwgMC4xLCAxMDAwKTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3JlbmRlci1zb2xpZCcsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKFxyXG4gICAgICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgYV92ZXJ0ZXg7JyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X212cDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X21vZGVsOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICAgIHZfbm9ybWFsID0gKHVfbW9kZWwgKiB2ZWM0KGFfbm9ybWFsLDAuMCkpLnh5ejsnICtcclxuICAgICAgICAgICAgJyAgICBnbF9Qb3NpdGlvbiA9IHVfbXZwICogdmVjNChhX3ZlcnRleCwxLjApOycgK1xyXG4gICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzMgdV9saWdodHZlY3RvcjsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjNCB1X2NvbG9yOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICB2ZWMzIE4gPSBub3JtYWxpemUodl9ub3JtYWwpOycgK1xyXG4gICAgICAgICAgICAnICBnbF9GcmFnQ29sb3IgPSB1X2NvbG9yICogbWF4KDAuMCwgZG90KHVfbGlnaHR2ZWN0b3IsTikpOycgK1xyXG4gICAgICAgICAgICAnfSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgdmFyIG12cCA9IG1hdDQuY3JlYXRlKCk7XHJcblxyXG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHtcclxuICAgICAgICAgICAgdV9jb2xvcjogWzEsIDEsIDEsIDFdLFxyXG4gICAgICAgICAgICB1X2xpZ2h0dmVjdG9yOiB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyZWF0ZSgpLCBbMSwgMiwgM10pLFxyXG4gICAgICAgICAgICB1X21vZGVsOiBudWxsLFxyXG4gICAgICAgICAgICB1X212cDogbXZwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycy5hZGQoJ3NvbGlkJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgdmFyIG9ianMgPSBpbnN0YW5jZS5zY2VuZS5yb290LmRmcygpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9ianMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSBvYmpzW2ldLmRhdGE7XHJcbiAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KHRlbXAsIHN1cmZhY2Uudmlldywgb2JqLm1vZGVsKTtcclxuICAgIFx0XHRcdG1hdDQubXVsdGlwbHkobXZwLCBzdXJmYWNlLnByb2osIHRlbXApO1xyXG5cclxuICAgIFx0XHRcdHVuaWZvcm1zLnVfbW9kZWwgPSBvYmoubW9kZWw7XHJcbiAgICBcdFx0XHRzaGFkZXIudW5pZm9ybXModW5pZm9ybXMpLmRyYXcob2JqLm1lc2gsIG9iai5wcmltaXRpdmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSwgWydncmFwaGljcy1yZW5kZXInXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0UmVuZGVyID0gZnVuY3Rpb24gKHBhbmUsIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcnMgPSBpbnN0YW5jZS5ncmFwaGljcy5yZW5kZXJzO1xyXG4gICAgICAgICAgICBpZiAocmVuZGVycy5oYXMobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdzdXJmYWNlLXJlbmRlcicsIG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuZ2V0UmVuZGVyID0gZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcnMgPSBpbnN0YW5jZS5ncmFwaGljcy5yZW5kZXJzO1xyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IHBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBuZXdQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLXJlbmRlcicsIG9sZFBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydncmFwaGljcy1yZW5kZXInXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdvYmplY3QtaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuaW50ZXJhY3Rpb24uYWRkKCdvYmplY3QnLCB7XHJcbiAgICAgICAgICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1Zygnb25Nb3VzZURvd24nLCBldmVudCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VVcDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uTW91c2VVcCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdvbk1vdXNlTW92ZScsIGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0sIFsnc3VyZmFjZS1yZW5kZXInXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChwYW5lLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSBpbnN0YW5jZS5pbnRlcmFjdGlvbjtcclxuICAgICAgICAgICAgaWYgKGludGVyYWN0aW9ucy5oYXMobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJywgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5nZXRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSBpbnN0YW5jZS5pbnRlcmFjdGlvbjtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBwYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcmFjdGlvbnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nLCBvbGRQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgWydpbnRlcmFjdGlvbi1tb2RlJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnZ3JhcGhpY3MtcmVuZGVyJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycyA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEdyYXBoaWNzID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuZ2wgPSBHTC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBoZWlnaHQ6IHNjcmVlbi5oZWlnaHQsXHJcbiAgICAgICAgICAgIHdpZHRoOiBzY3JlZW4ud2lkdGhcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdsLmFuaW1hdGUoKTtcclxuICAgICAgICB0aGlzLmdsLm9uZHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlclRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW5kZXJUYXJnZXRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZHJhd1JlbmRlclRhcmdldChpbnN0YW5jZSwgcmVuZGVyVGFyZ2V0c1tpXSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdsLmNsZWFyQ29sb3IoMC40LCAwLjQsIDAuNCwgMSk7XHJcbiAgICAgICAgdGhpcy5nbC5lbmFibGUodGhpcy5nbC5ERVBUSF9URVNUKTtcclxuICAgIH07XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnZ3JhcGhpY3MnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IG5ldyBHcmFwaGljcyhpbnN0YW5jZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3UmVuZGVyVGFyZ2V0IChpbnN0YW5jZSwgY2FudmFzKSB7XHJcbiAgICAgICAgdmFyIHBhbmUgPSBjYW52YXMucGFyZW50KCcucGFuZScpO1xyXG4gICAgICAgIHZhciBpbWFnZURhdGEgPSBwYW5lLmRhdGEoJ2ltZ0RhdGEnKTtcclxuICAgICAgICB2YXIgc3VyZmFjZSA9IHBhbmUuZGF0YSgnc3VyZmFjZScpO1xyXG4gICAgICAgIHZhciBidWZmZXIgPSBwYW5lLmRhdGEoJ2J1ZmZlcicpO1xyXG4gICAgICAgIHZhciBnbCA9IGluc3RhbmNlLmdyYXBoaWNzLmdsO1xyXG5cclxuICAgICAgICB2YXIgd2lkdGggID0gY2FudmFzLmNsaWVudFdpZHRoLCBoZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcclxuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgdmFyIHJlbmRlciA9IGluc3RhbmNlLnBhbmUuZ2V0UmVuZGVyKHBhbmUpO1xyXG4gICAgICAgIGlmIChyZW5kZXIpIHJlbmRlcihzdXJmYWNlKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICBnbC5yZWFkUGl4ZWxzKDAsIDAsIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhLnNldChidWZmZXIpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2ludGVyYWN0aW9uLW1vZGUnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgaW50ZXJhY3Rpb25Nb2RlcyA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbk1vZGVzO1xyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzY2VuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lID0ge1xyXG4gICAgICAgICAgICByb290OiBUcmVlTm9kZS5leHRlbmQoe30pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1hdCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgbWF0NC5yb3RhdGVZKG1hdCwgbWF0LCAwLjgpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zY2VuZS5yb290LmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICBwcmltaXRpdmU6IGluc3RhbmNlLmdyYXBoaWNzLmdsLlRSSUFOR0xFUyxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgICAgIG1vZGVsOiBtYXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIl19
