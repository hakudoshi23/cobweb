!function(){"use strict";function e(e){a(e||{},i);var t=new XMLHttpRequest;if(t.onreadystatechange=function(){4==this.readyState&&(200==this.status?e.success&&e.success(this.response):e.error&&error.success(this.response))},"GET"===e.method){var n=o(e.data),r=e.url+(n?"?"+n:"");t.open(e.method,r,e.async),t.send()}else"POST"===e.method&&(t.open(e.method,e.url,e.async),t.send(e.data));return t}function t(e,t,n){return Ajax.ajax({url:e,data:t,success:n,method:"GET"})}function n(e,t,n){return Ajax.ajax({url:e,data:t,success:function(e){n(JSON.parse(e))},method:"GET"})}function r(e,t,n){return Ajax.ajax({url:e,data:t,success:n,method:"POST"})}function o(e){var t="";for(var n in e){var r=n+"="+encodeURIComponent(e[n]);t+="&"+r}return t.slice(1)}function a(e,t){for(var n in t)if(n&&t.hasOwnProperty(n)){var r=t[n];"object"==typeof r?e[n]?a(e[n],r):e[n]=r:"undefined"==typeof e[n]&&(e[n]=r)}}var i={method:"GET",url:"",data:{},async:!0,success:null,error:null};window.Ajax={ajax:e,get:t,getJSON:n,post:r}}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(e,n){for(var r in n)if(r&&n.hasOwnProperty(r)){var o=n[r];"object"==typeof o?e[r]?t(e[r],o):e[r]=o:"undefined"==typeof e[r]&&(e[r]=o)}}e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t}),window.extend=t}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};window.TreeNode=e,e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},e.extend=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(){this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1),console.debug(e,arguments);for(var n=0;n<t.length;n++)t[n].apply(null,arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(t){this.handlers=[],this.addHandler(this.level.ALL,function(t,n){e.prototype.level.DEBUG===t?console.debug.apply(this,n):e.prototype.level.INFO===t?console.info.apply(this,n):e.prototype.level.WARNING===t?console.warn.apply(this,n):e.prototype.level.ERROR===t&&console.error.apply(this,n)})};e.prototype.debug=function(){this.log(e.prototype.level.DEBUG,arguments)},e.prototype.info=function(){this.log(e.prototype.level.INFO,arguments)},e.prototype.warning=function(){this.log(e.prototype.level.WARNING,arguments)},e.prototype.error=function(){this.log(e.prototype.level.ERROR,arguments)},e.prototype.log=function(e,t){for(var n=e,r=this.handlers[n]||[];n>=0;)r.forEach(function(n){n(e,t)}),r=this.handlers[--n]||[]},e.prototype.addHandler=function(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},e.prototype.removeHandler=function(e,t){var n=this.handlers[e];if(n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.level={ALL:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4,NONE:5},window.Logger=e}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=n||{},extend(this.options,e),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this,!0),this.events=new EventHandler(this),t.prototype.modules.load(this),this.events.trigger("app.loaded")};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var a in t)0===t[a].dependencies.length&&r.push(a);for(;r.length>0;){var i=r[0];if(r.splice(0,1),t[i]){var s=t[i];o.push(i);for(var c=0;c<s.dependant.length;c++){var u=s.dependant[c];n(o,t[u])&&r.push(u)}}else e.events.trigger("modules.error.missing",i),e.logger.warning("Missing module '"+i+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){n=n||[],this.all[e]={dependencies:n,init:t}},load:function(n){this.instance=n,e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var a=r[o];try{this.all[a].init(n),n.events.trigger("modules.loaded",a)}catch(e){n.logger.error("Loading module "+a,e),n.events.trigger("modules.error",a,e)}}n.events.trigger("modules.loaded.all",r)}}}(),function(){"use strict";function e(e,n){var r=t();e.append(r)}function t(){var e=document.createElement("div");return e.className="pane-header",e}Cobweb.prototype.modules.add("pane-header",function(t){t.events.on("pane.create",function(n){e(n,t)})},["pane-types"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){if(this.types.has(n)){var r=this.types.get(n);r.onPaneType(t,e);var o=t.querySelector(".pane-header");r.onCreateHeader(o,e),t.dataset.paneType=n}},e.pane.getType=function(e){return e.dataset.paneType}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t){e.events.trigger("pane.create",t)}function n(t,n){e.events.trigger("pane.split",t,n)}function r(t){e.events.trigger("pane.resize",t)}e.events.on("app.loaded",function(){e.pane.internal=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneCreate:t,onPaneSplit:n,onPaneResize:r}});var o=e.pane.internal.container.querySelector(".pane");e.pane.setType(o,"surface")}),e.pane={}})}(),function(){"use strict";Cobweb.prototype.modules.add("interaction-mode",function(e){e.surface.interaction={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["surface"])}(),function(){"use strict";function e(e,t){var o=document.createElement("canvas");o.id="surface"+r++,o.className="surface",e.append(o),t.surface.map=t.surface.map||{},t.surface.map[o.id]={},t.surface.map[o.id].surface={proj:mat4.create(),center:[0,0,0],rotation:[0,-.4],distance:5,getViewMatrix:function(e){var t=[0,0,0];this.getCameraPosition(t),mat4.lookAt(e,t,this.center,[0,1,0])},getCameraPosition:function(e){e[2]=-this.distance,vec3.rotateX(e,e,this.rotation[1]),vec3.rotateY(e,e,-this.rotation[0]),vec3.add(e,e,this.center)}},n(t,e),t.events.trigger("surface.create",o)}function t(e,t){var n=document.createElement("label");n.innerHTML="Surface Pane",e.appendChild(n)}function n(e,t){var n=t.querySelector("canvas"),r=n.getContext("2d"),o=e.surface.map[n.id],a=t.querySelector(".pane-header"),i=a?a.height():0,s=t.width(),c=t.height()-i;o.imgData=r.createImageData(s,c),o.buffer=new Uint8Array(s*c*4),n.height=c,n.width=s,mat4.perspective(o.surface.proj,45*DEG2RAD,s/c,.1,1e3)}var r=0;Cobweb.prototype.modules.add("surface",function(r){r.pane.types.add("surface",{onPaneType:e,onCreateHeader:t}),r.events.on("pane.resize",function(e){"surface"===e.attrData("pane-type")&&n(r,e)}),window.addEventListener("resize",function(e){for(var t=r.pane.internal.container.querySelectorAll(".pane canvas"),o=0;o<t.length;o++)n(r,t[o].parentNode)}),r.surface={}},["pane-types"])}(),function(){"use strict";function e(e,t,n){t&&(e[0]=t[0]+.005*n[0],e[1]=t[1]+.005*n[1])}function t(e,t){return e?[e[0]-t[0],e[1]-t[1]]:[0,0]}var n=null,r=null;Cobweb.prototype.modules.add("common-interaction",function(o){o.surface.interaction.add("common",{onMouseMove:function(a,i){if(a.target.dataset.moving){var s=a.target,c=o.surface.map[s.id];if(c){var u=t(r,i);e(c.surface.rotation,n,u)}}return!1},onMouseDown:function(e,t){if(2===e.which){e.target.dataset.moving="true";var a=e.target,i=o.surface.map[a.id];n=i.surface.rotation.slice(),r=t}return!0},onMouseUp:function(a,i){if(2===a.which){delete a.target.dataset.moving;var s=a.target,c=o.surface.map[s.id],u=t(r,i);e(c.surface.rotation,n,u),r=null}return!0},onClick:function(e,t){return!0}})},["surface-interaction"])}(),function(){"use strict";Cobweb.prototype.modules.add("object-interaction",function(e){e.surface.interaction.add("object",{onMouseMove:function(e,t){return!0},onMouseDown:function(t,n){return e.logger.debug("onMouseDown",t),!0},onMouseUp:function(t,n){return e.logger.debug("onMouseUp",t),!0},onClick:function(t,n){return e.logger.debug("onClick",t),!0}}),e.events.on("surface.create",function(t){e.surface.setInteraction(t,"object")})},["surface-interaction"])}(),function(){"use strict";function e(e,n){var r=t(n);switch(n.type){case"mousemove":return e.onMouseMove(n,r);case"mousedown":return e.onMouseDown(n,r);case"mouseup":return e.onMouseUp(n,r);case"click":return e.onClick(n,r)}}function t(e){var t;return t=e.pageX||e.pageY?[e.pageX,e.pageY]:[e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop],t[0]-=e.target.offsetLeft,t[1]-=e.target.offsetTop,t}Cobweb.prototype.modules.add("surface-interaction",function(t){function n(n){var r=t.surface.getInteraction(n.target),o=e(r,n);if(o){var a=t.surface.interaction.get("common");e(a,n)}}t.surface.setInteraction=function(e,n){var r=t.surface.interaction;r.has(n)&&e.attrData("surface-interaction",n)},t.surface.getInteraction=function(e){var n=t.surface.interaction,r=e.attrData("surface-interaction");return n.get(r)},t.events.on("surface.create",function(e){e.onmousemove=n,e.onmousedown=n,e.onmouseup=n,e.onclick=n}),t.events.on("pane.split",function(e,t){t.attrData("surface-interaction",e.attrData("surface-interaction"))})},["interaction-mode","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  vec4 ambient = vec4(0.1, 0.1, 0.1, 1);  gl_FragColor = ambient + u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[.7,.7,.7,1],u_lightvector:null,u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(a){for(var i=e.scene.root.dfs(),s=0;s<i.length;s++){var c=i[s].data;if("object"===c.type){var u=vec3.create();a.getCameraPosition(u),vec3.add(u,u,[-1,0,2]),vec3.normalize(u,u),o.u_lightvector=u,a.getViewMatrix(n),mat4.multiply(n,n,c.model),mat4.multiply(r,a.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive)}}}),e.events.on("surface.create",function(t){e.surface.setRender(t,"solid")})},["surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.surface.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("render",n)},e.surface.getRender=function(t){var n=e.graphics.renders,r=t.attrData("render");return n.get(r)};for(var t=document.querySelectorAll(".pane"),n=0;n<t.length;n++)if("surface"==t[n].dataset.paneType){var r=t[n].querySelector("canvas");r.dataset.render="solid"}e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render","surface"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=e.surface.map[t.id],r=e.graphics.gl,o=t.clientWidth,a=t.clientHeight;r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.viewport(0,0,o,a);var i=e.surface.getRender(t);i&&i(n.surface);var s=t.getContext("2d");s&&(r.readPixels(0,0,o,a,r.RGBA,r.UNSIGNED_BYTE,n.buffer),n.imgData.data.set(n.buffer),s.putImageData(n.imgData,0,0))}var t=function(t){this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.349,.349,.349,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e)})}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){e.scene={root:TreeNode.extend({})};var t=mat4.create();mat4.rotateY(t,t,.8),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,mesh:GL.Mesh.cube(),model:t}),e.scene.root.add({type:"ligth",color:[1,1,1],intensity:1})},["graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJhcnJheS5qcyIsImh0bWwuanMiLCJvYmouanMiLCJ0cmVlLmpzIiwiZXZlbnRzLmpzIiwibG9nZ2VyLmpzIiwiY29id2ViLmpzIiwibW9kdWxlcy5qcyIsInBhbmUvcGFuZS1oZWFkZXIuanMiLCJwYW5lL3BhbmUtdHlwZXMuanMiLCJwYW5lL3BhbmVzLmpzIiwicGFuZS9zdXJmYWNlL2ludGVyYWN0aW9uLW1vZGVzLmpzIiwicGFuZS9zdXJmYWNlL3N1cmZhY2UuanMiLCJwYW5lL3N1cmZhY2UvaW50ZXJhY3Rpb24vY29tbW9uLWludGVyYWN0aW9uLmpzIiwicGFuZS9zdXJmYWNlL2ludGVyYWN0aW9uL29iamVjdC1pbnRlcmFjdGlvbi5qcyIsInBhbmUvc3VyZmFjZS9pbnRlcmFjdGlvbi9zdXJmYWNlLWludGVyYWN0aW9uLmpzIiwicGFuZS9zdXJmYWNlL3JlbmRlci9yZW5kZXItc29saWQuanMiLCJwYW5lL3N1cmZhY2UvcmVuZGVyL3N1cmZhY2UtcmVuZGVyLmpzIiwiZ3JhcGhpYy1yZW5kZXIuanMiLCJncmFwaGljLmpzIiwic2NlbmUuanMiXSwibmFtZXMiOlsiYWpheCIsIm9wdGlvbnMiLCJfZXh0ZW5kIiwiZGVmYXVsdEFqYXhPcHRpb25zIiwieGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInRoaXMiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiZXJyb3IiLCJtZXRob2QiLCJwYXJhbXMiLCJvYmpUb1BhcmFtcyIsImRhdGEiLCJ1cmxXaXRoUGFyYW1zIiwidXJsIiwib3BlbiIsImFzeW5jIiwic2VuZCIsImdldCIsIkFqYXgiLCJnZXRKU09OIiwiSlNPTiIsInBhcnNlIiwicG9zdCIsIm9iaiIsImtleSIsIm5leHRQYXJhbSIsImVuY29kZVVSSUNvbXBvbmVudCIsInNsaWNlIiwiZGVmYXVsdHMiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJ2YWx1ZSIsIndpbmRvdyIsInNhZmVFeHRlbmQiLCJwcm90b3R5cGUiLCJwcm9wZXJ0eSIsIkFycmF5IiwiYSIsImNvbmNhdCIsImkiLCJsZW5ndGgiLCJqIiwic3BsaWNlIiwiY2FsbGJhY2siLCJzNCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiSFRNTEVsZW1lbnQiLCJvbGRDbGFzc05hbWVzIiwibmV3Q2xhc3NOYW1lcyIsImFyZ3VtZW50cyIsImNsYXNzTmFtZSIsInRyaW0iLCJyZXBsYWNlIiwic3BsaXQiLCJ1bmlxdWUiLCJqb2luIiwicXVlcnlDbGFzc05hbWVzIiwiY3VycmVudENsYXNzTmFtZXMiLCJpbmRleCIsIm5hbWUiLCJpbmRleE9mIiwicmVtb3ZlQ2xhc3NOYW1lcyIsInJlbW92ZUVhY2giLCJmb3JFYWNoIiwiYXR0ciIsIl9fZGF0YV9jYWNoZSIsIldlYWtNYXAiLCJlbEF0dHJzIiwidW5kZWZpbmVkIiwic2V0Iiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiRWxlbWVudCIsIm1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJtYXRjaGVzIiwiZG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJxdWVyeSIsInBhcmVudEVsZW1lbnQiLCJjdXJyZW50IiwiY2xpZW50SGVpZ2h0Iiwic3R5bGUiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsIndpZHRoIiwiZ3VpZCIsIm92ZXJsYXAiLCJxdWVyeVNlbGVjdG9yIiwiT2JqZWN0IiwibmV3T2JqIiwiY2xvbmUiLCJleHRlbmQiLCJUcmVlTm9kZSIsInBhcmVudCIsImNoaWxkcmVuIiwiaXNSb290IiwiYWRkIiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsInB1c2giLCJyZW1vdmUiLCJkZnMiLCJjaGVjayIsIm91dCIsImJmcyIsIl9UcmVlTm9kZSIsImNhbGwiLCJjcmVhdGUiLCJFdmVudEhhbmRsZXIiLCJsaXN0ZW5lcnMiLCJ0cmlnZ2VyIiwiY29uc29sZSIsImRlYnVnIiwiYXBwbHkiLCJvbiIsIm9mZiIsImFycmF5IiwiTG9nZ2VyIiwiaW5zdGFuY2UiLCJoYW5kbGVycyIsImFkZEhhbmRsZXIiLCJsZXZlbCIsIkFMTCIsImFyZ3MiLCJERUJVRyIsIklORk8iLCJpbmZvIiwiV0FSTklORyIsIndhcm4iLCJFUlJPUiIsImxvZyIsIndhcm5pbmciLCJ0bXAiLCJsZXZlbEhhbmRsZXJzIiwiaGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJOT05FIiwiZGVmYXVsdE9wdGlvbnMiLCJjb250YWluZXIiLCJzZWxlY3RvciIsIkNvYndlYiIsIkVycm9yIiwiYWRkQ2xhc3MiLCJsb2dnZXIiLCJldmVudHMiLCJtb2R1bGVzIiwibG9hZCIsImFkZFJldmVyc2VEZXBlbmRlbmNpZXMiLCJtb2R1bGUiLCJkZXBlbmRhbnQiLCJkZXBlbmRlbmNpZXMiLCJkZXBQbHVnaW4iLCJ0b3BvbG9naWNhbFNvcnQiLCJjYW5kaWRhdGVzIiwic29ydGVkTmFtZXMiLCJuZXh0TmFtZSIsImRlcE5hbWUiLCJhbGxEZXBlbmRlbmNpZXNNZXQiLCJrZXlzIiwibG9hZGVkVW50aWxOb3ciLCJhbGwiLCJpbml0IiwiZXgiLCJvbkNyZWF0ZUNhbGxiYWNrIiwicGFuZSIsImhlYWRlciIsImNyZWF0ZUhlYWRlciIsImFwcGVuZCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwYW5lVHlwZXMiLCJjYWxsYmFja3MiLCJoYXMiLCJvbGRQYW5lIiwibmV3UGFuZSIsIm9sZFR5cGUiLCJhdHRyRGF0YSIsInNldFR5cGUiLCJ0eXBlcyIsInR5cGVDYWxsYmFja3MiLCJvblBhbmVUeXBlIiwicGFuZUhlYWRlciIsIm9uQ3JlYXRlSGVhZGVyIiwiZGF0YXNldCIsInBhbmVUeXBlIiwiZ2V0VHlwZSIsIm9uUGFuZUNyZWF0ZSIsIm9uUGFuZVNwbGl0Iiwib3JpZ2luIiwib25QYW5lUmVzaXplIiwiaW50ZXJuYWwiLCJQYW5lIiwic2VwYXJhdG9yIiwic2l6ZSIsInJvb3QiLCJzdXJmYWNlIiwiaW50ZXJhY3Rpb24iLCJvblN1cmZhY2VQYW5lVHlwZSIsImNhbnZhcyIsImlkIiwic3VyZmFjZUluZGV4IiwibWFwIiwicHJvaiIsIm1hdDQiLCJjZW50ZXIiLCJyb3RhdGlvbiIsImRpc3RhbmNlIiwiZ2V0Vmlld01hdHJpeCIsInZpZXciLCJleWUiLCJnZXRDYW1lcmFQb3NpdGlvbiIsImxvb2tBdCIsInZlYzMiLCJyb3RhdGVYIiwicm90YXRlWSIsInVwZGF0ZUNhbnZhc1NpemUiLCJvbkNyZWF0ZVN1cmZhY2VIZWFkZXIiLCJsYWJlbCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJoZWFkZXJIZWlnaHQiLCJpbWdEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwiYnVmZmVyIiwiVWludDhBcnJheSIsInBlcnNwZWN0aXZlIiwiREVHMlJBRCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN1cmZhY2VzIiwicGFyZW50Tm9kZSIsImNvbWJpbmUiLCJ0YXJnZXQiLCJvcmlnaW5hbFJvdGF0aW9uIiwiZGVsdGEiLCJnZXRDb29yZHNEZWx0YSIsImluaXRpYWwiLCJtb3VzZURvd25Db29yZHMiLCJvbk1vdXNlTW92ZSIsInJlYWxDb29yZHMiLCJtb3ZpbmciLCJvbk1vdXNlRG93biIsIndoaWNoIiwib25Nb3VzZVVwIiwib25DbGljayIsInNldEludGVyYWN0aW9uIiwicnVuQ2FsbGJhY2siLCJnZXRMb2NhbENvb3JkaW5hdGVzIiwidHlwZSIsImNvb3JkaW5hdGVzIiwicGFnZVgiLCJwYWdlWSIsImNsaWVudFgiLCJib2R5Iiwic2Nyb2xsTGVmdCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFkiLCJzY3JvbGxUb3AiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib25TdXJmYWNlRXZlbnQiLCJnZXRJbnRlcmFjdGlvbiIsImtlZXBSdW5uaW5nIiwiY29tbW9uIiwiaW50ZXJhY3Rpb25zIiwib25tb3VzZW1vdmUiLCJvbm1vdXNlZG93biIsIm9ubW91c2V1cCIsIm9uY2xpY2siLCJzaGFkZXIiLCJTaGFkZXIiLCJ0ZW1wIiwibXZwIiwidW5pZm9ybXMiLCJ1X2NvbG9yIiwidV9saWdodHZlY3RvciIsInVfbW9kZWwiLCJ1X212cCIsImdyYXBoaWNzIiwicmVuZGVycyIsIm9ianMiLCJzY2VuZSIsImxpZ2h0RGlyZWN0aW9uIiwibm9ybWFsaXplIiwibXVsdGlwbHkiLCJtb2RlbCIsImRyYXciLCJtZXNoIiwicHJpbWl0aXZlIiwic2V0UmVuZGVyIiwiZ2V0UmVuZGVyIiwicGFuZXMiLCJyZW5kZXIiLCJkcmF3UmVuZGVyVGFyZ2V0IiwiZ2wiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJERVBUSF9CVUZGRVJfQklUIiwidmlld3BvcnQiLCJyZWFkUGl4ZWxzIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJwdXRJbWFnZURhdGEiLCJHcmFwaGljcyIsIkdMIiwic2NyZWVuIiwiYW5pbWF0ZSIsIm9uZHJhdyIsInJlbmRlclRhcmdldHMiLCJjbGVhckNvbG9yIiwiZW5hYmxlIiwiREVQVEhfVEVTVCIsIm1hdCIsIlRSSUFOR0xFUyIsIk1lc2giLCJjdWJlIiwiY29sb3IiLCJpbnRlbnNpdHkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFXQSxTQUFBQSxHQUFBQyxHQUNBQyxFQUFBRCxNQUFBRSxFQUNBLElBQUFDLEdBQUEsR0FBQUMsZUFVQSxJQVRBRCxFQUFBRSxtQkFBQSxXQUNBLEdBQUFDLEtBQUFDLGFBQ0EsS0FBQUQsS0FBQUUsT0FDQVIsRUFBQVMsU0FBQVQsRUFBQVMsUUFBQUgsS0FBQUksVUFFQVYsRUFBQVcsT0FBQUEsTUFBQUYsUUFBQUgsS0FBQUksWUFJQSxRQUFBVixFQUFBWSxPQUFBLENBQ0EsR0FBQUMsR0FBQUMsRUFBQWQsRUFBQWUsTUFDQUMsRUFBQWhCLEVBQUFp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QUFBLEdBQ0FDLFVBQUEsTUFFQSIsImZpbGUiOiJjb2J3ZWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZWZhdWx0QWpheE9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICB1cmw6ICcnLFxyXG4gICAgICAgIGRhdGE6IHt9LFxyXG4gICAgICAgIGFzeW5jOiB0cnVlLFxyXG4gICAgICAgIHN1Y2Nlc3M6IG51bGwsXHJcbiAgICAgICAgZXJyb3I6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWpheCAob3B0aW9ucykge1xyXG4gICAgICAgIF9leHRlbmQob3B0aW9ucyB8fCB7fSwgZGVmYXVsdEFqYXhPcHRpb25zKTtcclxuICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2Vzcykgb3B0aW9ucy5zdWNjZXNzKHRoaXMucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lcnJvcikgZXJyb3Iuc3VjY2Vzcyh0aGlzLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG9wdGlvbnMubWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gb2JqVG9QYXJhbXMob3B0aW9ucy5kYXRhKTtcclxuICAgICAgICAgICAgdmFyIHVybFdpdGhQYXJhbXMgPSBvcHRpb25zLnVybCArIChwYXJhbXMgPyAnPycgKyBwYXJhbXMgOiAnJyk7XHJcbiAgICAgICAgICAgIHhodHRwLm9wZW4ob3B0aW9ucy5tZXRob2QsIHVybFdpdGhQYXJhbXMsIG9wdGlvbnMuYXN5bmMpO1xyXG4gICAgICAgICAgICB4aHR0cC5zZW5kKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICAgICAgICAgIHhodHRwLm9wZW4ob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJsLCBvcHRpb25zLmFzeW5jKTtcclxuICAgICAgICAgICAgeGh0dHAuc2VuZChvcHRpb25zLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geGh0dHA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0ICh1cmwsIGRhdGEsIHN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gQWpheC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRKU09OICh1cmwsIGRhdGEsIHN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gQWpheC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzcyhKU09OLnBhcnNlKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwb3N0ICh1cmwsIGRhdGEsIHN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gQWpheC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LkFqYXggPSB7XHJcbiAgICAgICAgYWpheDogYWpheCxcclxuICAgICAgICBnZXQ6IGdldCxcclxuICAgICAgICBnZXRKU09OOiBnZXRKU09OLFxyXG4gICAgICAgIHBvc3Q6IHBvc3RcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gb2JqVG9QYXJhbXMgKG9iaikge1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0UGFyYW0gPSBrZXkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2tleV0pO1xyXG4gICAgICAgICAgICBwYXJhbXMgKz0gJyYnICsgbmV4dFBhcmFtO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyYW1zLnNsaWNlKDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9leHRlbmQob3B0aW9ucywgZGVmYXVsdHMpIHtcclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wICYmIGRlZmF1bHRzLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkZWZhdWx0c1twcm9wXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbcHJvcF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2V4dGVuZChvcHRpb25zW3Byb3BdLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnNbcHJvcF0gPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEFycmF5LnByb3RvdHlwZSwgJ3VuaXF1ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBhID0gdGhpcy5jb25jYXQoKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKVxyXG4gICAgICAgICAgICAgICAgaWYoYVtpXSA9PT0gYVtqXSkgYS5zcGxpY2Uoai0tLCAxKTtcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAnZm9yRWFjaCcsIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzW2ldLCBpLCB0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYWRkQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9sZENsYXNzTmFtZXMsIG5ld0NsYXNzTmFtZXM7XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIG9sZENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgbmV3Q2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gb2xkQ2xhc3NOYW1lcy5jb25jYXQobmV3Q2xhc3NOYW1lcykudW5pcXVlKCkuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnaGFzQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5Q2xhc3NOYW1lcywgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgcXVlcnlDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHF1ZXJ5Q2xhc3NOYW1lcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcXVlcnlDbGFzc05hbWVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2xhc3NOYW1lcy5pbmRleE9mKG5hbWUpID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncmVtb3ZlQ2xhc3MnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gMCwgY3VycmVudENsYXNzTmFtZXMsIHJlbW92ZUNsYXNzTmFtZXM7XHJcbiAgICAgICAgdmFyIHJlbW92ZUVhY2ggPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzc05hbWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMgPSAhdGhpcy5jbGFzc05hbWUgPyBbXSA6IHRoaXMuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzTmFtZXMuZm9yRWFjaChyZW1vdmVFYWNoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjdXJyZW50Q2xhc3NOYW1lcy51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdkYXRhJywgZnVuY3Rpb24gKGF0dHIsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cuX19kYXRhX2NhY2hlKSB3aW5kb3cuX19kYXRhX2NhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuICAgICAgICB2YXIgZWxBdHRycyA9IHdpbmRvdy5fX2RhdGFfY2FjaGUuZ2V0KHRoaXMpIHx8IHt9O1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGVsQXR0cnNbYXR0cl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZWxBdHRycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGF0dHIpIHJldHVybiBlbEF0dHJzICYmIGVsQXR0cnNbYXR0cl07XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGVsQXR0cnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdzZXREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHdpbmRvdy5fX2RhdGFfY2FjaGUuc2V0KHRoaXMsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhdHRyJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHJEYXRhJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cignZGF0YS0nICsgbmFtZSwgdmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChFbGVtZW50LnByb3RvdHlwZSwgJ21hdGNoZXMnLFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgIGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSAodGhpcy5kb2N1bWVudCB8fCB0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksXHJcbiAgICAgICAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCAmJiBtYXRjaGVzLml0ZW0oaSkgIT09IHRoaXMpIHt9XHJcbiAgICAgICAgICAgIHJldHVybiBpID4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3BhcmVudCcsIGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIGlmICghcXVlcnkpIHJldHVybiB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKCFjdXJyZW50Lm1hdGNoZXMocXVlcnkpKVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoZWlnaHQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZSArICdweCc7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudEhlaWdodDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnd2lkdGgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53aWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRXaWR0aDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQod2luZG93LCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ0dVSUQtJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnZ3VpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ3VpZCA9IG51bGwsIG92ZXJsYXAgPSBudWxsO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgZ3VpZCA9IHdpbmRvdy5ndWlkKCk7XHJcbiAgICAgICAgICAgIG92ZXJsYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGd1aWQpO1xyXG4gICAgICAgIH0gd2hpbGUob3ZlcmxhcCk7XHJcbiAgICAgICAgdGhpcy5hdHRyKCdpZCcsIGd1aWQpO1xyXG4gICAgICAgIHJldHVybiBndWlkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgIC50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoT2JqZWN0LCAnY2xvbmUnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIG5ld09iaiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iailcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBuZXdPYmpbcHJvcGVydHldID0gT2JqZWN0LmNsb25lKG9ialtwcm9wZXJ0eV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBvYmpbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhZmVFeHRlbmQocHJvdG90eXBlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICBpZighcHJvdG90eXBlW3Byb3BlcnR5XSkgcHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5leHRlbmQgPSBfZXh0ZW5kO1xyXG5cclxuICAgIGZ1bmN0aW9uIF9leHRlbmQob3B0aW9ucywgZGVmYXVsdHMpIHtcclxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wICYmIGRlZmF1bHRzLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkZWZhdWx0c1twcm9wXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNbcHJvcF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2V4dGVuZChvcHRpb25zW3Byb3BdLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnNbcHJvcF0gPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBUcmVlTm9kZSA9IGZ1bmN0aW9uIChwYXJlbnQsIGRhdGEpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LlRyZWVOb2RlID0gVHJlZU5vZGU7XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLmlzUm9vdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMucGFyZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLCBkYXRhKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH07XHJcblxyXG4gICAgVHJlZU5vZGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4uc2xpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuZGZzID0gZnVuY3Rpb24gKGNoZWNrKSB7XHJcbiAgICAgICAgdmFyIG91dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWNoZWNrIHx8IChjaGVjayAmJiBjaGVjayh0aGlzLmNoaWxkcmVuW2ldKSkpXHJcbiAgICAgICAgICAgICAgICBvdXQucHVzaCh0aGlzLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgb3V0LmNvbmNhdCh0aGlzLmNoaWxkcmVuW2ldLmRmcyhjaGVjaykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuYmZzID0gZnVuY3Rpb24gKGNoZWNrKSB7XHJcbiAgICAgICAgdmFyIG91dCA9IFtdLCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoIWNoZWNrIHx8IChjaGVjayAmJiBjaGVjayh0aGlzLmNoaWxkcmVuW2ldKSkpXHJcbiAgICAgICAgICAgICAgICBvdXQucHVzaCh0aGlzLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgb3V0LmNvbmNhdCh0aGlzLmNoaWxkcmVuW2ldLmJmcyhjaGVjaykpO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyZWVOb2RlLmV4dGVuZCA9IGZ1bmN0aW9uIChkZWZhdWx0cykge1xyXG4gICAgICAgIHZhciBfVHJlZU5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIFRyZWVOb2RlLmNhbGwodGhpcywgcGFyZW50LCBkYXRhKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9UcmVlTm9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRyZWVOb2RlLnByb3RvdHlwZSk7XHJcbiAgICAgICAgX1RyZWVOb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IF9UcmVlTm9kZTtcclxuICAgICAgICBleHRlbmQoX1RyZWVOb2RlLnByb3RvdHlwZSwgZGVmYXVsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgX1RyZWVOb2RlKG51bGwpO1xyXG4gICAgfTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0gfHwgW107XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhuYW1lLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tuYW1lXSkgdGhpcy5saXN0ZW5lcnNbbmFtZV0gPSBbXTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW25hbWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW25hbWVdKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJheSA9IHRoaXMubGlzdGVuZXJzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoYXJyYXkuaW5kZXhPZihjYWxsYmFjaykgPiAtMSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5FdmVudEhhbmRsZXIgPSBFdmVudEhhbmRsZXI7XHJcbn0pKCkpO1xyXG4iLCIvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqL1xyXG5cclxuKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBMb2dnZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuYWRkSGFuZGxlcih0aGlzLmxldmVsLkFMTCwgZnVuY3Rpb24gKGxldmVsLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChMb2dnZXIucHJvdG90eXBlLmxldmVsLkRFQlVHID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1Zy5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChMb2dnZXIucHJvdG90eXBlLmxldmVsLklORk8gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTG9nZ2VyLnByb3RvdHlwZS5sZXZlbC5XQVJOSU5HID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuRVJST1IgPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2coTG9nZ2VyLnByb3RvdHlwZS5sZXZlbC5ERUJVRywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9nKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuSU5GTywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS53YXJuaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9nKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuV0FSTklORywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvZyhMb2dnZXIucHJvdG90eXBlLmxldmVsLkVSUk9SLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChsZXZlbCwgYXJncykge1xyXG4gICAgICAgIHZhciB0bXAgPSBsZXZlbDtcclxuICAgICAgICB2YXIgbGV2ZWxIYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbdG1wXSB8fCBbXTtcclxuICAgICAgICB3aGlsZSAodG1wID49IDApIHtcclxuICAgICAgICAgICAgbGV2ZWxIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyKGxldmVsLCBhcmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldmVsSGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzWy0tdG1wXSB8fCBbXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUuYWRkSGFuZGxlciA9IGZ1bmN0aW9uIChsZXZlbCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNbbGV2ZWxdKVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzW2xldmVsXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNbbGV2ZWxdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLnJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAobGV2ZWwsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGxldmVsSGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2xldmVsXTtcclxuICAgICAgICBpZiAobGV2ZWxIYW5kbGVycykge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsZXZlbEhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgICAgIGxldmVsSGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUubGV2ZWwgPSB7XHJcbiAgICAgICAgQUxMOiAwLFxyXG4gICAgICAgIERFQlVHOiAxLFxyXG4gICAgICAgIElORk86IDIsXHJcbiAgICAgICAgV0FSTklORzogMyxcclxuICAgICAgICBFUlJPUjogNCxcclxuICAgICAgICBOT05FOiA1LFxyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuTG9nZ2VyID0gTG9nZ2VyO1xyXG59KSgpKTtcclxuIiwiKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgIGNvbnRhaW5lcjoge1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogJyNjb2J3ZWInLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdjYi1jb250YWluZXInXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgQ29id2ViID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLm9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb250YWluZXIgc2VsZWN0b3I6IFxcJycgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvciArICdcXCcnKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY29udGFpbmVyLmNsYXNzTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGF0YSgnaW5zdGFuY2UnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKHRoaXMsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcih0aGlzKTtcclxuICAgICAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMubG9hZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdhcHAubG9hZGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5Db2J3ZWIgPSBDb2J3ZWI7XHJcbn0oKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcyA9IHtcclxuICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGluaXQsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMgfHwgW107XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IHtcclxuICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczogZGVwZW5kZW5jaWVzLFxyXG4gICAgICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgYWRkUmV2ZXJzZURlcGVuZGVuY2llcyh0aGlzLmFsbCk7XHJcbiAgICAgICAgICAgIHZhciBzb3J0ZWROYW1lcyA9IHRvcG9sb2dpY2FsU29ydChpbnN0YW5jZSwgdGhpcy5hbGwpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvcnRlZE5hbWVzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBzb3J0ZWROYW1lc1tpXTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0uaW5pdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMubG9hZGVkJywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5lcnJvcignTG9hZGluZyBtb2R1bGUgJyArIG5hbWUsIGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5lcnJvcicsIG5hbWUsIGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5sb2FkZWQuYWxsJywgc29ydGVkTmFtZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkUmV2ZXJzZURlcGVuZGVuY2llcyAobW9kdWxlcykge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbW9kdWxlcykge1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKCFtb2R1bGUuZGVwZW5kYW50KSBtb2R1bGUuZGVwZW5kYW50ID0gW107XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBQbHVnaW4gPSBtb2R1bGVzW21vZHVsZS5kZXBlbmRlbmNpZXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVwUGx1Z2luLmRlcGVuZGFudCkgZGVwUGx1Z2luLmRlcGVuZGFudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlcFBsdWdpbi5kZXBlbmRhbnQucHVzaChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b3BvbG9naWNhbFNvcnQgKGluc3RhbmNlLCBtb2R1bGVzKSB7XHJcbiAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSBbXSwgc29ydGVkTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1vZHVsZXMpXHJcbiAgICAgICAgICAgIGlmIChtb2R1bGVzW25hbWVdLmRlcGVuZGVuY2llcy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2gobmFtZSk7XHJcbiAgICAgICAgd2hpbGUgKGNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgbmV4dE5hbWUgPSBjYW5kaWRhdGVzWzBdO1xyXG4gICAgICAgICAgICBjYW5kaWRhdGVzLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgaWYgKG1vZHVsZXNbbmV4dE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kdWxlID0gbW9kdWxlc1tuZXh0TmFtZV07XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWROYW1lcy5wdXNoKG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLmRlcGVuZGFudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBOYW1lID0gbW9kdWxlLmRlcGVuZGFudFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRGVwZW5kZW5jaWVzTWV0KHNvcnRlZE5hbWVzLCBtb2R1bGVzW2RlcE5hbWVdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGRlcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3IubWlzc2luZycsIG5leHROYW1lKTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci53YXJuaW5nKCdNaXNzaW5nIG1vZHVsZSBcXCcnICsgbmV4dE5hbWUgKyAnXFwnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1vZHVsZXMpLmxlbmd0aCAhPT0gc29ydGVkTmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yLmN5Y2xlJyk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5lcnJvcignRGVwZW5kZW5jeSBjeWNsZSBmb3VuZCBpbiBtb2R1bGVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzb3J0ZWROYW1lcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhbGxEZXBlbmRlbmNpZXNNZXQgKGxvYWRlZFVudGlsTm93LCBtb2R1bGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmIChsb2FkZWRVbnRpbE5vdy5pbmRleE9mKG1vZHVsZS5kZXBlbmRlbmNpZXNbaV0pID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZS1oZWFkZXInLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuY3JlYXRlJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgb25DcmVhdGVDYWxsYmFjayhwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3BhbmUtdHlwZXMnXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gb25DcmVhdGVDYWxsYmFjayAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgaGVhZGVyID0gY3JlYXRlSGVhZGVyKCk7XHJcbiAgICAgICAgcGFuZS5hcHBlbmQoaGVhZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVIZWFkZXIgKCkge1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3BhbmUtaGVhZGVyJztcclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgncGFuZS10eXBlcycsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBwYW5lVHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSBjYWxsYmFja3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGRUeXBlID0gb2xkUGFuZS5hdHRyRGF0YSgncGFuZS10eXBlJyk7XHJcbiAgICAgICAgICAgIGlmIChvbGRUeXBlKSBpbnN0YW5jZS5wYW5lLnNldFR5cGUobmV3UGFuZSwgb2xkVHlwZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUudHlwZXMgPSBwYW5lVHlwZXM7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0VHlwZSA9IGZ1bmN0aW9uIChwYW5lLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGVzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGVDYWxsYmFja3MgPSB0aGlzLnR5cGVzLmdldChuYW1lKTtcclxuICAgICAgICAgICAgICAgIHR5cGVDYWxsYmFja3Mub25QYW5lVHlwZShwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFuZUhlYWRlciA9IHBhbmUucXVlcnlTZWxlY3RvcignLnBhbmUtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB0eXBlQ2FsbGJhY2tzLm9uQ3JlYXRlSGVhZGVyKHBhbmVIZWFkZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHBhbmUuZGF0YXNldC5wYW5lVHlwZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLmdldFR5cGUgPSBmdW5jdGlvbiAocGFuZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFuZS5kYXRhc2V0LnBhbmVUeXBlO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ3BhbmUnXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdhcHAubG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmludGVybmFsID0gbmV3IFBhbmUoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBpbnN0YW5jZS5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvcixcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblBhbmVDcmVhdGU6IG9uUGFuZUNyZWF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBvblBhbmVTcGxpdDogb25QYW5lU3BsaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYW5lUmVzaXplOiBvblBhbmVSZXNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vblBhbmVNZXJnZTogb25QYW5lTWVyZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vblBhbmVEZXN0cm95OiBvblBhbmVEZXN0cm95LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciByb290ID0gaW5zdGFuY2UucGFuZS5pbnRlcm5hbC5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnBhbmUnKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRUeXBlKHJvb3QsICdzdXJmYWNlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLnBhbmUgPSB7fTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lQ3JlYXRlIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwYW5lLmNyZWF0ZScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lU3BsaXQgKG9yaWdpbiwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5zcGxpdCcsIG9yaWdpbiwgbmV3UGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVSZXNpemUgKHBhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUucmVzaXplJywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVNZXJnZSAobWVyZ2VyLCB0b1JlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVNZXJnZScsIG1lcmdlciwgdG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lRGVzdHJveSAocGFuZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVEZXN0cm95JywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdpbnRlcmFjdGlvbi1tb2RlJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5pbnRlcmFjdGlvbiA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFsnc3VyZmFjZSddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBzdXJmYWNlSW5kZXggPSAwO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3N1cmZhY2UnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzLmFkZCgnc3VyZmFjZScsIHtcclxuICAgICAgICAgICAgb25QYW5lVHlwZTogb25TdXJmYWNlUGFuZVR5cGUsXHJcbiAgICAgICAgICAgIG9uQ3JlYXRlSGVhZGVyOiBvbkNyZWF0ZVN1cmZhY2VIZWFkZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnJlc2l6ZScsIGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGlmIChwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnKSA9PT0gJ3N1cmZhY2UnKVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZShpbnN0YW5jZSwgcGFuZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHN1cmZhY2VzID0gaW5zdGFuY2UucGFuZS5pbnRlcm5hbC5jb250YWluZXJcclxuICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcucGFuZSBjYW52YXMnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdXJmYWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FudmFzU2l6ZShpbnN0YW5jZSwgc3VyZmFjZXNbaV0ucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZSA9IHt9O1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uU3VyZmFjZVBhbmVUeXBlIChwYW5lLCBpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjYW52YXMuaWQgPSAnc3VyZmFjZScgKyAoc3VyZmFjZUluZGV4KyspO1xyXG4gICAgICAgIGNhbnZhcy5jbGFzc05hbWUgPSAnc3VyZmFjZSc7XHJcbiAgICAgICAgcGFuZS5hcHBlbmQoY2FudmFzKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5tYXAgPSBpbnN0YW5jZS5zdXJmYWNlLm1hcCB8fCB7fTtcclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLm1hcFtjYW52YXMuaWRdID0ge307XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5tYXBbY2FudmFzLmlkXS5zdXJmYWNlID0ge1xyXG4gICAgICAgICAgICBwcm9qOiBtYXQ0LmNyZWF0ZSgpLFxyXG4gICAgICAgICAgICBjZW50ZXI6IFswLCAwLCAwXSxcclxuICAgICAgICAgICAgcm90YXRpb246IFswLCAtMC40XSxcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDUsXHJcbiAgICAgICAgICAgIGdldFZpZXdNYXRyaXg6IGZ1bmN0aW9uICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXllID0gWzAsIDAsIDBdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDYW1lcmFQb3NpdGlvbihleWUpO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5sb29rQXQodmlldywgZXllLCB0aGlzLmNlbnRlciwgWzAsIDEsIDBdKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0Q2FtZXJhUG9zaXRpb246IGZ1bmN0aW9uIChleWUpIHtcclxuICAgICAgICAgICAgICAgIGV5ZVsyXSA9IC10aGlzLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgdmVjMy5yb3RhdGVYKGV5ZSwgZXllLCB0aGlzLnJvdGF0aW9uWzFdKTtcclxuICAgICAgICAgICAgICAgIHZlYzMucm90YXRlWShleWUsIGV5ZSwgLXRoaXMucm90YXRpb25bMF0pO1xyXG4gICAgICAgICAgICAgICAgdmVjMy5hZGQoZXllLCBleWUsIHRoaXMuY2VudGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHVwZGF0ZUNhbnZhc1NpemUoaW5zdGFuY2UsIHBhbmUpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignc3VyZmFjZS5jcmVhdGUnLCBjYW52YXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uQ3JlYXRlU3VyZmFjZUhlYWRlciAoaGVhZGVyLCBpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gJ1N1cmZhY2UgUGFuZSc7XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVDYW52YXNTaXplIChpbnN0YW5jZSwgcGFuZSkge1xyXG4gICAgICAgIHZhciBjYW52YXMgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLm1hcFtjYW52YXMuaWRdO1xyXG5cclxuICAgICAgICB2YXIgaGVhZGVyID0gcGFuZS5xdWVyeVNlbGVjdG9yKCcucGFuZS1oZWFkZXInKTtcclxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0ID0gaGVhZGVyID8gaGVhZGVyLmhlaWdodCgpIDogMDtcclxuXHJcbiAgICAgICAgdmFyIHdpZHRoID0gcGFuZS53aWR0aCgpLCBoZWlnaHQgPSBwYW5lLmhlaWdodCgpIC0gaGVhZGVySGVpZ2h0O1xyXG4gICAgICAgIGRhdGEuaW1nRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIGRhdGEuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcclxuXHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuXHJcbiAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShkYXRhLnN1cmZhY2UucHJvaiwgNDUgKiBERUcyUkFELCB3aWR0aCAvIGhlaWdodCwgMC4xLCAxMDAwKTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBvcmlnaW5hbFJvdGF0aW9uID0gbnVsbDtcclxuICAgIHZhciBtb3VzZURvd25Db29yZHMgPSBudWxsO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2NvbW1vbi1pbnRlcmFjdGlvbicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24uYWRkKCdjb21tb24nLCB7XHJcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuZGF0YXNldC5tb3ZpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gaW5zdGFuY2Uuc3VyZmFjZS5tYXBbY2FudmFzLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBnZXRDb29yZHNEZWx0YShtb3VzZURvd25Db29yZHMsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lKGRhdGEuc3VyZmFjZS5yb3RhdGlvbiwgb3JpZ2luYWxSb3RhdGlvbiwgZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmRhdGFzZXQubW92aW5nID0gJ3RydWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLm1hcFtjYW52YXMuaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUm90YXRpb24gPSBkYXRhLnN1cmZhY2Uucm90YXRpb24uc2xpY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURvd25Db29yZHMgPSByZWFsQ29vcmRzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VVcDogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnQudGFyZ2V0LmRhdGFzZXQubW92aW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpbnN0YW5jZS5zdXJmYWNlLm1hcFtjYW52YXMuaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGdldENvb3Jkc0RlbHRhKG1vdXNlRG93bkNvb3JkcywgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tYmluZShkYXRhLnN1cmZhY2Uucm90YXRpb24sIG9yaWdpbmFsUm90YXRpb24sIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZURvd25Db29yZHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCwgcmVhbENvb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnc3VyZmFjZS1pbnRlcmFjdGlvbiddKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb21iaW5lICh0YXJnZXQsIG9yaWdpbmFsUm90YXRpb24sIGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFJvdGF0aW9uKSByZXR1cm47XHJcbiAgICAgICAgdGFyZ2V0WzBdID0gb3JpZ2luYWxSb3RhdGlvblswXSArIGRlbHRhWzBdICogMC4wMDU7XHJcbiAgICAgICAgdGFyZ2V0WzFdID0gb3JpZ2luYWxSb3RhdGlvblsxXSArIGRlbHRhWzFdICogMC4wMDU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29vcmRzRGVsdGEgKGluaXRpYWwsIGN1cnJlbnQpIHtcclxuICAgICAgICBpZiAoIWluaXRpYWwpIHJldHVybiBbMCwgMF07XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaW5pdGlhbFswXSAtIGN1cnJlbnRbMF0sXHJcbiAgICAgICAgICAgIGluaXRpYWxbMV0gLSBjdXJyZW50WzFdXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ29iamVjdC1pbnRlcmFjdGlvbicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24uYWRkKCdvYmplY3QnLCB7XHJcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uTW91c2VEb3duJywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uTW91c2VVcDogZnVuY3Rpb24gKGV2ZW50LCByZWFsQ29vcmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ29uTW91c2VVcCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIHJlYWxDb29yZHMpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmxvZ2dlci5kZWJ1Zygnb25DbGljaycsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignc3VyZmFjZS5jcmVhdGUnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldEludGVyYWN0aW9uKHN1cmZhY2UsICdvYmplY3QnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LCBbJ3N1cmZhY2UtaW50ZXJhY3Rpb24nXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLWludGVyYWN0aW9uJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2Uuc3VyZmFjZS5zZXRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChzdXJmYWNlLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbnMgPSBpbnN0YW5jZS5zdXJmYWNlLmludGVyYWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb25zLmhhcyhuYW1lKSlcclxuICAgICAgICAgICAgICAgIHN1cmZhY2UuYXR0ckRhdGEoJ3N1cmZhY2UtaW50ZXJhY3Rpb24nLCBuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmdldEludGVyYWN0aW9uID0gZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgdmFyIGludGVyYWN0aW9ucyA9IGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb247XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gc3VyZmFjZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJhY3Rpb25zLmdldChuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3N1cmZhY2UuY3JlYXRlJywgZnVuY3Rpb24gKHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgc3VyZmFjZS5vbm1vdXNlbW92ZSA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgICAgICBzdXJmYWNlLm9ubW91c2Vkb3duID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25tb3VzZXVwID0gb25TdXJmYWNlRXZlbnQ7XHJcbiAgICAgICAgICAgIHN1cmZhY2Uub25jbGljayA9IG9uU3VyZmFjZUV2ZW50O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblN1cmZhY2VFdmVudCAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IGluc3RhbmNlLnN1cmZhY2UuZ2V0SW50ZXJhY3Rpb24oZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIGtlZXBSdW5uaW5nID0gcnVuQ2FsbGJhY2soY2FsbGJhY2tzLCBldmVudCk7XHJcbiAgICAgICAgICAgIGlmIChrZWVwUnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbW1vbiA9IGluc3RhbmNlLnN1cmZhY2UuaW50ZXJhY3Rpb24uZ2V0KCdjb21tb24nKTtcclxuICAgICAgICAgICAgICAgIHJ1bkNhbGxiYWNrKGNvbW1vbiwgZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUuc3BsaXQnLCBmdW5jdGlvbiAob2xkUGFuZSwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBuZXdQYW5lLmF0dHJEYXRhKCdzdXJmYWNlLWludGVyYWN0aW9uJywgb2xkUGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1pbnRlcmFjdGlvbicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnaW50ZXJhY3Rpb24tbW9kZScsICdzdXJmYWNlJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJ1bkNhbGxiYWNrIChjYWxsYmFja3MsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHJlYWxDb29yZHMgPSBnZXRMb2NhbENvb3JkaW5hdGVzKGV2ZW50KTtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlTW92ZShldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6IHJldHVybiBjYWxsYmFja3Mub25Nb3VzZURvd24oZXZlbnQsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICBjYXNlICdtb3VzZXVwJzogcmV0dXJuIGNhbGxiYWNrcy5vbk1vdXNlVXAoZXZlbnQsIHJlYWxDb29yZHMpO1xyXG4gICAgICAgICAgICBjYXNlICdjbGljayc6IHJldHVybiBjYWxsYmFja3Mub25DbGljayhldmVudCwgcmVhbENvb3Jkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldExvY2FsQ29vcmRpbmF0ZXMgKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzO1xyXG4gICAgICAgIGlmIChldmVudC5wYWdlWCB8fCBldmVudC5wYWdlWSkge1xyXG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IFtldmVudC5wYWdlWCwgZXZlbnQucGFnZVldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gW1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxyXG4gICAgICAgICAgICAgICAgZXZlbnQuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb29yZGluYXRlc1swXSAtPSBldmVudC50YXJnZXQub2Zmc2V0TGVmdDtcclxuICAgICAgICBjb29yZGluYXRlc1sxXSAtPSBldmVudC50YXJnZXQub2Zmc2V0VG9wO1xyXG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3JlbmRlci1zb2xpZCcsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKFxyXG4gICAgICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgYV92ZXJ0ZXg7JyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X212cDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCB1X21vZGVsOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICAgIHZfbm9ybWFsID0gKHVfbW9kZWwgKiB2ZWM0KGFfbm9ybWFsLDAuMCkpLnh5ejsnICtcclxuICAgICAgICAgICAgJyAgICBnbF9Qb3NpdGlvbiA9IHVfbXZwICogdmVjNChhX3ZlcnRleCwxLjApOycgK1xyXG4gICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzMgdV9saWdodHZlY3RvcjsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjNCB1X2NvbG9yOycgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycgK1xyXG4gICAgICAgICAgICAnICB2ZWMzIE4gPSBub3JtYWxpemUodl9ub3JtYWwpOycgK1xyXG4gICAgICAgICAgICAnICB2ZWM0IGFtYmllbnQgPSB2ZWM0KDAuMSwgMC4xLCAwLjEsIDEpOycgK1xyXG4gICAgICAgICAgICAnICBnbF9GcmFnQ29sb3IgPSBhbWJpZW50ICsgdV9jb2xvciAqIG1heCgwLjAsIGRvdCh1X2xpZ2h0dmVjdG9yLE4pKTsnICtcclxuICAgICAgICAgICAgJ30nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIHRlbXAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgIHZhciBtdnAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgIHVfY29sb3I6IFswLjcsIDAuNywgMC43LCAxXSxcclxuICAgICAgICAgICAgdV9saWdodHZlY3RvcjogbnVsbCxcclxuICAgICAgICAgICAgdV9tb2RlbDogbnVsbCxcclxuICAgICAgICAgICAgdV9tdnA6IG12cFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMuYWRkKCdzb2xpZCcsIGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmpzID0gaW5zdGFuY2Uuc2NlbmUucm9vdC5kZnMoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2Jqc1tpXS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaWdodERpcmVjdGlvbiA9IHZlYzMuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZS5nZXRDYW1lcmFQb3NpdGlvbihsaWdodERpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5hZGQobGlnaHREaXJlY3Rpb24sIGxpZ2h0RGlyZWN0aW9uLCBbLTEsIDAsIDJdKTtcclxuICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShsaWdodERpcmVjdGlvbiwgbGlnaHREaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnVfbGlnaHR2ZWN0b3IgPSBsaWdodERpcmVjdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZS5nZXRWaWV3TWF0cml4KHRlbXApO1xyXG4gICAgICAgIFx0XHRcdG1hdDQubXVsdGlwbHkodGVtcCwgdGVtcCwgb2JqLm1vZGVsKTtcclxuICAgICAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KG12cCwgc3VyZmFjZS5wcm9qLCB0ZW1wKTtcclxuXHJcbiAgICAgICAgXHRcdFx0dW5pZm9ybXMudV9tb2RlbCA9IG9iai5tb2RlbDtcclxuICAgICAgICBcdFx0XHRzaGFkZXIudW5pZm9ybXModW5pZm9ybXMpLmRyYXcob2JqLm1lc2gsIG9iai5wcmltaXRpdmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignc3VyZmFjZS5jcmVhdGUnLCBmdW5jdGlvbiAoc3VyZmFjZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLnNldFJlbmRlcihzdXJmYWNlLCAnc29saWQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnc3VyZmFjZS1yZW5kZXInXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnN1cmZhY2Uuc2V0UmVuZGVyID0gZnVuY3Rpb24gKHN1cmZhY2UsIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcnMgPSBpbnN0YW5jZS5ncmFwaGljcy5yZW5kZXJzO1xyXG4gICAgICAgICAgICBpZiAocmVuZGVycy5oYXMobmFtZSkpXHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlLmF0dHJEYXRhKCdyZW5kZXInLCBuYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zdXJmYWNlLmdldFJlbmRlciA9IGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJzID0gaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycztcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzdXJmYWNlLmF0dHJEYXRhKCdyZW5kZXInKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwYW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYW5lJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAocGFuZXNbaV0uZGF0YXNldC5wYW5lVHlwZSA9PSAnc3VyZmFjZScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBwYW5lc1tpXS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5kYXRhc2V0LnJlbmRlciA9ICdzb2xpZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJywgb2xkUGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1yZW5kZXInKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzLXJlbmRlcicsICdzdXJmYWNlJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmFkZCgnZ3JhcGhpY3MtcmVuZGVyJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MucmVuZGVycyA9IHtcclxuICAgICAgICAgICAgYWxsOiB7fSxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdID0gY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ2dyYXBoaWNzJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEdyYXBoaWNzID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5nbCA9IEdMLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGhlaWdodDogc2NyZWVuLmhlaWdodCxcclxuICAgICAgICAgICAgd2lkdGg6IHNjcmVlbi53aWR0aFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2wuYW5pbWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuZ2wub25kcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVyVGFyZ2V0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbmRlclRhcmdldHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBkcmF3UmVuZGVyVGFyZ2V0KGluc3RhbmNlLCByZW5kZXJUYXJnZXRzW2ldKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2wuY2xlYXJDb2xvcigwLjM0OSwgMC4zNDksIDAuMzQ5LCAxKTtcclxuICAgICAgICB0aGlzLmdsLmVuYWJsZSh0aGlzLmdsLkRFUFRIX1RFU1QpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdncmFwaGljcycsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKGluc3RhbmNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRyYXdSZW5kZXJUYXJnZXQgKGluc3RhbmNlLCBjYW52YXMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IGluc3RhbmNlLnN1cmZhY2UubWFwW2NhbnZhcy5pZF07XHJcbiAgICAgICAgdmFyIGdsID0gaW5zdGFuY2UuZ3JhcGhpY3MuZ2w7XHJcblxyXG4gICAgICAgIHZhciB3aWR0aCAgPSBjYW52YXMuY2xpZW50V2lkdGgsIGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB2YXIgcmVuZGVyID0gaW5zdGFuY2Uuc3VyZmFjZS5nZXRSZW5kZXIoY2FudmFzKTtcclxuICAgICAgICBpZiAocmVuZGVyKSByZW5kZXIoZGF0YS5zdXJmYWNlKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICBnbC5yZWFkUGl4ZWxzKDAsIDAsIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgZGF0YS5pbWdEYXRhLmRhdGEuc2V0KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICAgICAgY29udGV4dC5wdXRJbWFnZURhdGEoZGF0YS5pbWdEYXRhLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzY2VuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lID0ge1xyXG4gICAgICAgICAgICByb290OiBUcmVlTm9kZS5leHRlbmQoe30pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1hdCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgbWF0NC5yb3RhdGVZKG1hdCwgbWF0LCAwLjgpO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zY2VuZS5yb290LmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICBwcmltaXRpdmU6IGluc3RhbmNlLmdyYXBoaWNzLmdsLlRSSUFOR0xFUyxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgICAgIG1vZGVsOiBtYXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW5zdGFuY2Uuc2NlbmUucm9vdC5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiAnbGlndGgnLFxyXG4gICAgICAgICAgICBjb2xvcjogWzEsIDEsIDFdLFxyXG4gICAgICAgICAgICBpbnRlbnNpdHk6IDFcclxuICAgICAgICB9KTtcclxuICAgIH0sIFsnZ3JhcGhpY3MnXSk7XHJcbn0pKCkpO1xyXG4iXX0=
