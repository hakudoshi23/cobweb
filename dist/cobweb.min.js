!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var r=0;r<e.length;r++){var o=e[r];if(t.indexOf(o)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,r=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var o in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[o]?arguments[o].trim().replace(/\s+/g," ").split(" "):[],t.forEach(r),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return void 0===t?e?n&&n[e]:n:(n[e]=t,window.__data_cache.set(this,n),this)}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.clientHeight;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.clientWidth;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e}),e(window,"guid",function(){return"GUID-"+t()+"-"+t()+"-"+t()}),e(HTMLElement.prototype,"guid",function(){var e=null,t=null;do e=window.guid(),t=document.querySelector("#"+e);while(t);return this.attr("id",e),e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}window.extend=function(e,t){for(var n in t)if(n&&t.hasOwnProperty(n)){var r=t[n];"object"==typeof r?extend(e[n],t[n]):e[n]=t[n]}},e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r?t[n]=Object.clone(e[n]):t[n]=e[n]}return t})}(),function(){"use strict";var e=function(e,t){this.data=t||{},this.parent=e,this.children=[]};e.prototype.isRoot=function(){return!this.parent},e.prototype.add=function(e){var t=new this.constructor(this,e);return this.children.push(t),t},e.prototype.remove=function(e){return this.children.slice(e,1),this},e.prototype.dfs=function(e){for(var t=[],n=0;n<this.children.length;n++)(!e||e&&e(this.children[n]))&&t.push(this.children[n]),t.concat(this.children[n].dfs(e));return t},e.prototype.bfs=function(e){var t,n=[];for(t=0;t<this.children.length;t++)(!e||e&&e(this.children[t]))&&n.push(this.children[t]);for(t=0;t<this.children.length;t++)n.concat(this.children[t].bfs(e));return n},window.tree=function(t){var n=function(t,n){e.call(this,t,n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,extend(n.prototype,t),new n(null)}}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1);for(var n=0;n<t.length;n++)t[n].apply(null,arguments);console.debug(e)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(e){};e.prototype.debug=console.debug.bind(),e.prototype.info=console.info.bind(),e.prototype.warn=console.warn.bind(),e.prototype.error=console.error.bind(),e.prototype.log=console.log.bind(),window.Logger=e}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=e,extend(this.options,n||{}),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this),this.events=new EventHandler(this),t.prototype.modules.load(this)};window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var r=0;r<n.dependencies.length;r++){var o=e[n.dependencies[r]];o.dependant||(o.dependant=[]),o.dependant.push(t)}}}function t(e,t){var r=[],o=[];for(var i in t)0===t[i].dependencies.length&&r.push(i);for(;r.length>0;){var a=r[0];if(r.splice(0,1),t[a]){var s=t[a];o.push(a);for(var c=0;c<s.dependant.length;c++){var l=s.dependant[c];n(o,t[l])&&r.push(l)}}else e.events.trigger("modules.error.missing",a),e.logger.warning("Missing module '"+a+"'")}return Object.keys(t).length!==o.length&&(e.events.trigger("modules.error.cycle"),e.logger.error("Dependency cycle found in modules")),o}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}Cobweb.prototype.modules={all:{},add:function(e,t,n){if(n=n||[],"string"!=typeof e)throw new Error("Parameter 1: expected string, found "+typeof e);if(!Array.isArray(n))throw new Error("Parameter 2: expected array, found "+typeof n);if("function"!=typeof t)throw new Error("Parameter 3: expected function, found "+typeof t);this.all[e]={dependencies:n,init:t}},load:function(n){n.modules={},e(this.all);for(var r=t(n,this.all),o=0;o<r.length;o++){var i=r[o];try{this.all[i].init(n),n.events.trigger("modules.loaded",i)}catch(e){n.logger.error("Loading module "+i,e),n.events.trigger("modules.error",i,e)}}n.events.trigger("modules.loaded.all",r)}}}(),function(){"use strict";Cobweb.prototype.modules.add("pane-types",function(e){var t={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}};t.add("default",function(e,t){t.logger.debug("Default pane type (this does nothing)")}),e.events.on("pane.split",function(t,n){var r=t.attrData("pane-type");r&&e.pane.setType(n,r)}),e.pane.types=t,e.pane.setType=function(t,n){this.types.has(n)&&(this.types.get(n)(t,e),t.attrData("pane-type",n))}},["pane"])}(),function(){"use strict";Cobweb.prototype.modules.add("pane",function(e){function t(t,n){e.events.trigger("pane.split",t,n)}function n(t){e.events.trigger("pane.resize",t)}e.pane=new Pane({container:e.options.container.selector,separator:{size:3},callbacks:{onPaneSplit:t,onPaneResize:n}})})}(),function(){"use strict";function e(e){var t=e.querySelector("canvas"),n=t.getContext("2d"),r=e.width(),o=e.height();e.data("buffer",new Uint8Array(r*o*4)),e.data("imgData",n.createImageData(r,o)),t.height=o,t.width=r;var i=e.data("surface");mat4.perspective(i.proj,-45*DEG2RAD,r/o,.1,1e3)}Cobweb.prototype.modules.add("surface",function(t){t.pane.types.add("surface",function(t,n){var r=document.createElement("canvas");t.append(r);var o={proj:mat4.create(),view:mat4.create()};mat4.perspective(o.proj,-45*DEG2RAD,r.width/r.height,.1,1e3),mat4.lookAt(o.view,[0,2,4],[0,0,0],[0,1,0]),mat4.scale(o.view,o.view,[1,1.2,1]),t.data("surface",o),e(t)}),t.events.on("pane.resize",function(t){"surface"===t.attrData("pane-type")&&e(t)});var n=document.querySelector(".pane");t.pane.setType(n,"surface"),t.pane.setRender(n,"solid")},["pane-types","surface-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("render-solid",function(e){var t=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  gl_FragColor = u_color * max(0.0, dot(u_lightvector,N));}"),n=mat4.create(),r=mat4.create(),o={u_color:[1,1,1,1],u_lightvector:vec3.normalize(vec3.create(),[1,2,3]),u_model:null,u_mvp:r};e.graphics.renders.add("solid",function(i){for(var a=e.scene.root.dfs(),s=0;s<a.length;s++){var c=a[s].data;mat4.multiply(n,i.view,c.model),mat4.multiply(r,i.proj,n),o.u_model=c.model,t.uniforms(o).draw(c.mesh,c.primitive),mat4.rotateY(i.view,i.view,.01)}})},["graphics-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("surface-render",function(e){e.pane.setRender=function(t,n){var r=e.graphics.renders;r.has(n)&&t.attrData("surface-render",n)},e.pane.getRender=function(t){var n=e.graphics.renders,r=t.attrData("surface-render");return n.get(r)},e.events.on("pane.split",function(e,t){t.attrData("surface-render",e.attrData("surface-render"))})},["graphics-render"])}(),function(){"use strict";Cobweb.prototype.modules.add("graphics-render",function(e){e.graphics.renders={all:{},add:function(e,t){this.all[e]=t},get:function(e){return this.all[e]},remove:function(e){delete this.all[e]},has:function(e){return!!this.all[e]}}},["graphics"])}(),function(){"use strict";function e(e,t){var n=t.parent(".pane"),r=n.data("imgData"),o=n.data("surface"),i=n.data("buffer"),a=e.graphics.gl,s=t.clientWidth,c=t.clientHeight;a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,s,c);var l=e.pane.getRender(n);l&&l(o);var u=t.getContext("2d");u&&(a.readPixels(0,0,s,c,a.RGBA,a.UNSIGNED_BYTE,i),r.data.set(i),u.putImageData(r,0,0),u.translate(100,100))}var t=function(t){this.instance=t,this.gl=GL.create({height:screen.height,width:screen.width}),this.gl.animate(),this.gl.ondraw=function(){for(var n=document.querySelectorAll("canvas"),r=0;r<n.length;r++)e(t,n[r])},this.gl.clearColor(.4,.4,.4,1),this.gl.enable(this.gl.DEPTH_TEST)};Cobweb.prototype.modules.add("graphics",function(e){e.graphics=new t(e),e.scene.root.add({type:"object",primitive:e.graphics.gl.TRIANGLES,model:mat4.create(),mesh:GL.Mesh.cube()})},["scene"])}(),function(){"use strict";Cobweb.prototype.modules.add("scene",function(e){var t=tree({}),n={root:t};e.scene=n})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsInRyZWUuanMiLCJldmVudHMuanMiLCJsb2dnZXIuanMiLCJjb2J3ZWIuanMiLCJtb2R1bGVzLmpzIiwicGFuZS9wYW5lLXR5cGVzLmpzIiwicGFuZS9wYW5lcy5qcyIsInBhbmUvc3VyZmFjZS9zdXJmYWNlLmpzIiwicGFuZS9zdXJmYWNlL3JlbmRlci9yZW5kZXItc29saWQuanMiLCJwYW5lL3N1cmZhY2UvcmVuZGVyL3N1cmZhY2UtcmVuZGVyLmpzIiwiZ3JhcGhpYy1yZW5kZXIuanMiLCJncmFwaGljLmpzIiwic2NlbmUuanMiXSwibmFtZXMiOlsic2FmZUV4dGVuZCIsInByb3RvdHlwZSIsInByb3BlcnR5IiwidmFsdWUiLCJBcnJheSIsImEiLCJ0aGlzIiwiY29uY2F0IiwiaSIsImxlbmd0aCIsImoiLCJzcGxpY2UiLCJjYWxsYmFjayIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJIVE1MRWxlbWVudCIsIm9sZENsYXNzTmFtZXMiLCJuZXdDbGFzc05hbWVzIiwiYXJndW1lbnRzIiwiY2xhc3NOYW1lIiwidHJpbSIsInJlcGxhY2UiLCJzcGxpdCIsInVuaXF1ZSIsImpvaW4iLCJxdWVyeUNsYXNzTmFtZXMiLCJjdXJyZW50Q2xhc3NOYW1lcyIsImluZGV4IiwibmFtZSIsImluZGV4T2YiLCJyZW1vdmVDbGFzc05hbWVzIiwicmVtb3ZlRWFjaCIsImZvckVhY2giLCJhdHRyIiwid2luZG93IiwiX19kYXRhX2NhY2hlIiwiV2Vha01hcCIsImVsQXR0cnMiLCJnZXQiLCJ1bmRlZmluZWQiLCJzZXQiLCJkYXRhIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiRWxlbWVudCIsIm1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJtYXRjaGVzIiwiZG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJxdWVyeSIsInBhcmVudEVsZW1lbnQiLCJjdXJyZW50IiwiY2xpZW50SGVpZ2h0Iiwic3R5bGUiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsIndpZHRoIiwiZ3VpZCIsIm92ZXJsYXAiLCJxdWVyeVNlbGVjdG9yIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJwcm9wZXJ0aWVzIiwiaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJvYmoiLCJuZXdPYmoiLCJjbG9uZSIsIlROb2RlIiwicGFyZW50IiwiY2hpbGRyZW4iLCJpc1Jvb3QiLCJhZGQiLCJjaGlsZCIsImNvbnN0cnVjdG9yIiwicHVzaCIsInJlbW92ZSIsInNsaWNlIiwiZGZzIiwiY2hlY2siLCJvdXQiLCJiZnMiLCJ0cmVlIiwiX1ROb2RlIiwiY2FsbCIsImNyZWF0ZSIsIkV2ZW50SGFuZGxlciIsImluc3RhbmNlIiwibGlzdGVuZXJzIiwidHJpZ2dlciIsImFwcGx5IiwiY29uc29sZSIsImRlYnVnIiwib24iLCJvZmYiLCJhcnJheSIsIkxvZ2dlciIsImJpbmQiLCJpbmZvIiwid2FybiIsImVycm9yIiwibG9nIiwiZGVmYXVsdE9wdGlvbnMiLCJjb250YWluZXIiLCJzZWxlY3RvciIsIkNvYndlYiIsIm9wdGlvbnMiLCJFcnJvciIsImFkZENsYXNzIiwibG9nZ2VyIiwiZXZlbnRzIiwibW9kdWxlcyIsImxvYWQiLCJhZGRSZXZlcnNlRGVwZW5kZW5jaWVzIiwibW9kdWxlIiwiZGVwZW5kYW50IiwiZGVwZW5kZW5jaWVzIiwiZGVwUGx1Z2luIiwidG9wb2xvZ2ljYWxTb3J0IiwiY2FuZGlkYXRlcyIsInNvcnRlZE5hbWVzIiwibmV4dE5hbWUiLCJkZXBOYW1lIiwiYWxsRGVwZW5kZW5jaWVzTWV0Iiwid2FybmluZyIsImtleXMiLCJsb2FkZWRVbnRpbE5vdyIsImFsbCIsImluaXQiLCJpc0FycmF5IiwiZXgiLCJwYW5lVHlwZXMiLCJoYXMiLCJwYW5lIiwib2xkUGFuZSIsIm5ld1BhbmUiLCJvbGRUeXBlIiwiYXR0ckRhdGEiLCJzZXRUeXBlIiwidHlwZXMiLCJvblBhbmVTcGxpdCIsIm9yaWdpbiIsIm9uUGFuZVJlc2l6ZSIsIlBhbmUiLCJzZXBhcmF0b3IiLCJzaXplIiwiY2FsbGJhY2tzIiwidXBkYXRlQ2FudmFzU2l6ZSIsImNhbnZhcyIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiVWludDhBcnJheSIsImNyZWF0ZUltYWdlRGF0YSIsIm1hdDQiLCJwZXJzcGVjdGl2ZSIsInByb2oiLCJERUcyUkFEIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZCIsInZpZXciLCJsb29rQXQiLCJzY2FsZSIsInJvb3QiLCJzZXRSZW5kZXIiLCJzaGFkZXIiLCJTaGFkZXIiLCJ0ZW1wIiwibXZwIiwidW5pZm9ybXMiLCJ1X2NvbG9yIiwidV9saWdodHZlY3RvciIsInZlYzMiLCJub3JtYWxpemUiLCJ1X21vZGVsIiwidV9tdnAiLCJncmFwaGljcyIsInJlbmRlcnMiLCJzdXJmYWNlIiwib2JqcyIsInNjZW5lIiwibXVsdGlwbHkiLCJtb2RlbCIsImRyYXciLCJtZXNoIiwicHJpbWl0aXZlIiwicm90YXRlWSIsImdldFJlbmRlciIsImRyYXdSZW5kZXJUYXJnZXQiLCJpbWFnZURhdGEiLCJidWZmZXIiLCJnbCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJ2aWV3cG9ydCIsInJlbmRlciIsInJlYWRQaXhlbHMiLCJSR0JBIiwiVU5TSUdORURfQllURSIsInB1dEltYWdlRGF0YSIsInRyYW5zbGF0ZSIsIkdyYXBoaWNzIiwiR0wiLCJzY3JlZW4iLCJhbmltYXRlIiwib25kcmF3IiwicmVuZGVyVGFyZ2V0cyIsImNsZWFyQ29sb3IiLCJlbmFibGUiLCJERVBUSF9URVNUIiwidHlwZSIsIlRSSUFOR0xFUyIsIk1lc2giLCJjdWJlIl0sIm1hcHBpbmdzIjoiQ0FB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QTNFLEdBQUE0RixNQUFBQSIsImZpbGUiOiJjb2J3ZWIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoQXJyYXkucHJvdG90eXBlLCAndW5pcXVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmNvbmNhdCgpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICBmb3IodmFyIGogPSBpICsgMTsgaiA8IGEubGVuZ3RoOyArK2opXHJcbiAgICAgICAgICAgICAgICBpZihhW2ldID09PSBhW2pdKSBhLnNwbGljZShqLS0sIDEpO1xyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChBcnJheS5wcm90b3R5cGUsICdmb3JFYWNoJywgZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXNbaV0sIGksIHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdhZGRDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb2xkQ2xhc3NOYW1lcywgbmV3Q2xhc3NOYW1lcztcclxuICAgICAgICBmb3IodmFyIGkgaW4gYXJndW1lbnRzKXtcclxuICAgICAgICAgICAgb2xkQ2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBuZXdDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBvbGRDbGFzc05hbWVzLmNvbmNhdChuZXdDbGFzc05hbWVzKS51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdoYXNDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcXVlcnlDbGFzc05hbWVzLCBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBxdWVyeUNsYXNzTmFtZXMgPSAhYXJndW1lbnRzW2ldID8gW10gOiBhcmd1bWVudHNbaV0udHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgcXVlcnlDbGFzc05hbWVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBxdWVyeUNsYXNzTmFtZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDbGFzc05hbWVzLmluZGV4T2YobmFtZSkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdyZW1vdmVDbGFzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAwLCBjdXJyZW50Q2xhc3NOYW1lcywgcmVtb3ZlQ2xhc3NOYW1lcztcclxuICAgICAgICB2YXIgcmVtb3ZlRWFjaCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gY3VycmVudENsYXNzTmFtZXMuaW5kZXhPZihuYW1lKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAgY3VycmVudENsYXNzTmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBjdXJyZW50Q2xhc3NOYW1lcyA9ICF0aGlzLmNsYXNzTmFtZSA/IFtdIDogdGhpcy5jbGFzc05hbWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3NOYW1lcy5mb3JFYWNoKHJlbW92ZUVhY2gpO1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGN1cnJlbnRDbGFzc05hbWVzLnVuaXF1ZSgpLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2RhdGEnLCBmdW5jdGlvbiAoYXR0ciwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5fX2RhdGFfY2FjaGUpIHdpbmRvdy5fX2RhdGFfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHZhciBlbEF0dHJzID0gd2luZG93Ll9fZGF0YV9jYWNoZS5nZXQodGhpcykgfHwge307XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWxBdHRyc1thdHRyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB3aW5kb3cuX19kYXRhX2NhY2hlLnNldCh0aGlzLCBlbEF0dHJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYXR0cikgcmV0dXJuIGVsQXR0cnMgJiYgZWxBdHRyc1thdHRyXTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gZWxBdHRycztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICghd2luZG93Ll9fZGF0YV9jYWNoZSkgd2luZG93Ll9fZGF0YV9jYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHInLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYXR0ckRhdGEnLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKCdkYXRhLScgKyBuYW1lLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLCAnbWF0Y2hlcycsXHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHxcclxuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcclxuICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gdGhpcykge31cclxuICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncGFyZW50JywgZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB3aGlsZSAoIWN1cnJlbnQubWF0Y2hlcyhxdWVyeSkpXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hlaWdodCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICd3aWR0aCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWUgKyAncHgnO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudFdpZHRoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZCh3aW5kb3csICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnR1VJRC0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICdndWlkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBndWlkID0gbnVsbCwgb3ZlcmxhcCA9IG51bGw7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBndWlkID0gd2luZG93Lmd1aWQoKTtcclxuICAgICAgICAgICAgb3ZlcmxhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgZ3VpZCk7XHJcbiAgICAgICAgfSB3aGlsZShvdmVybGFwKTtcclxuICAgICAgICB0aGlzLmF0dHIoJ2lkJywgZ3VpZCk7XHJcbiAgICAgICAgcmV0dXJuIGd1aWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlRXh0ZW5kKHByb3RvdHlwZSwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXByb3RvdHlwZVtwcm9wZXJ0eV0pIHByb3RvdHlwZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzNCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgd2luZG93LmV4dGVuZCA9IGZ1bmN0aW9uIChkZWZhdWx0cywgcHJvcGVydGllcykge1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmQoZGVmYXVsdHNbcHJvcGVydHldLCBwcm9wZXJ0aWVzW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdHNbcHJvcGVydHldID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2FmZUV4dGVuZChPYmplY3QsICdjbG9uZScsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIgbmV3T2JqID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqKVxyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBPYmplY3QuY2xvbmUob2JqW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqW3Byb3BlcnR5XSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3T2JqO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgVE5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIFROb2RlLnByb3RvdHlwZS5pc1Jvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudDtcclxuICAgIH07XHJcblxyXG4gICAgVE5vZGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcywgZGF0YSk7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFROb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgVE5vZGUucHJvdG90eXBlLmRmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5kZnMoY2hlY2spKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcblxyXG4gICAgVE5vZGUucHJvdG90eXBlLmJmcyA9IGZ1bmN0aW9uIChjaGVjaykge1xyXG4gICAgICAgIHZhciBvdXQgPSBbXSwgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCFjaGVjayB8fCAoY2hlY2sgJiYgY2hlY2sodGhpcy5jaGlsZHJlbltpXSkpKVxyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2godGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIG91dC5jb25jYXQodGhpcy5jaGlsZHJlbltpXS5iZnMoY2hlY2spKTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cudHJlZSA9IGZ1bmN0aW9uIChkZWZhdWx0cykge1xyXG4gICAgICAgIHZhciBfVE5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIFROb2RlLmNhbGwodGhpcywgcGFyZW50LCBkYXRhKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIF9UTm9kZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFROb2RlLnByb3RvdHlwZSk7XHJcbiAgICAgICAgX1ROb2RlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IF9UTm9kZTtcclxuICAgICAgICBleHRlbmQoX1ROb2RlLnByb3RvdHlwZSwgZGVmYXVsdHMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgX1ROb2RlKG51bGwpO1xyXG4gICAgfTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0gfHwgW107XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcobmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNbbmFtZV0pIHRoaXMubGlzdGVuZXJzW25hbWVdID0gW107XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbbmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1tuYW1lXTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tuYW1lXSkge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmxpc3RlbmVyc1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKGFycmF5LmluZGV4T2YoY2FsbGJhY2spID4gLTEpIGFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuRXZlbnRIYW5kbGVyID0gRXZlbnRIYW5kbGVyO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBMb2dnZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5kZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZCgpO1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUuaW5mbyA9IGNvbnNvbGUuaW5mby5iaW5kKCk7XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS53YXJuID0gY29uc29sZS53YXJuLmJpbmQoKTtcclxuXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yID0gY29uc29sZS5lcnJvci5iaW5kKCk7XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBjb25zb2xlLmxvZy5iaW5kKCk7XHJcblxyXG4gICAgd2luZG93LkxvZ2dlciA9IExvZ2dlcjtcclxufSkoKSk7XHJcbiIsIihmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgICBjb250YWluZXI6IHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICcjY29id2ViJyxcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2ItY29udGFpbmVyJ1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIENvYndlYiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29udGFpbmVyIHNlbGVjdG9yOiBcXCcnICtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IgKyAnXFwnJyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGFzc05hbWUpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRhdGEoJ2luc3RhbmNlJywgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgQ29id2ViLnByb3RvdHlwZS5tb2R1bGVzLmxvYWQodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5Db2J3ZWIgPSBDb2J3ZWI7XHJcbn0oKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcyA9IHtcclxuICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGluaXQsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMgfHwgW107XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciAxOiBleHBlY3RlZCBzdHJpbmcsIGZvdW5kICcgKyB0eXBlb2YgbmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkZXBlbmRlbmNpZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciAyOiBleHBlY3RlZCBhcnJheSwgZm91bmQgJyArIHR5cGVvZiBkZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluaXQgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBFcnJvcignUGFyYW1ldGVyIDM6IGV4cGVjdGVkIGZ1bmN0aW9uLCBmb3VuZCAnICsgdHlwZW9mIGluaXQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXM6IGRlcGVuZGVuY2llcyxcclxuICAgICAgICAgICAgICAgIGluaXQ6IGluaXRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5tb2R1bGVzID0ge307XHJcbiAgICAgICAgICAgIGFkZFJldmVyc2VEZXBlbmRlbmNpZXModGhpcy5hbGwpO1xyXG4gICAgICAgICAgICB2YXIgc29ydGVkTmFtZXMgPSB0b3BvbG9naWNhbFNvcnQoaW5zdGFuY2UsIHRoaXMuYWxsKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3J0ZWROYW1lcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gc29ydGVkTmFtZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsW25hbWVdLmluaXQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmxvYWRlZCcsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0xvYWRpbmcgbW9kdWxlICcgKyBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMuZXJyb3InLCBuYW1lLCBleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ21vZHVsZXMubG9hZGVkLmFsbCcsIHNvcnRlZE5hbWVzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFJldmVyc2VEZXBlbmRlbmNpZXMgKG1vZHVsZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG1vZHVsZXMpIHtcclxuICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG1vZHVsZXNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmICghbW9kdWxlLmRlcGVuZGFudCkgbW9kdWxlLmRlcGVuZGFudCA9IFtdO1xyXG4gICAgICAgICAgICBpZiAobW9kdWxlLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwUGx1Z2luID0gbW9kdWxlc1ttb2R1bGUuZGVwZW5kZW5jaWVzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlcFBsdWdpbi5kZXBlbmRhbnQpIGRlcFBsdWdpbi5kZXBlbmRhbnQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBkZXBQbHVnaW4uZGVwZW5kYW50LnB1c2gobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9wb2xvZ2ljYWxTb3J0IChpbnN0YW5jZSwgbW9kdWxlcykge1xyXG4gICAgICAgIHZhciBjYW5kaWRhdGVzID0gW10sIHNvcnRlZE5hbWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBtb2R1bGVzKVxyXG4gICAgICAgICAgICBpZiAobW9kdWxlc1tuYW1lXS5kZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgIHdoaWxlIChjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIG5leHROYW1lID0gY2FuZGlkYXRlc1swXTtcclxuICAgICAgICAgICAgY2FuZGlkYXRlcy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgIGlmIChtb2R1bGVzW25leHROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG1vZHVsZXNbbmV4dE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgc29ydGVkTmFtZXMucHVzaChuZXh0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5kZXBlbmRhbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwTmFtZSA9IG1vZHVsZS5kZXBlbmRhbnRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbERlcGVuZGVuY2llc01ldChzb3J0ZWROYW1lcywgbW9kdWxlc1tkZXBOYW1lXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChkZXBOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdtb2R1bGVzLmVycm9yLm1pc3NpbmcnLCBuZXh0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIud2FybmluZygnTWlzc2luZyBtb2R1bGUgXFwnJyArIG5leHROYW1lICsgJ1xcJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhtb2R1bGVzKS5sZW5ndGggIT09IHNvcnRlZE5hbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcignbW9kdWxlcy5lcnJvci5jeWNsZScpO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0RlcGVuZGVuY3kgY3ljbGUgZm91bmQgaW4gbW9kdWxlcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc29ydGVkTmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWxsRGVwZW5kZW5jaWVzTWV0IChsb2FkZWRVbnRpbE5vdywgbW9kdWxlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAobG9hZGVkVW50aWxOb3cuaW5kZXhPZihtb2R1bGUuZGVwZW5kZW5jaWVzW2ldKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3BhbmUtdHlwZXMnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgcGFuZVR5cGVzID0ge1xyXG4gICAgICAgICAgICBhbGw6IHt9LFxyXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxbbmFtZV0gPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYWxsW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcGFuZVR5cGVzLmFkZCgnZGVmYXVsdCcsIGZ1bmN0aW9uIChwYW5lLCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZGVidWcoJ0RlZmF1bHQgcGFuZSB0eXBlICh0aGlzIGRvZXMgbm90aGluZyknKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnNwbGl0JywgZnVuY3Rpb24gKG9sZFBhbmUsIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFR5cGUgPSBvbGRQYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnKTtcclxuICAgICAgICAgICAgaWYgKG9sZFR5cGUpIGluc3RhbmNlLnBhbmUuc2V0VHlwZShuZXdQYW5lLCBvbGRUeXBlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS50eXBlcyA9IHBhbmVUeXBlcztcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRUeXBlID0gZnVuY3Rpb24gKHBhbmUsIG5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHlwZXMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGVzLmdldChuYW1lKShwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnLCBuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbJ3BhbmUnXSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdwYW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZSA9IG5ldyBQYW5lKHtcclxuICAgICAgICAgICAgY29udGFpbmVyOiBpbnN0YW5jZS5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3RvcixcclxuICAgICAgICAgICAgc2VwYXJhdG9yOiB7XHJcbiAgICAgICAgICAgICAgICBzaXplOiAzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrczoge1xyXG4gICAgICAgICAgICAgICAgLy9vblBhbmVDcmVhdGU6IG9uUGFuZUNyZWF0ZSxcclxuICAgICAgICAgICAgICAgIG9uUGFuZVNwbGl0OiBvblBhbmVTcGxpdCxcclxuICAgICAgICAgICAgICAgIG9uUGFuZVJlc2l6ZTogb25QYW5lUmVzaXplLFxyXG4gICAgICAgICAgICAgICAgLy9vblBhbmVNZXJnZTogb25QYW5lTWVyZ2UsXHJcbiAgICAgICAgICAgICAgICAvL29uUGFuZURlc3Ryb3k6IG9uUGFuZURlc3Ryb3ksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lQ3JlYXRlIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ29uUGFuZUNyZWF0ZScsIHBhbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lU3BsaXQgKG9yaWdpbiwgbmV3UGFuZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5zcGxpdCcsIG9yaWdpbiwgbmV3UGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVSZXNpemUgKHBhbmUpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BhbmUucmVzaXplJywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvblBhbmVNZXJnZSAobWVyZ2VyLCB0b1JlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVNZXJnZScsIG1lcmdlciwgdG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QYW5lRGVzdHJveSAocGFuZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvblBhbmVEZXN0cm95JywgcGFuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzdXJmYWNlJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS50eXBlcy5hZGQoJ3N1cmZhY2UnLCBmdW5jdGlvbiAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBwYW5lLmFwcGVuZChjYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9qOiBtYXQ0LmNyZWF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgdmlldzogbWF0NC5jcmVhdGUoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKGRhdGEucHJvaiwgLTQ1ICogREVHMlJBRCxcclxuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHQsIDAuMSwgMTAwMCk7XHJcbiAgICAgICAgICAgIG1hdDQubG9va0F0KGRhdGEudmlldywgWzAsMiw0XSwgWzAsMCwwXSwgWzAsMSwwXSk7XHJcbiAgICAgICAgICAgIG1hdDQuc2NhbGUoZGF0YS52aWV3LCBkYXRhLnZpZXcsIFsxLDEuMiwxXSk7XHJcbiAgICAgICAgICAgIHBhbmUuZGF0YSgnc3VyZmFjZScsIGRhdGEpO1xyXG4gICAgICAgICAgICB1cGRhdGVDYW52YXNTaXplKHBhbmUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5ldmVudHMub24oJ3BhbmUucmVzaXplJywgZnVuY3Rpb24gKHBhbmUpIHtcclxuICAgICAgICAgICAgaWYgKHBhbmUuYXR0ckRhdGEoJ3BhbmUtdHlwZScpID09PSAnc3VyZmFjZScpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNhbnZhc1NpemUocGFuZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZScpO1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0VHlwZShyb290LCAnc3VyZmFjZScpO1xyXG4gICAgICAgIGluc3RhbmNlLnBhbmUuc2V0UmVuZGVyKHJvb3QsICdzb2xpZCcpO1xyXG4gICAgfSwgWydwYW5lLXR5cGVzJywgJ3N1cmZhY2UtcmVuZGVyJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUgKHBhbmUpIHtcclxuICAgICAgICB2YXIgY2FudmFzID0gcGFuZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IHBhbmUud2lkdGgoKSwgaGVpZ2h0ID0gcGFuZS5oZWlnaHQoKTtcclxuICAgICAgICBwYW5lLmRhdGEoJ2J1ZmZlcicsIG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0ICogNCkpO1xyXG4gICAgICAgIHBhbmUuZGF0YSgnaW1nRGF0YScsIGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpKTtcclxuXHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSBwYW5lLmRhdGEoJ3N1cmZhY2UnKTtcclxuICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKGRhdGEucHJvaiwgLTQ1ICogREVHMlJBRCwgd2lkdGggLyBoZWlnaHQsIDAuMSwgMTAwMCk7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdyZW5kZXItc29saWQnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgc2hhZGVyID0gbmV3IFNoYWRlcihcclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnICtcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWMzIGFfdmVydGV4OycgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzMgYV9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzMgdl9ub3JtYWw7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9tdnA7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIG1hdDQgdV9tb2RlbDsnICtcclxuICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnICtcclxuICAgICAgICAgICAgJyAgICB2X25vcm1hbCA9ICh1X21vZGVsICogdmVjNChhX25vcm1hbCwwLjApKS54eXo7JyArXHJcbiAgICAgICAgICAgICcgICAgZ2xfUG9zaXRpb24gPSB1X212cCAqIHZlYzQoYV92ZXJ0ZXgsMS4wKTsnICtcclxuICAgICAgICAgICAgJ30nLFxyXG4gICAgICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSB2ZWMzIHVfbGlnaHR2ZWN0b3I7JyArXHJcbiAgICAgICAgICAgICd1bmlmb3JtIHZlYzQgdV9jb2xvcjsnICtcclxuICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHsnICtcclxuICAgICAgICAgICAgJyAgdmVjMyBOID0gbm9ybWFsaXplKHZfbm9ybWFsKTsnICtcclxuICAgICAgICAgICAgJyAgZ2xfRnJhZ0NvbG9yID0gdV9jb2xvciAqIG1heCgwLjAsIGRvdCh1X2xpZ2h0dmVjdG9yLE4pKTsnICtcclxuICAgICAgICAgICAgJ30nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdmFyIHRlbXAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgICAgIHZhciBtdnAgPSBtYXQ0LmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgIHVfY29sb3I6IFsxLCAxLCAxLCAxXSxcclxuICAgICAgICAgICAgdV9saWdodHZlY3RvcjogdmVjMy5ub3JtYWxpemUodmVjMy5jcmVhdGUoKSwgWzEsIDIsIDNdKSxcclxuICAgICAgICAgICAgdV9tb2RlbDogbnVsbCxcclxuICAgICAgICAgICAgdV9tdnA6IG12cFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMuYWRkKCdzb2xpZCcsIGZ1bmN0aW9uIChzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmpzID0gaW5zdGFuY2Uuc2NlbmUucm9vdC5kZnMoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2Jqc1tpXS5kYXRhO1xyXG4gICAgXHRcdFx0bWF0NC5tdWx0aXBseSh0ZW1wLCBzdXJmYWNlLnZpZXcsIG9iai5tb2RlbCk7XHJcbiAgICBcdFx0XHRtYXQ0Lm11bHRpcGx5KG12cCwgc3VyZmFjZS5wcm9qLCB0ZW1wKTtcclxuXHJcbiAgICBcdFx0XHR1bmlmb3Jtcy51X21vZGVsID0gb2JqLm1vZGVsO1xyXG4gICAgXHRcdFx0c2hhZGVyLnVuaWZvcm1zKHVuaWZvcm1zKS5kcmF3KG9iai5tZXNoLCBvYmoucHJpbWl0aXZlKTtcclxuICAgICAgICAgICAgICAgIG1hdDQucm90YXRlWShzdXJmYWNlLnZpZXcsIHN1cmZhY2UudmlldywgMC4wMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LCBbJ2dyYXBoaWNzLXJlbmRlciddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ3N1cmZhY2UtcmVuZGVyJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5zZXRSZW5kZXIgPSBmdW5jdGlvbiAocGFuZSwgbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVycyA9IGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnM7XHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJzLmhhcyhuYW1lKSlcclxuICAgICAgICAgICAgICAgIHBhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJywgbmFtZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5nZXRSZW5kZXIgPSBmdW5jdGlvbiAocGFuZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVycyA9IGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnM7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gcGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1yZW5kZXInKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbigncGFuZS5zcGxpdCcsIGZ1bmN0aW9uIChvbGRQYW5lLCBuZXdQYW5lKSB7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuYXR0ckRhdGEoJ3N1cmZhY2UtcmVuZGVyJywgb2xkUGFuZS5hdHRyRGF0YSgnc3VyZmFjZS1yZW5kZXInKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ2dyYXBoaWNzLXJlbmRlciddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzLXJlbmRlcicsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLmdyYXBoaWNzLnJlbmRlcnMgPSB7XHJcbiAgICAgICAgICAgIGFsbDoge30sXHJcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFtuYW1lXSA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFsbFtuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgWydncmFwaGljcyddKTtcclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBHcmFwaGljcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmdsID0gR0wuY3JlYXRlKHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBzY3JlZW4uaGVpZ2h0LFxyXG4gICAgICAgICAgICB3aWR0aDogc2NyZWVuLndpZHRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nbC5hbmltYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nbC5vbmRyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJUYXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyVGFyZ2V0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGRyYXdSZW5kZXJUYXJnZXQoaW5zdGFuY2UsIHJlbmRlclRhcmdldHNbaV0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nbC5jbGVhckNvbG9yKDAuNCwgMC40LCAwLjQsIDEpO1xyXG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlKHRoaXMuZ2wuREVQVEhfVEVTVCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUubW9kdWxlcy5hZGQoJ2dyYXBoaWNzJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3MoaW5zdGFuY2UpO1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lLnJvb3QuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgICAgIHByaW1pdGl2ZTogaW5zdGFuY2UuZ3JhcGhpY3MuZ2wuVFJJQU5HTEVTLFxyXG4gICAgICAgICAgICBtb2RlbDogbWF0NC5jcmVhdGUoKSxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbJ3NjZW5lJ10pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRyYXdSZW5kZXJUYXJnZXQgKGluc3RhbmNlLCBjYW52YXMpIHtcclxuICAgICAgICB2YXIgcGFuZSA9IGNhbnZhcy5wYXJlbnQoJy5wYW5lJyk7XHJcbiAgICAgICAgdmFyIGltYWdlRGF0YSA9IHBhbmUuZGF0YSgnaW1nRGF0YScpO1xyXG4gICAgICAgIHZhciBzdXJmYWNlID0gcGFuZS5kYXRhKCdzdXJmYWNlJyk7XHJcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHBhbmUuZGF0YSgnYnVmZmVyJyk7XHJcbiAgICAgICAgdmFyIGdsID0gaW5zdGFuY2UuZ3JhcGhpY3MuZ2w7XHJcblxyXG4gICAgICAgIHZhciB3aWR0aCAgPSBjYW52YXMuY2xpZW50V2lkdGgsIGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB2YXIgcmVuZGVyID0gaW5zdGFuY2UucGFuZS5nZXRSZW5kZXIocGFuZSk7XHJcbiAgICAgICAgaWYgKHJlbmRlcikgcmVuZGVyKHN1cmZhY2UpO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGdsLnJlYWRQaXhlbHMoMCwgMCwgd2lkdGgsIGhlaWdodCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgYnVmZmVyKTtcclxuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KGJ1ZmZlcik7XHJcbiAgICAgICAgICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKDEwMCwgMTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLm1vZHVsZXMuYWRkKCdzY2VuZScsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciByb290ID0gdHJlZSh7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc2NlbmUgPSB7XHJcbiAgICAgICAgICAgIHJvb3Q6IHJvb3RcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5zY2VuZSA9IHNjZW5lO1xyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iXX0=
