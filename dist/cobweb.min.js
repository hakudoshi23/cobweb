!function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(Array.prototype,"forEach",function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(HTMLElement.prototype,"addClass",function(){var e,t;for(var n in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[],this.className=e.concat(t).unique().join(" ")}),e(HTMLElement.prototype,"hasClass",function(){var e,t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[];for(var n in arguments){e=arguments[n]?arguments[n].trim().replace(/\s+/g," ").split(" "):[];for(var a=0;a<e.length;a++){var r=e[a];if(t.indexOf(r)==-1)return!1}}return!0}),e(HTMLElement.prototype,"removeClass",function(){var e,t,n=0,a=function(t){n=e.indexOf(t),n!=-1&&e.splice(n,1)};for(var r in arguments)e=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],t=arguments[r]?arguments[r].trim().replace(/\s+/g," ").split(" "):[],t.forEach(a),this.className=e.unique().join(" ")}),e(HTMLElement.prototype,"data",function(e,t){window.__data_cache||(window.__data_cache=new WeakMap);var n=window.__data_cache.get(this)||{};return t?(n[e]=t,window.__data_cache.set(this,n),this):e?n&&n[e]:n}),e(HTMLElement.prototype,"setData",function(e){return window.__data_cache||(window.__data_cache=new WeakMap),window.__data_cache.set(this,e),this}),e(HTMLElement.prototype,"attr",function(e,t){if(void 0!==t)this.setAttribute(e,t);else{if(null!==t)return this.getAttribute(e);this.removeAttribute(e)}return this}),e(HTMLElement.prototype,"attrData",function(e,t){return this.attr("data-"+e,t)}),e(Element.prototype,"matches",Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),e(HTMLElement.prototype,"parent",function(e){if(!e)return this.parentElement;for(var t=this.parentElement;!t.matches(e);)t=t.parentElement;return t}),e(HTMLElement.prototype,"height",function(){if(1!=arguments.length)return this.getBoundingClientRect().height;var e=arguments[0];"number"==typeof e?this.style.height=e+"px":this.style.height=e}),e(HTMLElement.prototype,"width",function(){if(1!=arguments.length)return this.getBoundingClientRect().width;var e=arguments[0];"number"==typeof e?this.style.width=e+"px":this.style.width=e})}(),function(){"use strict";function e(e,t,n){e[t]||(e[t]=n)}e(Object,"keys",function(){return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}}()),e(Object,"clone",function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];"object"==typeof a?t[n]=Object.clone(e[n]):t[n]=e[n]}return t})}(),function(){"use strict";var e=function(e){this.instance=e,this.listeners={}};e.prototype.trigger=function(){var e=arguments[0],t=this.listeners[e]||[];Array.prototype.splice.call(arguments,0,1);for(var n=0;n<t.length;n++)t[n].apply(null,arguments);this.instance.logger.debug("Event triggered: "+e),arguments.length>0&&this.instance.logger.debug(arguments)},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e){delete this.listeners[e]},e.prototype.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}},window.EventHandler=e}(),function(){"use strict";var e=function(t){this.handlers=[],this.addHandler(this.level.ALL,function(t,n){e.prototype.level.DEBUG===t?console.debug(n):e.prototype.level.INFO===t?console.info(n):e.prototype.level.WARNING===t?console.warn(n):e.prototype.level.ERROR===t&&console.error(n)})};e.prototype.level={ALL:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4,NONE:5},e.prototype.debug=function(t){this.log(e.prototype.level.DEBUG,t)},e.prototype.info=function(t){this.log(e.prototype.level.INFO,t)},e.prototype.warning=function(t){this.log(e.prototype.level.WARNING,t)},e.prototype.error=function(t){this.log(e.prototype.level.ERROR,t)},e.prototype.log=function(e,t){for(var n=e,a=this.handlers[n]||[];n>=0;)a.forEach(function(n){n(e,t)}),a=this.handlers[--n]||[]},e.prototype.addHandler=function(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},e.prototype.removeHandler=function(e,t){var n=this.handlers[e];if(n){var a=n.indexOf(t);a>-1&&n.splice(a,1)}},window.Logger=e}(),function(){"use strict";var e={container:{selector:"#cobweb",className:"cb-container"}},t=function(n){if(this.options=e,this.extendOptions(this.options,n||{}),this.container=document.querySelector(this.options.container.selector),!this.container)throw new Error("Invalid container selector: '"+this.options.container.selector+"'");this.container.addClass(this.options.container.className),this.container.data("instance",this),this.logger=new Logger(this),this.events=new EventHandler(this),t.prototype.plugins.load(this)};t.prototype.extendOptions=function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];"object"==typeof a?this.extendOptions(e[n],t[n]):e[n]=t[n]}},window.Cobweb=t}(),function(){"use strict";function e(e){for(var t in e){var n=e[t];if(n.dependant||(n.dependant=[]),n.dependencies.length>0)for(var a=0;a<n.dependencies.length;a++){var r=e[n.dependencies[a]];r.dependant||(r.dependant=[]),r.dependant.push(t)}}}function t(e,t){var a=[],r=[];for(var o in t)0===t[o].dependencies.length&&a.push(o);for(;a.length>0;){var i=a[0];if(a.splice(0,1),t[i]){var s=t[i];r.push(i);for(var p=0;p<s.dependant.length;p++){var c=s.dependant[p];n(r,t[c])&&a.push(c)}}else e.events.trigger("plugins.error.missing",i),e.logger.warning("Missing plugin '"+i+"'")}return Object.keys(t).length!==r.length&&(e.events.trigger("plugins.error.cycle"),e.logger.error("Dependency cycle found in plugins")),r}function n(e,t){for(var n=0;n<t.dependencies.length;n++)if(e.indexOf(t.dependencies[n])===-1)return!1;return!0}var a=function(){this.available={}};a.prototype.add=function(e,t,n){if(n=n||[],"string"!=typeof e)throw new Error("Parameter 1: expected string, found "+typeof e);if(!Array.isArray(n))throw new Error("Parameter 2: expected array, found "+typeof n);if("function"!=typeof t)throw new Error("Parameter 3: expected function, found "+typeof t);this.available[e]={dependencies:n,init:t}},a.prototype.load=function(n){n.plugins={},e(this.available);for(var a=t(n,this.available),r=0;r<a.length;r++){var o=a[r];this.available[o].init(n),n.events.trigger("plugins.loaded",o)}n.events.trigger("plugins.loaded.all",a)},Cobweb.prototype.plugins=new a}(),function(){"use strict";function e(e,t){var n=t.data("graphics-framebuffer"),a=t.parent(".pane").data("surface"),r=e.graphics.gl;r.bindFramebuffer(r.FRAMEBUFFER,n),r.clearColor(.4,.4,.4,1),r.enable(r.DEPTH_TEST);var o=new Shader("precision highp float;attribute vec3 a_vertex;attribute vec3 a_normal;varying vec3 v_normal;uniform mat4 u_mvp;uniform mat4 u_model;void main() {    v_normal = (u_model * vec4(a_normal,0.0)).xyz;    gl_Position = u_mvp * vec4(a_vertex,1.0);}","precision highp float;varying vec3 v_normal;uniform vec3 u_lightvector;uniform vec4 u_color;void main() {  vec3 N = normalize(v_normal);  gl_FragColor = u_color * max(0.0, dot(u_lightvector,N));}"),i=a.proj,s=a.view,p=mat4.create(),c=mat4.create(),l={u_color:[1,1,1,1],u_lightvector:vec3.normalize(vec3.create(),[1,1,1]),u_model:null,u_mvp:c};r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);for(var u in e.scene){var h=e.scene[u];h&&(mat4.multiply(p,s,h.model),mat4.multiply(c,i,p),l.u_model=h.model,o.uniforms(l).draw(h.mesh,h.primitive),mat4.rotateY(s,s,.01))}var d=1024,f=1024,g=new Uint8Array(d*f*4);r.readPixels(0,0,d,f,r.RGBA,r.UNSIGNED_BYTE,g);var v=t.getContext("2d");if(v){var y=v.createImageData(d,f);y.data.set(g),v.putImageData(y,0,0),v.translate(100,100)}}var t=function(t){this.instance=t,this.gl=GL.create({height:1024,width:1024}),this.gl.animate(),this.gl.ondraw=function(){var n=document.querySelectorAll("canvas");n.forEach(function(n){e(t,n)})}};t.prototype.addTarget=function(e){var t=this.gl,n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1024,1024);var a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,n);var r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:console.log("Framebuffer status error: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:console.log("Framebuffer status error: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:console.log("Framebuffer status error: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_UNSUPPORTED:console.log("Framebuffer status error: FRAMEBUFFER_UNSUPPORTED")}console.log()}else e.data("graphics-framebuffer",a)},Cobweb.prototype.plugins.add("graphics",function(e){e.graphics=new t(e),e.scene.cube={primitive:e.graphics.gl.TRIANGLES,model:mat4.create(),mesh:GL.Mesh.cube()}},["scene"])}(),function(){"use strict";Cobweb.prototype.plugins.add("pane-types",function(e){var t={availables:{},defaultType:null,add:function(e,t){this.availables[e]=t,this.defaultType||(this.defaultType=e)},remove:function(e){delete this.availables[e],this.defaultType===e&&(this.defaultType=Object.keys(this.availables)[0])},setType:function(t,n){var a=this.availables[n];a(t,e),t.attrData("pane-type",n)}};t.add("default",function(e,t){t.logger.debug("Default pane type (this does nothing)")});var n=document.querySelector(".cb-container .pane"),a=t.defaultType;a&&t.setType(n,a),e.events.on("pane.split",function(e,n){var a=e.attrData("pane-type");a&&t.setType(n,a)}),e.pane.types=t},["pane"])}(),function(){"use strict";function e(){var e=document.createElement("DIV");e.addClass("pane"),e.addEventListener("mouseover",r);var t=document.createElement("DIV");return t.addClass("pane-anchor"),t.addEventListener("mousedown",o),e.append(t),e}function t(e,t,n){var a=document.createElement("DIV"),r=e.parent(".pane-group");a[r.data("styleProperty")](n),a.addEventListener("mousedown",i),a.addClass("pane-separator"),a.data("pane1",e),a.data("pane2",t);var o="width"===r.data("styleProperty")?"ew":"ns";return a.style.cursor=o+"-resize",r.insertBefore(a,t),a}function n(e,t){var n=e.parent();if(n.hasClass(t))return n;var a=document.createElement("DIV");e.nextSibling&&e.nextSibling.data("pane1",a),e.previousSibling&&e.previousSibling.data("pane2",a),a.addClass("pane-group",t);var r="pane-group-h"===t?"width":"height";return a.setData(Object.clone(e.data())),a.style.cssText=e.style.cssText,a.data("styleProperty",r),e.attr("style",null),n.insertBefore(a,e),n.removeChild(e),a.append(e),a}function a(e,t){var n,a,r=0,o=e.querySelectorAll(":scope > .pane-separator"),i=e.querySelectorAll(":scope > .pane, :scope > .pane-group"),s=0;0!==o.length&&(s=o[0][t]()*o.length/i.length);for(var p=0;p<i.length;p++)n=i[p].data("perc-"+t),r+=n,a=n+"%",i[p].style[t]="calc("+a+" - "+s+"px)";r<100&&(n=i[i.length-1].data("perc-"+t),a=n+(100-r)+"%",i[i.length-1].style[t]="calc("+a+" - "+s+"px)")}function r(e){var t=e.target.hasClass("pane")?e.target:e.target.parent(".pane"),n=t.parent(".cb-container"),a=n.data("instance");a.pane.anchor||(a.pane.current=t)}function o(e){var t=e.target.parent(".cb-container"),n=t.data("instance");n.pane.anchor=e.target}function i(e){var t=e.target.parent(".cb-container"),n=t.data("instance");n.pane.separator=e.target,n.pane.separator.data("startX",e.pageX),n.pane.separator.data("startY",e.pageY)}function s(e){var t=document.querySelector(".cb-container"),n=t.data("instance");if(n.pane.anchor){var a=n.pane.anchor.getBoundingClientRect(),r=[a.left+a.width/2,a.top+a.height/2];r[0]-e.pageX>u?n.pane.anchor.style.backgroundColor="#000000":r[0]-e.pageX<-u?n.pane.anchor.style.backgroundColor="#FF0000":r[1]-e.pageY>u?n.pane.anchor.style.backgroundColor="#00FF00":r[1]-e.pageY<-u?n.pane.anchor.style.backgroundColor="#0000FF":n.pane.anchor.style.backgroundColor=""}if(n.pane.separator){var o=n.pane.separator,i=o.parent(),s=i.data("styleProperty"),p=i.querySelectorAll(":scope > .pane, :scope > .pane-group"),c=i.querySelectorAll(":scope > .pane-separator"),l=o.data("pane1"),h=o.data("pane2"),d=0,f=c[0][s]()*c.length/p.length+"px";if(d="height"===s?e.pageY-o.data("startY"):e.pageX-o.data("startX"),d>0&&h[s]()>100||d<0&&l[s]()>100){var g=100*d/i[s](),v=l.data("perc-"+s)+g,y=h.data("perc-"+s)-g;l.style[s]="calc("+v+"% - "+f+")",h.style[s]="calc("+y+"% - "+f+")",l.data("perc-"+s,v),h.data("perc-"+s,y),o.data("startX",e.pageX),o.data("startY",e.pageY)}}}function p(e){var t=document.querySelector(".cb-container"),n=t.data("instance");if(n.pane.anchor){n.pane.anchor.style.backgroundColor="";var a=n.pane.anchor.getBoundingClientRect(),r=[a.left+a.width/2,a.top+a.height/2];r[0]-e.pageX>u?n.pane.splitPane(n.pane.current,"h"):r[0]-e.pageX<-u?n.pane.mergePane(n.pane.current,"h"):r[1]-e.pageY>u?n.pane.mergePane(n.pane.current,"v"):r[1]-e.pageY<-u?n.pane.splitPane(n.pane.current,"v"):n.pane.anchor.style.backgroundColor="",n.pane.anchor=null}n.pane.separator&&(n.pane.separator=null)}var c={minSize:50,separator:{size:5}},l=function(t){this.instance=t,this.options=c,t.extendOptions(this.options,t.options.pane||{});var n=e();n.data("perc-height",100),n.data("perc-width",100),n.style.height="100%",n.style.width="100%",t.container.append(n),this.separator=null,this.anchor=null,this.current=null,document.addEventListener("mousemove",s),document.addEventListener("mouseup",p),t.events.on("pane.select",function(e){t.pane.current=e})};l.prototype.splitPane=function(r,o){var i="h"===o?"width":"height",s="h"===o?"height":"width";if(r[i]()>this.options.minSize){var p=n(r,"pane-group-"+o),c=e();r.nextSibling&&r.nextSibling.data("pane1",c),c.setData(Object.clone(p.data()));var l=r.data("perc-"+i);c.data("perc-"+i,l/2),r.data("perc-"+i,l/2),c.data("perc-"+s,100),r.data("perc-"+s,100),p.insertBefore(c,r.nextSibling),t(r,c,this.options.separator.size),a(p,i),this.instance.events.trigger("pane.split",r,c)}},l.prototype.mergePane=function(e,t){var n=0,r=e.parent(".pane-group");if("h"===t&&r.hasClass("pane-group-h")||"v"===t&&r.hasClass("pane-group-v")){var o="h"===t?"nextSibling":"previousSibling",i="h"===t?"width":"height";if(e[o]){var s=e[o][o];n=s.data("perc-"+i),this.instance.events.trigger("pane.merge",e,s),r.removeChild(e[o]),r.removeChild(e[o]),e[o]&&e[o].data("pane1",e);var p=r.children.length,c=e.data("perc-"+i)+n;e.data("perc-"+i,1===p?100:c),a(r,i)}}},Cobweb.prototype.plugins.add("pane",function(e){e.pane=new l(e)});var u=30}(),function(){"use strict";Cobweb.prototype.plugins.add("scene",function(e){e.scene={}})}(),function(){"use strict";Cobweb.prototype.plugins.add("surface",function(e){e.pane.types.add("surface",function(e,t){var n=document.createElement("canvas");n.style.height="100%",n.style.width="100%",n.height=1024,n.width=1024;var a={proj:mat4.create(),view:mat4.create()};mat4.perspective(a.proj,-45*DEG2RAD,n.width/n.height,.1,1e3),mat4.lookAt(a.view,[0,1,5],[0,0,0],[0,1,0]),e.data("surface",a),e.append(n),t.graphics.addTarget(n)});var t=document.querySelector(".pane");e.pane.types.setType(t,"surface")},["pane-types","graphics"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycmF5LmpzIiwiaHRtbC5qcyIsIm9iai5qcyIsImV2ZW50cy5qcyIsImxvZ2dlci5qcyIsImNvYndlYi5qcyIsInBsdWdpbnMuanMiLCJncmFwaGljLmpzIiwicGFuZS10eXBlcy5qcyIsInBhbmVzLmpzIiwic2NlbmUuanMiLCJzdXJmYWNlLmpzIl0sIm5hbWVzIjpbInNhZmVFeHRlbmQiLCJwcm90b3R5cGUiLCJwcm9wZXJ0eSIsInZhbHVlIiwiQXJyYXkiLCJhIiwidGhpcyIsImNvbmNhdCIsImkiLCJsZW5ndGgiLCJqIiwic3BsaWNlIiwiY2FsbGJhY2siLCJIVE1MRWxlbWVudCIsIm9sZENsYXNzTmFtZXMiLCJuZXdDbGFzc05hbWVzIiwiYXJndW1lbnRzIiwiY2xhc3NOYW1lIiwidHJpbSIsInJlcGxhY2UiLCJzcGxpdCIsInVuaXF1ZSIsImpvaW4iLCJxdWVyeUNsYXNzTmFtZXMiLCJjdXJyZW50Q2xhc3NOYW1lcyIsImluZGV4IiwibmFtZSIsImluZGV4T2YiLCJyZW1vdmVDbGFzc05hbWVzIiwicmVtb3ZlRWFjaCIsImZvckVhY2giLCJhdHRyIiwid2luZG93IiwiX19kYXRhX2NhY2hlIiwiV2Vha01hcCIsImVsQXR0cnMiLCJnZXQiLCJzZXQiLCJkYXRhIiwidW5kZWZpbmVkIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiRWxlbWVudCIsIm1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJtYXRjaGVzIiwiZG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJxdWVyeSIsInBhcmVudEVsZW1lbnQiLCJjdXJyZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0Iiwic3R5bGUiLCJ3aWR0aCIsIk9iamVjdCIsIm9iaiIsIlR5cGVFcnJvciIsInByb3AiLCJyZXN1bHQiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJuZXdPYmoiLCJjbG9uZSIsIkV2ZW50SGFuZGxlciIsImluc3RhbmNlIiwibGlzdGVuZXJzIiwidHJpZ2dlciIsImNhbGwiLCJhcHBseSIsImxvZ2dlciIsImRlYnVnIiwib24iLCJvZmYiLCJhcnJheSIsIkxvZ2dlciIsImhhbmRsZXJzIiwiYWRkSGFuZGxlciIsImxldmVsIiwiQUxMIiwibWVzc2FnZSIsIkRFQlVHIiwiY29uc29sZSIsIklORk8iLCJpbmZvIiwiV0FSTklORyIsIndhcm4iLCJFUlJPUiIsImVycm9yIiwiTk9ORSIsImxvZyIsIndhcm5pbmciLCJ0bXAiLCJsZXZlbEhhbmRsZXJzIiwiaGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJkZWZhdWx0T3B0aW9ucyIsImNvbnRhaW5lciIsInNlbGVjdG9yIiwiQ29id2ViIiwib3B0aW9ucyIsImV4dGVuZE9wdGlvbnMiLCJxdWVyeVNlbGVjdG9yIiwiRXJyb3IiLCJhZGRDbGFzcyIsImV2ZW50cyIsInBsdWdpbnMiLCJsb2FkIiwiZGVmYXVsdHMiLCJwcm9wZXJ0aWVzIiwiYWRkUmV2ZXJzZURlcGVuZGVuY2llcyIsInBsdWdpbiIsImRlcGVuZGFudCIsImRlcGVuZGVuY2llcyIsImRlcFBsdWdpbiIsInRvcG9sb2dpY2FsU29ydCIsImNhbmRpZGF0ZXMiLCJzb3J0ZWROYW1lcyIsIm5leHROYW1lIiwiZGVwTmFtZSIsImFsbERlcGVuZGVuY2llc01ldCIsImtleXMiLCJsb2FkZWRVbnRpbE5vdyIsIlBsdWdpbnMiLCJhdmFpbGFibGUiLCJhZGQiLCJpbml0IiwiaXNBcnJheSIsImRyYXdSZW5kZXJUYXJnZXQiLCJjYW52YXMiLCJmcmFtZWJ1ZmZlciIsInN1cmZhY2UiLCJwYXJlbnQiLCJnbCIsImdyYXBoaWNzIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJjbGVhckNvbG9yIiwiZW5hYmxlIiwiREVQVEhfVEVTVCIsInNoYWRlciIsIlNoYWRlciIsInByb2oiLCJ2aWV3IiwidGVtcCIsIm1hdDQiLCJjcmVhdGUiLCJtdnAiLCJ1bmlmb3JtcyIsInVfY29sb3IiLCJ1X2xpZ2h0dmVjdG9yIiwidmVjMyIsIm5vcm1hbGl6ZSIsInVfbW9kZWwiLCJ1X212cCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsIkRFUFRIX0JVRkZFUl9CSVQiLCJzY2VuZSIsIm11bHRpcGx5IiwibW9kZWwiLCJkcmF3IiwibWVzaCIsInByaW1pdGl2ZSIsInJvdGF0ZVkiLCJwaXhlbHMiLCJVaW50OEFycmF5IiwicmVhZFBpeGVscyIsIlJHQkEiLCJVTlNJR05FRF9CWVRFIiwiY29udGV4dCIsImdldENvbnRleHQiLCJpbWFnZURhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJwdXRJbWFnZURhdGEiLCJ0cmFuc2xhdGUiLCJHcmFwaGljcyIsIkdMIiwiYW5pbWF0ZSIsIm9uZHJhdyIsInJlbmRlclRhcmdldHMiLCJ0YXJnZXQiLCJhZGRUYXJnZXQiLCJyZW5kZXJidWZmZXIiLCJjcmVhdGVSZW5kZXJidWZmZXIiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwicmVuZGVyYnVmZmVyU3RvcmFnZSIsIkRFUFRIX0NPTVBPTkVOVDE2IiwiY3JlYXRlRnJhbWVidWZmZXIiLCJmcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlciIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiZnJhbWVidWZmZXJTdGF0dXMiLCJjaGVja0ZyYW1lYnVmZmVyU3RhdHVzIiwiRlJBTUVCVUZGRVJfQ09NUExFVEUiLCJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQiLCJGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX01JU1NJTkdfQVRUQUNITUVOVCIsIkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUyIsIkZSQU1FQlVGRkVSX1VOU1VQUE9SVEVEIiwiY3ViZSIsIlRSSUFOR0xFUyIsIk1lc2giLCJwYW5lVHlwZXMiLCJhdmFpbGFibGVzIiwiZGVmYXVsdFR5cGUiLCJyZW1vdmUiLCJzZXRUeXBlIiwicGFuZSIsImF0dHJEYXRhIiwicm9vdCIsInR5cGUiLCJvbGRQYW5lIiwibmV3UGFuZSIsIm9sZFR5cGUiLCJ0eXBlcyIsImNyZWF0ZVBhbmUiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblBhbmVNb3VzZU92ZXIiLCJhbmNob3IiLCJvbkFuY2hvck1vdXNlRG93biIsImFwcGVuZCIsImNyZWF0ZVNlcGFyYXRvciIsInBhbmUxIiwicGFuZTIiLCJzaXplIiwiZ3JvdXAiLCJvblNlcGFyYXRvck1vdXNlRG93biIsImFycm93IiwiY3Vyc29yIiwiaW5zZXJ0QmVmb3JlIiwid3JhcEJ5R3JvdXAiLCJoYXNDbGFzcyIsIm5leHRTaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIiwic3R5bGVQcm9wIiwic2V0RGF0YSIsImNzc1RleHQiLCJyZW1vdmVDaGlsZCIsInVwZGF0ZURpbWVuc2lvbnMiLCJzdHlsZUF0dHIiLCJwZXJjIiwicHJldlNpemUiLCJ0b3RhbFBlcmNzIiwic2VwcyIsInBhbmVzIiwic3ViU2l6ZSIsImV2ZW50Iiwic2VwYXJhdG9yIiwicGFnZVgiLCJwYWdlWSIsIm9uRG9jdW1lbnRNb3VzZU1vdmUiLCJiIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwiYW5jaG9yVHJlc2hob2xkIiwiYmFja2dyb3VuZENvbG9yIiwic2VwIiwiZGVsdGEiLCJkZWx0YVBlcmMiLCJuZXdQYW5lMVBlcmMiLCJuZXdQYW5lMlBlcmMiLCJvbkRvY3VtZW50TW91c2VVcCIsInNwbGl0UGFuZSIsIm1lcmdlUGFuZSIsIm1pblNpemUiLCJQYW5lIiwiYXhpcyIsIl9zdHlsZUF0dHIiLCJvcmlnaW5hbERpbWVuc2lvbiIsInJlbW92ZWRTaXplIiwic2libGluZyIsInRvUmVtb3ZlIiwic2libGluZ3MiLCJjaGlsZHJlbiIsIm5ld1BlcmMiLCJzdXJmYWNlRGF0YSIsInBlcnNwZWN0aXZlIiwiREVHMlJBRCIsImxvb2tBdCJd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QUFBZ0QsVUFBQXJELElBR0EsSUFBQWdGLEdBQUFySyxTQUFBMEQsY0FBQSxRQUNBckMsR0FBQThJLEtBQUFPLE1BQUFSLFFBQUFHLEVBQUEsYUFDQSxhQUFBIiwiZmlsZSI6ImNvYndlYi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2FmZUV4dGVuZChBcnJheS5wcm90b3R5cGUsICd1bmlxdWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMuY29uY2F0KCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IGkgKyAxOyBqIDwgYS5sZW5ndGg7ICsrailcclxuICAgICAgICAgICAgICAgIGlmKGFbaV0gPT09IGFbal0pIGEuc3BsaWNlKGotLSwgMSk7XHJcbiAgICAgICAgcmV0dXJuIGE7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEFycmF5LnByb3RvdHlwZSwgJ2ZvckVhY2gnLCBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpc1tpXSwgaSwgdGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYWZlRXh0ZW5kKHByb3RvdHlwZSwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXByb3RvdHlwZVtwcm9wZXJ0eV0pIHByb3RvdHlwZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIigoZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2FkZENsYXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvbGRDbGFzc05hbWVzLCBuZXdDbGFzc05hbWVzO1xyXG4gICAgICAgIGZvcih2YXIgaSBpbiBhcmd1bWVudHMpe1xyXG4gICAgICAgICAgICBvbGRDbGFzc05hbWVzID0gIXRoaXMuY2xhc3NOYW1lID8gW10gOiB0aGlzLmNsYXNzTmFtZS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIG5ld0NsYXNzTmFtZXMgPSAhYXJndW1lbnRzW2ldID8gW10gOiBhcmd1bWVudHNbaV0udHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IG9sZENsYXNzTmFtZXMuY29uY2F0KG5ld0NsYXNzTmFtZXMpLnVuaXF1ZSgpLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hhc0NsYXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBxdWVyeUNsYXNzTmFtZXMsIGN1cnJlbnRDbGFzc05hbWVzID0gIXRoaXMuY2xhc3NOYW1lID8gW10gOiB0aGlzLmNsYXNzTmFtZS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIHF1ZXJ5Q2xhc3NOYW1lcyA9ICFhcmd1bWVudHNbaV0gPyBbXSA6IGFyZ3VtZW50c1tpXS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBxdWVyeUNsYXNzTmFtZXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHF1ZXJ5Q2xhc3NOYW1lc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENsYXNzTmFtZXMuaW5kZXhPZihuYW1lKSA9PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3JlbW92ZUNsYXNzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IDAsIGN1cnJlbnRDbGFzc05hbWVzLCByZW1vdmVDbGFzc05hbWVzO1xyXG4gICAgICAgIHZhciByZW1vdmVFYWNoID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgaW5kZXggPSBjdXJyZW50Q2xhc3NOYW1lcy5pbmRleE9mKG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xhc3NOYW1lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDbGFzc05hbWVzID0gIXRoaXMuY2xhc3NOYW1lID8gW10gOiB0aGlzLmNsYXNzTmFtZS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzTmFtZXMgPSAhYXJndW1lbnRzW2ldID8gW10gOiBhcmd1bWVudHNbaV0udHJpbSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICByZW1vdmVDbGFzc05hbWVzLmZvckVhY2gocmVtb3ZlRWFjaCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY3VycmVudENsYXNzTmFtZXMudW5pcXVlKCkuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnZGF0YScsIGZ1bmN0aW9uIChhdHRyLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICghd2luZG93Ll9fZGF0YV9jYWNoZSkgd2luZG93Ll9fZGF0YV9jYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgdmFyIGVsQXR0cnMgPSB3aW5kb3cuX19kYXRhX2NhY2hlLmdldCh0aGlzKSB8fCB7fTtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgZWxBdHRyc1thdHRyXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB3aW5kb3cuX19kYXRhX2NhY2hlLnNldCh0aGlzLCBlbEF0dHJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYXR0cikgcmV0dXJuIGVsQXR0cnMgJiYgZWxBdHRyc1thdHRyXTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gZWxBdHRycztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICghd2luZG93Ll9fZGF0YV9jYWNoZSkgd2luZG93Ll9fZGF0YV9jYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgd2luZG93Ll9fZGF0YV9jYWNoZS5zZXQodGhpcywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHInLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnYXR0ckRhdGEnLCBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKCdkYXRhLScgKyBuYW1lLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEVsZW1lbnQucHJvdG90eXBlLCAnbWF0Y2hlcycsXHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHxcclxuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgZnVuY3Rpb24ocykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcclxuICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gdGhpcykge31cclxuICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHNhZmVFeHRlbmQoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAncGFyZW50JywgZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKCFxdWVyeSkgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMucGFyZW50RWxlbWVudDtcclxuICAgICAgICB3aGlsZSAoIWN1cnJlbnQubWF0Y2hlcyhxdWVyeSkpXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzYWZlRXh0ZW5kKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hlaWdodCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmhlaWdodCA9IHZhbHVlICsgJ3B4JztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChIVE1MRWxlbWVudC5wcm90b3R5cGUsICd3aWR0aCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWUgKyAncHgnO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgc2FmZUV4dGVuZChPYmplY3QsICdrZXlzJywgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkb250RW51bXMgPSBbICd0b1N0cmluZycsICd0b0xvY2FsZVN0cmluZycsICd2YWx1ZU9mJywgJ2hhc093blByb3BlcnR5JyxcclxuICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnY29uc3RydWN0b3InIF07XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wO1xyXG4gICAgICAgICAgICBmb3IgKHByb3AgaW4gb2JqKVxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9O1xyXG4gICAgfSgpKSk7XHJcblxyXG4gICAgc2FmZUV4dGVuZChPYmplY3QsICdjbG9uZScsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB2YXIgbmV3T2JqID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqKVxyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtwcm9wZXJ0eV0gPSBPYmplY3QuY2xvbmUob2JqW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqW3Byb3BlcnR5XSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3T2JqO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZUV4dGVuZChwcm90b3R5cGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIGlmKCFwcm90b3R5cGVbcHJvcGVydHldKSBwcm90b3R5cGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgRXZlbnRIYW5kbGVyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW25hbWVdIHx8IFtdO1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmxvZ2dlci5kZWJ1ZygnRXZlbnQgdHJpZ2dlcmVkOiAnICsgbmFtZSk7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlLmxvZ2dlci5kZWJ1Zyhhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW25hbWVdKSB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW25hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuXHJcbiAgICBFdmVudEhhbmRsZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICB9O1xyXG5cclxuICAgIEV2ZW50SGFuZGxlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNbbmFtZV0pIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmIChhcnJheS5pbmRleE9mKGNhbGxiYWNrKSA+IC0xKSBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkV2ZW50SGFuZGxlciA9IEV2ZW50SGFuZGxlcjtcclxufSkoKSk7XHJcbiIsIi8qIGpzaGludCBsb29wZnVuYzp0cnVlICovXHJcblxyXG4oKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIExvZ2dlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRIYW5kbGVyKHRoaXMubGV2ZWwuQUxMLCBmdW5jdGlvbiAobGV2ZWwsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuREVCVUcgPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuSU5GTyA9PT0gbGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChMb2dnZXIucHJvdG90eXBlLmxldmVsLldBUk5JTkcgPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTG9nZ2VyLnByb3RvdHlwZS5sZXZlbC5FUlJPUiA9PT0gbGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5sZXZlbCA9IHtcclxuICAgICAgICBBTEw6IDAsXHJcbiAgICAgICAgREVCVUc6IDEsXHJcbiAgICAgICAgSU5GTzogMixcclxuICAgICAgICBXQVJOSU5HOiAzLFxyXG4gICAgICAgIEVSUk9SOiA0LFxyXG4gICAgICAgIE5PTkU6IDUsXHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuREVCVUcsIG1lc3NhZ2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubG9nKExvZ2dlci5wcm90b3R5cGUubGV2ZWwuSU5GTywgbWVzc2FnZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybmluZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5sb2coTG9nZ2VyLnByb3RvdHlwZS5sZXZlbC5XQVJOSU5HLCBtZXNzYWdlKTtcclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5sb2coTG9nZ2VyLnByb3RvdHlwZS5sZXZlbC5FUlJPUiwgbWVzc2FnZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIHRtcCA9IGxldmVsO1xyXG4gICAgICAgIHZhciBsZXZlbEhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1t0bXBdIHx8IFtdO1xyXG4gICAgICAgIHdoaWxlICh0bXAgPj0gMCkge1xyXG4gICAgICAgICAgICBsZXZlbEhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIobGV2ZWwsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV2ZWxIYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbLS10bXBdIHx8IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5hZGRIYW5kbGVyID0gZnVuY3Rpb24gKGxldmVsLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghdGhpcy5oYW5kbGVyc1tsZXZlbF0pXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbbGV2ZWxdID0gW107XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc1tsZXZlbF0ucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2dlci5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChsZXZlbCwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgbGV2ZWxIYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbbGV2ZWxdO1xyXG4gICAgICAgIGlmIChsZXZlbEhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGxldmVsSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgbGV2ZWxIYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkxvZ2dlciA9IExvZ2dlcjtcclxufSkoKSk7XHJcbiIsIihmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgICBjb250YWluZXI6IHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICcjY29id2ViJyxcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2ItY29udGFpbmVyJ1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIENvYndlYiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGFpbmVyLnNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29udGFpbmVyIHNlbGVjdG9yOiBcXCcnICtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250YWluZXIuc2VsZWN0b3IgKyAnXFwnJyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGFzc05hbWUpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRhdGEoJ2luc3RhbmNlJywgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgQ29id2ViLnByb3RvdHlwZS5wbHVnaW5zLmxvYWQodGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUuZXh0ZW5kT3B0aW9ucyA9IGZ1bmN0aW9uIChkZWZhdWx0cywgcHJvcGVydGllcykge1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMoZGVmYXVsdHNbcHJvcGVydHldLCBwcm9wZXJ0aWVzW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdHNbcHJvcGVydHldID0gcHJvcGVydGllc1twcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LkNvYndlYiA9IENvYndlYjtcclxufSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFBsdWdpbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hdmFpbGFibGUgPSB7fTtcclxuICAgIH07XHJcblxyXG4gICAgUGx1Z2lucy5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG5hbWUsIGluaXQsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgIGRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcyB8fCBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKCdQYXJhbWV0ZXIgMTogZXhwZWN0ZWQgc3RyaW5nLCBmb3VuZCAnICsgdHlwZW9mIG5hbWUpO1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkZXBlbmRlbmNpZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciAyOiBleHBlY3RlZCBhcnJheSwgZm91bmQgJyArIHR5cGVvZiBkZXBlbmRlbmNpZXMpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdCAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IEVycm9yKCdQYXJhbWV0ZXIgMzogZXhwZWN0ZWQgZnVuY3Rpb24sIGZvdW5kICcgKyB0eXBlb2YgaW5pdCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXZhaWxhYmxlW25hbWVdID0ge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXM6IGRlcGVuZGVuY2llcyxcclxuICAgICAgICAgICAgaW5pdDogaW5pdFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFBsdWdpbnMucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihpbnN0YW5jZSkge1xyXG4gICAgICAgIGluc3RhbmNlLnBsdWdpbnMgPSB7fTtcclxuICAgICAgICBhZGRSZXZlcnNlRGVwZW5kZW5jaWVzKHRoaXMuYXZhaWxhYmxlKTtcclxuICAgICAgICB2YXIgc29ydGVkTmFtZXMgPSB0b3BvbG9naWNhbFNvcnQoaW5zdGFuY2UsIHRoaXMuYXZhaWxhYmxlKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvcnRlZE5hbWVzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IHNvcnRlZE5hbWVzW2ldO1xyXG4gICAgICAgICAgICAvL3RyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF2YWlsYWJsZVtuYW1lXS5pbml0KGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwbHVnaW5zLmxvYWRlZCcsIG5hbWUpO1xyXG4gICAgICAgICAgICAvKn0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5sb2dnZXIuZXJyb3IoJ0xvYWRpbmcgcGx1Z2luICcgKyBuYW1lICsgJzogJyArIGV4KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdwbHVnaW5zLmVycm9yJywgbmFtZSwgZXgpO1xyXG4gICAgICAgICAgICB9Ki9cclxuICAgICAgICB9XHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BsdWdpbnMubG9hZGVkLmFsbCcsIHNvcnRlZE5hbWVzKTtcclxuICAgIH07XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5wbHVnaW5zID0gbmV3IFBsdWdpbnMoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRSZXZlcnNlRGVwZW5kZW5jaWVzIChwbHVnaW5zKSB7XHJcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwbHVnaW5zKSB7XHJcbiAgICAgICAgICAgIHZhciBwbHVnaW4gPSBwbHVnaW5zW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoIXBsdWdpbi5kZXBlbmRhbnQpIHBsdWdpbi5kZXBlbmRhbnQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHBsdWdpbi5kZXBlbmRlbmNpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW4uZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcFBsdWdpbiA9IHBsdWdpbnNbcGx1Z2luLmRlcGVuZGVuY2llc1tpXV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXBQbHVnaW4uZGVwZW5kYW50KSBkZXBQbHVnaW4uZGVwZW5kYW50ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwUGx1Z2luLmRlcGVuZGFudC5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvcG9sb2dpY2FsU29ydCAoaW5zdGFuY2UsIHBsdWdpbnMpIHtcclxuICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IFtdLCBzb3J0ZWROYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcGx1Z2lucylcclxuICAgICAgICAgICAgaWYgKHBsdWdpbnNbbmFtZV0uZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChuYW1lKTtcclxuICAgICAgICB3aGlsZSAoY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0TmFtZSA9IGNhbmRpZGF0ZXNbMF07XHJcbiAgICAgICAgICAgIGNhbmRpZGF0ZXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICBpZiAocGx1Z2luc1tuZXh0TmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBwbHVnaW4gPSBwbHVnaW5zW25leHROYW1lXTtcclxuICAgICAgICAgICAgICAgIHNvcnRlZE5hbWVzLnB1c2gobmV4dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW4uZGVwZW5kYW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcE5hbWUgPSBwbHVnaW4uZGVwZW5kYW50W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxEZXBlbmRlbmNpZXNNZXQoc29ydGVkTmFtZXMsIHBsdWdpbnNbZGVwTmFtZV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goZGVwTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGx1Z2lucy5lcnJvci5taXNzaW5nJywgbmV4dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLndhcm5pbmcoJ01pc3NpbmcgcGx1Z2luIFxcJycgKyBuZXh0TmFtZSArICdcXCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocGx1Z2lucykubGVuZ3RoICE9PSBzb3J0ZWROYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ3BsdWdpbnMuZXJyb3IuY3ljbGUnKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmVycm9yKCdEZXBlbmRlbmN5IGN5Y2xlIGZvdW5kIGluIHBsdWdpbnMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNvcnRlZE5hbWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFsbERlcGVuZGVuY2llc01ldCAobG9hZGVkVW50aWxOb3csIHBsdWdpbikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2luLmRlcGVuZGVuY2llcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKGxvYWRlZFVudGlsTm93LmluZGV4T2YocGx1Z2luLmRlcGVuZGVuY2llc1tpXSkgPT09IC0xKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgR3JhcGhpY3MgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5nbCA9IEdMLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAyNCxcclxuICAgICAgICAgICAgd2lkdGg6IDEwMjRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdsLmFuaW1hdGUoKTtcclxuICAgICAgICB0aGlzLmdsLm9uZHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlclRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKTtcclxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGRyYXdSZW5kZXJUYXJnZXQoaW5zdGFuY2UsIHRhcmdldCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIEdyYXBoaWNzLnByb3RvdHlwZS5hZGRUYXJnZXQgPSBmdW5jdGlvbiAoY2FudmFzKSB7XHJcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgICAgdmFyIHJlbmRlcmJ1ZmZlciA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xyXG4gICAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCByZW5kZXJidWZmZXIpO1xyXG4gICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBnbC5ERVBUSF9DT01QT05FTlQxNiwgMTAyNCwgMTAyNCk7XHJcblxyXG4gICAgICAgIHZhciBmcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XHJcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcik7XHJcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XHJcblxyXG4gICAgICAgIHZhciBmcmFtZWJ1ZmZlclN0YXR1cyA9IGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoZ2wuRlJBTUVCVUZGRVIpO1xyXG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlclN0YXR1cyAhPT0gZ2wuRlJBTUVCVUZGRVJfQ09NUExFVEUpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChmcmFtZWJ1ZmZlclN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBnbC5GUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZyYW1lYnVmZmVyIHN0YXR1cyBlcnJvcjogRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGdsLkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGcmFtZWJ1ZmZlciBzdGF0dXMgZXJyb3I6IEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGdsLkZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRnJhbWVidWZmZXIgc3RhdHVzIGVycm9yOiBGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlMnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgZ2wuRlJBTUVCVUZGRVJfVU5TVVBQT1JURUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZyYW1lYnVmZmVyIHN0YXR1cyBlcnJvcjogRlJBTUVCVUZGRVJfVU5TVVBQT1JURUQnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbnZhcy5kYXRhKCdncmFwaGljcy1mcmFtZWJ1ZmZlcicsIGZyYW1lYnVmZmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIENvYndlYi5wcm90b3R5cGUucGx1Z2lucy5hZGQoJ2dyYXBoaWNzJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3MoaW5zdGFuY2UpO1xyXG4gICAgICAgIGluc3RhbmNlLnNjZW5lLmN1YmUgPSB7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZTogaW5zdGFuY2UuZ3JhcGhpY3MuZ2wuVFJJQU5HTEVTLFxyXG4gICAgICAgICAgICBtb2RlbDogbWF0NC5jcmVhdGUoKSxcclxuICAgICAgICAgICAgbWVzaDogR0wuTWVzaC5jdWJlKCksXHJcbiAgICAgICAgfTtcclxuICAgIH0sIFsnc2NlbmUnXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhd1JlbmRlclRhcmdldCAoaW5zdGFuY2UsIGNhbnZhcykge1xyXG4gICAgICAgIHZhciBmcmFtZWJ1ZmZlciA9IGNhbnZhcy5kYXRhKCdncmFwaGljcy1mcmFtZWJ1ZmZlcicpO1xyXG4gICAgICAgIHZhciBzdXJmYWNlID0gY2FudmFzLnBhcmVudCgnLnBhbmUnKS5kYXRhKCdzdXJmYWNlJyk7XHJcbiAgICAgICAgdmFyIGdsID0gaW5zdGFuY2UuZ3JhcGhpY3MuZ2w7XHJcblxyXG4gICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXIpO1xyXG5cclxuICAgICAgICBnbC5jbGVhckNvbG9yKDAuNCwgMC40LCAwLjQsIDEpO1xyXG4gICAgICAgIGdsLmVuYWJsZShnbC5ERVBUSF9URVNUKTtcclxuXHJcbiAgICAgICAgdmFyIHNoYWRlciA9IG5ldyBTaGFkZXIoXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyArXHJcbiAgICAgICAgICAgICdhdHRyaWJ1dGUgdmVjMyBhX3ZlcnRleDsnICtcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWMzIGFfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndmFyeWluZyB2ZWMzIHZfbm9ybWFsOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfbXZwOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfbW9kZWw7JyArXHJcbiAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyArXHJcbiAgICAgICAgICAgICcgICAgdl9ub3JtYWwgPSAodV9tb2RlbCAqIHZlYzQoYV9ub3JtYWwsMC4wKSkueHl6OycgK1xyXG4gICAgICAgICAgICAnICAgIGdsX1Bvc2l0aW9uID0gdV9tdnAgKiB2ZWM0KGFfdmVydGV4LDEuMCk7JyArXHJcbiAgICAgICAgICAgICd9JyxcclxuICAgICAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMyB2X25vcm1hbDsnICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMyB1X2xpZ2h0dmVjdG9yOycgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSB2ZWM0IHVfY29sb3I7JyArXHJcbiAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyArXHJcbiAgICAgICAgICAgICcgIHZlYzMgTiA9IG5vcm1hbGl6ZSh2X25vcm1hbCk7JyArXHJcbiAgICAgICAgICAgICcgIGdsX0ZyYWdDb2xvciA9IHVfY29sb3IgKiBtYXgoMC4wLCBkb3QodV9saWdodHZlY3RvcixOKSk7JyArXHJcbiAgICAgICAgICAgICd9J1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHZhciBwcm9qID0gc3VyZmFjZS5wcm9qO1xyXG4gICAgICAgIHZhciB2aWV3ID0gc3VyZmFjZS52aWV3O1xyXG4gICAgICAgIHZhciB0ZW1wID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICB2YXIgbXZwID0gbWF0NC5jcmVhdGUoKTtcclxuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgIHVfY29sb3I6IFsxLCAxLCAxLCAxXSxcclxuICAgICAgICAgICAgdV9saWdodHZlY3RvcjogdmVjMy5ub3JtYWxpemUodmVjMy5jcmVhdGUoKSwgWzEsIDEsIDFdKSxcclxuICAgICAgICAgICAgdV9tb2RlbDogbnVsbCxcclxuICAgICAgICAgICAgdV9tdnA6IG12cFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcclxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIGluc3RhbmNlLnNjZW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBpbnN0YW5jZS5zY2VuZVtuYW1lXTtcclxuICAgICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgXHRcdFx0bWF0NC5tdWx0aXBseSh0ZW1wLCB2aWV3LCBvYmoubW9kZWwpO1xyXG4gICAgXHRcdFx0bWF0NC5tdWx0aXBseShtdnAsIHByb2osIHRlbXApO1xyXG5cclxuICAgIFx0XHRcdHVuaWZvcm1zLnVfbW9kZWwgPSBvYmoubW9kZWw7XHJcbiAgICBcdFx0XHRzaGFkZXIudW5pZm9ybXModW5pZm9ybXMpLmRyYXcob2JqLm1lc2gsIG9iai5wcmltaXRpdmUpO1xyXG4gICAgICAgICAgICAgICAgbWF0NC5yb3RhdGVZKHZpZXcsIHZpZXcsIDAuMDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgd2lkdGggPSAxMDI0LCBoZWlnaHQgPSAxMDI0O1xyXG4gICAgICAgIHZhciBwaXhlbHMgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xyXG4gICAgICAgIGdsLnJlYWRQaXhlbHMoMCwgMCwgd2lkdGgsIGhlaWdodCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgcGl4ZWxzKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgaW1hZ2VEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhLnNldChwaXhlbHMpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xyXG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgxMDAsIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5wbHVnaW5zLmFkZCgncGFuZS10eXBlcycsIGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBwYW5lVHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZXM6IHt9LFxyXG4gICAgICAgICAgICBkZWZhdWx0VHlwZTogbnVsbCxcclxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXZhaWxhYmxlc1tuYW1lXSA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHRUeXBlKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFR5cGUgPSBuYW1lO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hdmFpbGFibGVzW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFR5cGUgPT09IG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VHlwZSA9IE9iamVjdC5rZXlzKHRoaXMuYXZhaWxhYmxlcylbMF07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldFR5cGU6IGZ1bmN0aW9uIChwYW5lLCBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLmF2YWlsYWJsZXNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhwYW5lLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBwYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnLCBuYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhbmVUeXBlcy5hZGQoJ2RlZmF1bHQnLCBmdW5jdGlvbiAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UubG9nZ2VyLmRlYnVnKCdEZWZhdWx0IHBhbmUgdHlwZSAodGhpcyBkb2VzIG5vdGhpbmcpJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNiLWNvbnRhaW5lciAucGFuZScpO1xyXG4gICAgICAgIHZhciB0eXBlID0gcGFuZVR5cGVzLmRlZmF1bHRUeXBlO1xyXG4gICAgICAgIGlmICh0eXBlKSBwYW5lVHlwZXMuc2V0VHlwZShyb290LCB0eXBlKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnNwbGl0JywgZnVuY3Rpb24gKG9sZFBhbmUsIG5ld1BhbmUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFR5cGUgPSBvbGRQYW5lLmF0dHJEYXRhKCdwYW5lLXR5cGUnKTtcclxuICAgICAgICAgICAgaWYgKG9sZFR5cGUpIHBhbmVUeXBlcy5zZXRUeXBlKG5ld1BhbmUsIG9sZFR5cGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzID0gcGFuZVR5cGVzO1xyXG4gICAgfSwgWydwYW5lJ10pO1xyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgIG1pblNpemU6IDUwLFxyXG4gICAgICAgIHNlcGFyYXRvcjoge1xyXG4gICAgICAgICAgICBzaXplOiA1XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgUGFuZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcclxuICAgICAgICBpbnN0YW5jZS5leHRlbmRPcHRpb25zKHRoaXMub3B0aW9ucywgaW5zdGFuY2Uub3B0aW9ucy5wYW5lIHx8IHt9KTtcclxuXHJcbiAgICAgICAgdmFyIHJvb3QgPSBjcmVhdGVQYW5lKCk7XHJcbiAgICAgICAgcm9vdC5kYXRhKCdwZXJjLWhlaWdodCcsIDEwMCk7XHJcbiAgICAgICAgcm9vdC5kYXRhKCdwZXJjLXdpZHRoJywgMTAwKTtcclxuICAgICAgICByb290LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICByb290LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIGluc3RhbmNlLmNvbnRhaW5lci5hcHBlbmQocm9vdCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VwYXJhdG9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFuY2hvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Eb2N1bWVudE1vdXNlTW92ZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uRG9jdW1lbnRNb3VzZVVwKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2UuZXZlbnRzLm9uKCdwYW5lLnNlbGVjdCcsIGZ1bmN0aW9uIChwYW5lKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuY3VycmVudCA9IHBhbmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFBhbmUucHJvdG90eXBlLnNwbGl0UGFuZSA9IGZ1bmN0aW9uIChwYW5lLCBheGlzKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlQXR0ciA9IGF4aXMgPT09ICdoJyA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcclxuICAgICAgICB2YXIgX3N0eWxlQXR0ciA9IGF4aXMgPT09ICdoJyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcclxuICAgICAgICBpZiAocGFuZVtzdHlsZUF0dHJdKCkgPiB0aGlzLm9wdGlvbnMubWluU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSB3cmFwQnlHcm91cChwYW5lLCAncGFuZS1ncm91cC0nICsgYXhpcyk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQYW5lID0gY3JlYXRlUGFuZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhbmUubmV4dFNpYmxpbmcpXHJcbiAgICAgICAgICAgICAgICBwYW5lLm5leHRTaWJsaW5nLmRhdGEoJ3BhbmUxJywgbmV3UGFuZSk7XHJcblxyXG4gICAgICAgICAgICBuZXdQYW5lLnNldERhdGEoT2JqZWN0LmNsb25lKGdyb3VwLmRhdGEoKSkpO1xyXG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxEaW1lbnNpb24gPSBwYW5lLmRhdGEoJ3BlcmMtJyArIHN0eWxlQXR0cik7XHJcbiAgICAgICAgICAgIG5ld1BhbmUuZGF0YSgncGVyYy0nICsgc3R5bGVBdHRyLCBvcmlnaW5hbERpbWVuc2lvbiAvIDIpO1xyXG4gICAgICAgICAgICBwYW5lLmRhdGEoJ3BlcmMtJyArIHN0eWxlQXR0ciwgb3JpZ2luYWxEaW1lbnNpb24gLyAyKTtcclxuICAgICAgICAgICAgbmV3UGFuZS5kYXRhKCdwZXJjLScgKyBfc3R5bGVBdHRyLCAxMDApO1xyXG4gICAgICAgICAgICBwYW5lLmRhdGEoJ3BlcmMtJyArIF9zdHlsZUF0dHIsIDEwMCk7XHJcbiAgICAgICAgICAgIGdyb3VwLmluc2VydEJlZm9yZShuZXdQYW5lLCBwYW5lLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgY3JlYXRlU2VwYXJhdG9yKHBhbmUsIG5ld1BhbmUsIHRoaXMub3B0aW9ucy5zZXBhcmF0b3Iuc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVEaW1lbnNpb25zKGdyb3VwLCBzdHlsZUF0dHIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5zcGxpdCcsIHBhbmUsIG5ld1BhbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgUGFuZS5wcm90b3R5cGUubWVyZ2VQYW5lID0gZnVuY3Rpb24gKHBhbmUsIGF4aXMpIHtcclxuICAgICAgICB2YXIgcmVtb3ZlZFNpemUgPSAwO1xyXG4gICAgICAgIHZhciBncm91cCA9IHBhbmUucGFyZW50KCcucGFuZS1ncm91cCcpO1xyXG4gICAgICAgIGlmICgoYXhpcyA9PT0gJ2gnICYmIGdyb3VwLmhhc0NsYXNzKCdwYW5lLWdyb3VwLWgnKSkgfHxcbiAgICAgICAgICAgIChheGlzID09PSAndicgJiYgZ3JvdXAuaGFzQ2xhc3MoJ3BhbmUtZ3JvdXAtdicpKSkge1xyXG4gICAgICAgICAgICB2YXIgc2libGluZyA9IGF4aXMgPT09ICdoJyA/ICduZXh0U2libGluZycgOiAncHJldmlvdXNTaWJsaW5nJztcclxuICAgICAgICAgICAgdmFyIHN0eWxlQXR0ciA9IGF4aXMgPT09ICdoJyA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcclxuICAgICAgICAgICAgaWYgKHBhbmVbc2libGluZ10pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b1JlbW92ZSA9IHBhbmVbc2libGluZ11bc2libGluZ107XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkU2l6ZSA9IHRvUmVtb3ZlLmRhdGEoJ3BlcmMtJyArIHN0eWxlQXR0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5ldmVudHMudHJpZ2dlcigncGFuZS5tZXJnZScsIHBhbmUsIHRvUmVtb3ZlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBncm91cC5yZW1vdmVDaGlsZChwYW5lW3NpYmxpbmddKTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnJlbW92ZUNoaWxkKHBhbmVbc2libGluZ10pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhbmVbc2libGluZ10pXHJcbiAgICAgICAgICAgICAgICAgICAgcGFuZVtzaWJsaW5nXS5kYXRhKCdwYW5lMScsIHBhbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzaWJsaW5ncyA9IGdyb3VwLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQZXJjID0gcGFuZS5kYXRhKCdwZXJjLScgKyBzdHlsZUF0dHIpICsgcmVtb3ZlZFNpemU7XHJcbiAgICAgICAgICAgICAgICBwYW5lLmRhdGEoJ3BlcmMtJyArIHN0eWxlQXR0ciwgc2libGluZ3MgPT09IDEgPyAxMDAgOiBuZXdQZXJjKTtcclxuXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEaW1lbnNpb25zKGdyb3VwLCBzdHlsZUF0dHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLnBsdWdpbnMuYWRkKCdwYW5lJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZSA9IG5ldyBQYW5lKGluc3RhbmNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhbmUgKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygncGFuZScpO1xyXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgb25QYW5lTW91c2VPdmVyKTtcclxuXHJcbiAgICAgICAgdmFyIGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIGFuY2hvci5hZGRDbGFzcygncGFuZS1hbmNob3InKTtcclxuICAgICAgICBhbmNob3IuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25BbmNob3JNb3VzZURvd24pO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGFuY2hvcik7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlU2VwYXJhdG9yIChwYW5lMSwgcGFuZTIsIHNpemUpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIHZhciBncm91cCA9IHBhbmUxLnBhcmVudCgnLnBhbmUtZ3JvdXAnKTtcclxuICAgICAgICBlbGVtZW50W2dyb3VwLmRhdGEoJ3N0eWxlUHJvcGVydHknKV0oc2l6ZSk7XHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblNlcGFyYXRvck1vdXNlRG93bik7XHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygncGFuZS1zZXBhcmF0b3InKTtcclxuICAgICAgICBlbGVtZW50LmRhdGEoJ3BhbmUxJywgcGFuZTEpO1xyXG4gICAgICAgIGVsZW1lbnQuZGF0YSgncGFuZTInLCBwYW5lMik7XHJcbiAgICAgICAgdmFyIGFycm93ID0gZ3JvdXAuZGF0YSgnc3R5bGVQcm9wZXJ0eScpID09PSAnd2lkdGgnID8gJ2V3JyA6ICducyc7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5jdXJzb3IgPSBhcnJvdyArICctcmVzaXplJztcclxuICAgICAgICBncm91cC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgcGFuZTIpO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdyYXBCeUdyb3VwIChwYW5lLCBjbGFzc05hbWUpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gcGFuZS5wYXJlbnQoKTtcclxuICAgICAgICBpZiAoIXBhcmVudC5oYXNDbGFzcyhjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgICAgICBpZiAocGFuZS5uZXh0U2libGluZylcclxuICAgICAgICAgICAgICAgIHBhbmUubmV4dFNpYmxpbmcuZGF0YSgncGFuZTEnLCBncm91cCk7XHJcbiAgICAgICAgICAgIGlmIChwYW5lLnByZXZpb3VzU2libGluZylcclxuICAgICAgICAgICAgICAgIHBhbmUucHJldmlvdXNTaWJsaW5nLmRhdGEoJ3BhbmUyJywgZ3JvdXApO1xyXG4gICAgICAgICAgICBncm91cC5hZGRDbGFzcygncGFuZS1ncm91cCcsIGNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3R5bGVQcm9wID0gY2xhc3NOYW1lID09PSAncGFuZS1ncm91cC1oJyA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcclxuICAgICAgICAgICAgdmFyIF9zdHlsZVByb3AgPSBjbGFzc05hbWUgPT09ICdwYW5lLWdyb3VwLWgnID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xyXG4gICAgICAgICAgICBncm91cC5zZXREYXRhKE9iamVjdC5jbG9uZShwYW5lLmRhdGEoKSkpO1xyXG4gICAgICAgICAgICBncm91cC5zdHlsZS5jc3NUZXh0ID0gcGFuZS5zdHlsZS5jc3NUZXh0O1xyXG4gICAgICAgICAgICBncm91cC5kYXRhKCdzdHlsZVByb3BlcnR5Jywgc3R5bGVQcm9wKTtcclxuICAgICAgICAgICAgcGFuZS5hdHRyKCdzdHlsZScsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShncm91cCwgcGFuZSk7XHJcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYW5lKTtcclxuICAgICAgICAgICAgZ3JvdXAuYXBwZW5kKHBhbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICAgICAgfSBlbHNlIHJldHVybiBwYXJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlRGltZW5zaW9ucyAoZ3JvdXAsIHN0eWxlQXR0cikge1xyXG4gICAgICAgIHZhciB0b3RhbFBlcmNzID0gMCwgcGVyYywgcHJldlNpemU7XHJcbiAgICAgICAgdmFyIHNlcHMgPSBncm91cC5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAucGFuZS1zZXBhcmF0b3InKTtcclxuICAgICAgICB2YXIgcGFuZXMgPSBncm91cC5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAucGFuZSwgOnNjb3BlID4gLnBhbmUtZ3JvdXAnKTtcclxuICAgICAgICB2YXIgc3ViU2l6ZSA9IDA7XHJcbiAgICAgICAgaWYgKHNlcHMubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgc3ViU2l6ZSA9IHNlcHNbMF1bc3R5bGVBdHRyXSgpICogc2Vwcy5sZW5ndGggLyBwYW5lcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBwZXJjID0gcGFuZXNbaV0uZGF0YSgncGVyYy0nICsgc3R5bGVBdHRyKTtcclxuICAgICAgICAgICAgdG90YWxQZXJjcyArPSBwZXJjO1xyXG4gICAgICAgICAgICBwcmV2U2l6ZSA9IHBlcmMgKyAnJSc7XHJcbiAgICAgICAgICAgIHBhbmVzW2ldLnN0eWxlW3N0eWxlQXR0cl0gPSAnY2FsYygnICsgcHJldlNpemUgKyAnIC0gJyArIHN1YlNpemUgKyAncHgpJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvdGFsUGVyY3MgPCAxMDApIHtcclxuICAgICAgICAgICAgcGVyYyA9IHBhbmVzW3BhbmVzLmxlbmd0aCAtIDFdLmRhdGEoJ3BlcmMtJyArIHN0eWxlQXR0cik7XHJcbiAgICAgICAgICAgIHByZXZTaXplID0gKHBlcmMgKyAoMTAwIC0gdG90YWxQZXJjcykpICsgJyUnO1xyXG4gICAgICAgICAgICBwYW5lc1twYW5lcy5sZW5ndGggLSAxXS5zdHlsZVtzdHlsZUF0dHJdID0gJ2NhbGMoJyArIHByZXZTaXplICsgJyAtICcgKyBzdWJTaXplICsgJ3B4KSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uUGFuZU1vdXNlT3ZlciAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgcGFuZSA9IGV2ZW50LnRhcmdldC5oYXNDbGFzcygncGFuZScpID8gZXZlbnQudGFyZ2V0IDogZXZlbnQudGFyZ2V0LnBhcmVudCgnLnBhbmUnKTtcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gcGFuZS5wYXJlbnQoJy5jYi1jb250YWluZXInKTtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBjb250YWluZXIuZGF0YSgnaW5zdGFuY2UnKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlLnBhbmUuYW5jaG9yKVxyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmN1cnJlbnQgPSBwYW5lO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uQW5jaG9yTW91c2VEb3duIChldmVudCkge1xyXG4gICAgICAgIHZhciBjb250YWluZXIgPSBldmVudC50YXJnZXQucGFyZW50KCcuY2ItY29udGFpbmVyJyk7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlID0gY29udGFpbmVyLmRhdGEoJ2luc3RhbmNlJyk7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5hbmNob3IgPSBldmVudC50YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25TZXBhcmF0b3JNb3VzZURvd24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wYXJlbnQoJy5jYi1jb250YWluZXInKTtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBjb250YWluZXIuZGF0YSgnaW5zdGFuY2UnKTtcclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnNlcGFyYXRvciA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnNlcGFyYXRvci5kYXRhKCdzdGFydFgnLCBldmVudC5wYWdlWCk7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS5zZXBhcmF0b3IuZGF0YSgnc3RhcnRZJywgZXZlbnQucGFnZVkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhbmNob3JUcmVzaGhvbGQgPSAzMDtcclxuICAgIGZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZU1vdmUgKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1jb250YWluZXInKTtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBjb250YWluZXIuZGF0YSgnaW5zdGFuY2UnKTtcclxuXHJcbiAgICAgICAgaWYgKGluc3RhbmNlLnBhbmUuYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gaW5zdGFuY2UucGFuZS5hbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IFtiLmxlZnQgKyAoYi53aWR0aCAvIDIpLCBiLnRvcCArIChiLmhlaWdodCAvIDIpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgocG9zaXRpb25bMF0gLSBldmVudC5wYWdlWCkgPiBhbmNob3JUcmVzaGhvbGQpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuYW5jaG9yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMDAwMDAwJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgocG9zaXRpb25bMF0gLSBldmVudC5wYWdlWCkgPCAtYW5jaG9yVHJlc2hob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmFuY2hvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGMDAwMCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBvc2l0aW9uWzFdIC0gZXZlbnQucGFnZVkpID4gYW5jaG9yVHJlc2hob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmFuY2hvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwRkYwMCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBvc2l0aW9uWzFdIC0gZXZlbnQucGFnZVkpIDwgLWFuY2hvclRyZXNoaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5hbmNob3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAwRkYnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5hbmNob3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnN0YW5jZS5wYW5lLnNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICB2YXIgc2VwID0gaW5zdGFuY2UucGFuZS5zZXBhcmF0b3I7XHJcbiAgICAgICAgICAgIHZhciBncm91cCA9IHNlcC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgdmFyIHN0eWxlQXR0ciA9IGdyb3VwLmRhdGEoJ3N0eWxlUHJvcGVydHknKTtcclxuICAgICAgICAgICAgdmFyIHBhbmVzID0gZ3JvdXAucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLnBhbmUsIDpzY29wZSA+IC5wYW5lLWdyb3VwJyk7XHJcbiAgICAgICAgICAgIHZhciBzZXBzID0gZ3JvdXAucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLnBhbmUtc2VwYXJhdG9yJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFuZTEgPSBzZXAuZGF0YSgncGFuZTEnKTtcclxuICAgICAgICAgICAgdmFyIHBhbmUyID0gc2VwLmRhdGEoJ3BhbmUyJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSAwO1xyXG4gICAgICAgICAgICB2YXIgc3ViU2l6ZSA9IChzZXBzWzBdW3N0eWxlQXR0cl0oKSAqIHNlcHMubGVuZ3RoIC8gcGFuZXMubGVuZ3RoKSArICdweCc7XHJcbiAgICAgICAgICAgIGlmIChzdHlsZUF0dHIgPT09ICdoZWlnaHQnKSBkZWx0YSA9IGV2ZW50LnBhZ2VZIC0gc2VwLmRhdGEoJ3N0YXJ0WScpO1xyXG4gICAgICAgICAgICBlbHNlIGRlbHRhID0gZXZlbnQucGFnZVggLSBzZXAuZGF0YSgnc3RhcnRYJyk7XHJcbiAgICAgICAgICAgIGlmICgoZGVsdGEgPiAwICYmIHBhbmUyW3N0eWxlQXR0cl0oKSA+IDEwMCkgfHwgKGRlbHRhIDwgMCAmJiBwYW5lMVtzdHlsZUF0dHJdKCkgPiAxMDApKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGFQZXJjID0gZGVsdGEgKiAxMDAgLyBncm91cFtzdHlsZUF0dHJdKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3UGFuZTFQZXJjID0gcGFuZTEuZGF0YSgncGVyYy0nICsgc3R5bGVBdHRyKSArIGRlbHRhUGVyYztcclxuICAgICAgICAgICAgICAgIHZhciBuZXdQYW5lMlBlcmMgPSBwYW5lMi5kYXRhKCdwZXJjLScgKyBzdHlsZUF0dHIpIC0gZGVsdGFQZXJjO1xyXG4gICAgICAgICAgICAgICAgcGFuZTEuc3R5bGVbc3R5bGVBdHRyXSA9ICdjYWxjKCcgKyBuZXdQYW5lMVBlcmMgKyAnJSAtICcgKyBzdWJTaXplICsgJyknO1xyXG4gICAgICAgICAgICAgICAgcGFuZTIuc3R5bGVbc3R5bGVBdHRyXSA9ICdjYWxjKCcgKyBuZXdQYW5lMlBlcmMgKyAnJSAtICcgKyBzdWJTaXplICsgJyknO1xyXG4gICAgICAgICAgICAgICAgcGFuZTEuZGF0YSgncGVyYy0nICsgc3R5bGVBdHRyLCBuZXdQYW5lMVBlcmMpO1xyXG4gICAgICAgICAgICAgICAgcGFuZTIuZGF0YSgncGVyYy0nICsgc3R5bGVBdHRyLCBuZXdQYW5lMlBlcmMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlcC5kYXRhKCdzdGFydFgnLCBldmVudC5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBzZXAuZGF0YSgnc3RhcnRZJywgZXZlbnQucGFnZVkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZVVwIChldmVudCkge1xyXG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItY29udGFpbmVyJyk7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlID0gY29udGFpbmVyLmRhdGEoJ2luc3RhbmNlJyk7XHJcblxyXG4gICAgICAgIGlmIChpbnN0YW5jZS5wYW5lLmFuY2hvcikge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLmFuY2hvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcclxuXHJcbiAgICAgICAgICAgIHZhciBiID0gaW5zdGFuY2UucGFuZS5hbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IFtiLmxlZnQgKyAoYi53aWR0aCAvIDIpLCBiLnRvcCArIChiLmhlaWdodCAvIDIpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgocG9zaXRpb25bMF0gLSBldmVudC5wYWdlWCkgPiBhbmNob3JUcmVzaGhvbGQpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuc3BsaXRQYW5lKGluc3RhbmNlLnBhbmUuY3VycmVudCwgJ2gnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgocG9zaXRpb25bMF0gLSBldmVudC5wYWdlWCkgPCAtYW5jaG9yVHJlc2hob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYW5lLm1lcmdlUGFuZShpbnN0YW5jZS5wYW5lLmN1cnJlbnQsICdoJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBvc2l0aW9uWzFdIC0gZXZlbnQucGFnZVkpID4gYW5jaG9yVHJlc2hob2xkKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYW5lLm1lcmdlUGFuZShpbnN0YW5jZS5wYW5lLmN1cnJlbnQsICd2Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHBvc2l0aW9uWzFdIC0gZXZlbnQucGFnZVkpIDwgLWFuY2hvclRyZXNoaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5zcGxpdFBhbmUoaW5zdGFuY2UucGFuZS5jdXJyZW50LCAndicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFuZS5hbmNob3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGluc3RhbmNlLnBhbmUuYW5jaG9yID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnN0YW5jZS5wYW5lLnNlcGFyYXRvcikge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wYW5lLnNlcGFyYXRvciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpKTtcclxuIiwiKChmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgQ29id2ViLnByb3RvdHlwZS5wbHVnaW5zLmFkZCgnc2NlbmUnLCBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpbnN0YW5jZS5zY2VuZSA9IHt9O1xyXG4gICAgfSk7XHJcbn0pKCkpO1xyXG4iLCIoKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBDb2J3ZWIucHJvdG90eXBlLnBsdWdpbnMuYWRkKCdzdXJmYWNlJywgZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucGFuZS50eXBlcy5hZGQoJ3N1cmZhY2UnLCBmdW5jdGlvbiAocGFuZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxMDI0O1xyXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSAxMDI0O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1cmZhY2VEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcHJvajogbWF0NC5jcmVhdGUoKSxcclxuICAgICAgICAgICAgICAgIHZpZXc6IG1hdDQuY3JlYXRlKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShzdXJmYWNlRGF0YS5wcm9qLCAtNDUgKiBERUcyUkFELCBjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gICAgICAgICAgICBtYXQ0Lmxvb2tBdChzdXJmYWNlRGF0YS52aWV3LCBbMCwxLDVdLFswLDAsMF0sIFswLDEsMF0pO1xyXG4gICAgICAgICAgICBwYW5lLmRhdGEoJ3N1cmZhY2UnLCBzdXJmYWNlRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBwYW5lLmFwcGVuZChjYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MuYWRkVGFyZ2V0KGNhbnZhcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmUnKTtcclxuICAgICAgICBpbnN0YW5jZS5wYW5lLnR5cGVzLnNldFR5cGUocm9vdCwgJ3N1cmZhY2UnKTtcclxuICAgIH0sIFsncGFuZS10eXBlcycsICdncmFwaGljcyddKTtcclxufSkoKSk7XHJcbiJdfQ==
