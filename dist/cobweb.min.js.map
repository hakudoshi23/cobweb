{"version":3,"sources":["ajax.js","array.js","html.js","obj.js","tree.js","events.js","logger.js","cobweb.js","modules.js","asset/shader.js","math/camera.js","math/octree.js","math/plane.js","math/ray.js","pane/pane-header.js","pane/pane-types.js","pane/panes.js","math/geometry/geometry.js","math/halfEdge/halfedge-cache.js","math/halfEdge/halfedge-cube.js","math/halfEdge/halfedge.js","pane/surface/surface.js","pane/surface/interaction/common-interaction.js","pane/surface/interaction/edit-interaction-render-cache.js","pane/surface/interaction/edit-interaction-render.js","pane/surface/interaction/edit-interaction-select.js","pane/surface/interaction/edit-interaction.js","pane/surface/interaction/object-interaction.js","pane/surface/interaction/surface-interaction.js","pane/surface/render/render-solid-cache.js","pane/surface/render/render-solid.js","pane/surface/render/surface-render.js","graphic.js","scene.js"],"names":["ajax","options","Object","assign","defaultAjaxOptions","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","success","response","error","method","params","objToParams","data","urlWithParams","url","open","async","send","get","Ajax","getJSON","JSON","parse","post","obj","key","encodeURIComponent","slice","window","safeExtend","prototype","property","value","Array","a","concat","i","length","j","splice","callback","s4","Math","floor","random","toString","substring","HTMLElement","oldClassNames","newClassNames","arguments","className","trim","replace","split","unique","join","queryClassNames","currentClassNames","index","name","indexOf","removeClassNames","removeEach","forEach","attr","__data_cache","WeakMap","elAttrs","undefined","set","setAttribute","getAttribute","removeAttribute","Element","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","matches","document","ownerDocument","querySelectorAll","item","query","parentElement","current","clientHeight","style","height","clientWidth","width","guid","overlap","querySelector","newObj","hasOwnProperty","clone","target","varArgs","TypeError","to","nextSource","nextKey","call","defaults","TreeNode","parent","children","isRoot","add","child","constructor","push","remove","dfs","check","out","bfs","extend","_TreeNode","create","EventHandler","isDebug","listeners","trigger","console","debug","apply","on","off","array","reset","own","keys","Logger","instance","handlers","addHandler","level","ALL","args","DEBUG","INFO","info","WARNING","warn","ERROR","log","warning","tmp","levelHandlers","handler","removeHandler","NONE","defaultOptions","container","selector","Cobweb","Error","addClass","logger","events","modules","Modules","onLoadedAll","names","topologicalSort","sortedNames","module","dependencies","depName","nextName","candidates","getInitialCandidates","dependant","dependantName","allDependenciesMet","loadedUntilNow","runCallback","callbacks","all","init","ex","dependencyModule","moduleName","asset","shader","firstSource","Shader","Camera","center","rotation","distance","projection","mat4","getViewMatrix","view","eye","getPosition","lookAt","getUpDirection","vec3","rotateX","rotateY","getDirection","direction","sub","normalize","getRay","ray","canvasCoords","canvasSize","Ray","start","auxMat","multiply","invert","transformMat4","up","vRotation","PI","computeLocalAxis","left","forward","cross","isContained","aabb","min","max","maxItems","maxDepth","padding","OctreeNode","depth","items","root","getAllItems","allItems","addItems","result","addItem","contains","splitIfNeeded","removeItem","removed","mergeIfNeeded","updateDimensions","pop","getCollidingNodes","nodes","collidingPoint","geo","rayAABBCollision","getCollidingItems","node","parentAabb","half","scale","ref","mul","Octree","_addItems","updateBounds","onVertexMove","newItems","fill","Number","MAX_VALUE","copy","Plane","point","normal","fromPoints","b","onCreateCallback","pane","header","createHeader","appendChild","div","createElement","oldPane","newPane","oldType","attrData","setType","types","typeCallbacks","onPaneType","paneHeader","onCreateHeader","dataset","paneType","onPaneCreate","onPaneSplit","origin","onPaneResize","internal","Pane","separator","size","getBarycentricCoordinates","p1","p2","p3","v0","getVectorFromPoints","v1","v2","d00","dot","d01","d11","d20","d21","denom","getNormal","v3","tmp1","tmp2","output","rayFaceCollision","vertices","triangles","triangulateFace","triangle","rayTriangleCollision","triangleNormal","rayPlaneCollision","bary","planePoint","planeNormal","numer","abs","t","minB","maxB","whichPlane","inside","quadrant","Float32Array","maxT","candidatePlane","closestPointsBetweenSegments","a0","a1","b0","b1","p_a","p_b","sc","tc","u","subtract","v","w","c","d","e","D","dP","rayPointDistance","aux","len","pointPointDistance","triangulated","computePointsCenter","points","findClosestPointIndex","position","closestIndex","newDistance","findClosestPoint","findClosestFace","faces","centers","map","face","computeCenter","superConstructor","HalfEdgeMesh","cachedHalfEdgeMesh","heMesh","cache","meshes","builder","builders","onCreate","onClean","onVertexChange","vertex","addBuilder","cube","mesh","vhandle","addVertices","face_vhandles","addFace","HalfEdgeCube","buildEdge","end","edge","HalfEdgeFace","opposite","findOppositeEdge","next","_halfEdge","outEdges","opposites","filter","he","VertexGetFaces","VertexComputeNormal","getFaces","computeRawNormal","computeNormal","bounds","halfEdges","isArray","ownIndex","he1","he2","last","prev","clear","halfEdge","getEdges","getVertices","getVerticesTriangulated","triplet","onSurfacePaneType","canvas","id","surfaceIndex","addEventListener","event","focus","surface","camera","updateCanvasSize","onCreateSurfaceHeader","label","innerHTML","context","getContext","headerHeight","imgData","createImageData","buffer","Uint8Array","perspective","DEG2RAD","surfaces","parentNode","combine","originalRotation","delta","upNormalMouseDown","clampRotations","getCoordsDelta","initial","rotations","pi2","mouseDownCoords","interactions","common","onMouseWheel","realCoords","wheelDelta","detail","onMouseMove","moving","onMouseDown","which","equals","onMouseUp","wireframeBuilder","halfEdgeMesh","buffers","colors","indices","lines","Uint16Array","GL","Mesh","load","vertexBuffers","dirty","color","_selected","upload","uniforms","u_mvp","temp","edit","onRender","scene","getObjects","model","draw","graphics","gl","LINES","toggleVertex","selection","object","toggle","originalPosition","selectedVertices","objects","faceVertices","allSelected","includes","toggleFace","arrayName","initObjectIfNeeded","delObjectIfNeeded","edges","objSelection","getFacesFromVertices","addAll","rayVertices","uniqueFaces","closestFace","getCenter","selectedObj","sceneObj","getObjectByName","isEmpty","isMouseDown","isShiftDown","isControlDown","initialCoords","currentRay","initialRay","cameraDirection","hitPointInitial","hitPointCurrent","selectionCenter","round","onKeyDown","ctrlKey","shiftKey","onKeyUp","setInteraction","isHit","hitPoint","testRayBBox","bounding","selected","getLocalCoordinates","type","onClick","layerX","layerY","onContextMenu","preventDefault","onSurfaceEvent","getInteractionCallbacks","interaction","interactionName","keepRunning","tabIndex","oncontextmenu","onkeydown","onkeyup","onmousewheel","onmousemove","onmousedown","onmouseup","onclick","initialValue","solidBuilder","normals","renderObject","primitive","indexBufferName","u_model","renderBounds","octree","updateBoundsModel","identity","lerp","translate","box","wireframe","grid","axisX","axisZ","renders","solid","lightDirection","u_lightvector","setRender","u_color","render","getRender","renderName","panes","drawRenderTarget","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","mainRender","readPixels","RGBA","UNSIGNED_BYTE","putImageData","Graphics","screen","animate","ondraw","renderTargets","clearColor","enable","DEPTH_TEST","rootNode","objectCount","lightCount","addObject","TRIANGLES","addLight","getLights"],"mappings":"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","file":"cobweb.min.js","sourcesContent":["((function(){\r\n    'use strict';\r\n\r\n    var defaultAjaxOptions = {\r\n        method: 'GET',\r\n        url: '',\r\n        data: {},\r\n        async: true,\r\n        success: null,\r\n        error: null\r\n    };\r\n\r\n    function ajax (options) {\r\n        options = Object.assign({}, defaultAjaxOptions, options);\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function() {\r\n            if (this.readyState == 4) {\r\n                if (this.status == 200) {\r\n                    if (options.success) options.success(this.response);\r\n                } else {\r\n                    if (options.error) error.success(this.response);\r\n                }\r\n            }\r\n        };\r\n        if (options.method === 'GET') {\r\n            var params = objToParams(options.data);\r\n            var urlWithParams = options.url + (params ? '?' + params : '');\r\n            xhttp.open(options.method, urlWithParams, options.async);\r\n            xhttp.send();\r\n        } else if (options.method === 'POST') {\r\n            xhttp.open(options.method, options.url, options.async);\r\n            xhttp.send(options.data);\r\n        }\r\n        return xhttp;\r\n    }\r\n\r\n    function get (url, data, success) {\r\n        if (!success) {\r\n            success = data;\r\n            data = null;\r\n        }\r\n        return Ajax.ajax({\r\n            url: url,\r\n            data: data,\r\n            success: success,\r\n            method: 'GET'\r\n        });\r\n    }\r\n\r\n    function getJSON (url, data, success) {\r\n        if (!success) {\r\n            success = data;\r\n            data = null;\r\n        }\r\n        return Ajax.ajax({\r\n            url: url,\r\n            data: data,\r\n            success: function (response) {\r\n                success(JSON.parse(response));\r\n            },\r\n            method: 'GET'\r\n        });\r\n    }\r\n\r\n    function post (url, data, success) {\r\n        if (!success) {\r\n            success = data;\r\n            data = null;\r\n        }\r\n        return Ajax.ajax({\r\n            url: url,\r\n            data: data,\r\n            success: success,\r\n            method: 'POST'\r\n        });\r\n    }\r\n\r\n    window.Ajax = {\r\n        ajax: ajax,\r\n        get: get,\r\n        getJSON: getJSON,\r\n        post: post\r\n    };\r\n\r\n    function objToParams (obj) {\r\n        var params = '';\r\n        for (var key in obj) {\r\n            var nextParam = key + '=' + encodeURIComponent(obj[key]);\r\n            params += '&' + nextParam;\r\n        }\r\n        return params.slice(1);\r\n    }\r\n})());\r\n","((function(){\r\n    'use strict';\r\n\r\n    safeExtend(Array.prototype, 'unique', function() {\r\n        var a = this.concat();\r\n        for(var i = 0; i < a.length; ++i)\r\n            for(var j = i + 1; j < a.length; ++j)\r\n                if(a[i] === a[j]) a.splice(j--, 1);\r\n        return a;\r\n    });\r\n\r\n    safeExtend(Array.prototype, 'forEach', function(callback) {\r\n        for (var i = 0; i < this.length; i++)\r\n            callback(this[i], i, this);\r\n    });\r\n\r\n    function safeExtend(prototype, property, value) {\r\n        if(!prototype[property]) prototype[property] = value;\r\n    }\r\n})());\r\n","((function(){\r\n    'use strict';\r\n\r\n    safeExtend(HTMLElement.prototype, 'addClass', function () {\r\n        var oldClassNames, newClassNames;\r\n        for(var i in arguments){\r\n            oldClassNames = !this.className ? [] : this.className.trim().replace(/\\s+/g, ' ').split(' ');\r\n            newClassNames = !arguments[i] ? [] : arguments[i].trim().replace(/\\s+/g, ' ').split(' ');\r\n            this.className = oldClassNames.concat(newClassNames).unique().join(' ');\r\n        }\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'hasClass', function () {\r\n        var queryClassNames, currentClassNames = !this.className ? [] : this.className.trim().replace(/\\s+/g, ' ').split(' ');\r\n        for(var i in arguments){\r\n            queryClassNames = !arguments[i] ? [] : arguments[i].trim().replace(/\\s+/g, ' ').split(' ');\r\n            for (var index = 0; index < queryClassNames.length; index++) {\r\n                var name = queryClassNames[index];\r\n                if (currentClassNames.indexOf(name) == -1)\r\n                    return false;\r\n            }\r\n        }\r\n        return true;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'removeClass', function () {\r\n        var index = 0, currentClassNames, removeClassNames;\r\n        var removeEach = function (name) {\r\n            index = currentClassNames.indexOf(name);\r\n            if (index != -1)\r\n                currentClassNames.splice(index, 1);\r\n        };\r\n        for(var i in arguments){\r\n            currentClassNames = !this.className ? [] : this.className.trim().replace(/\\s+/g, ' ').split(' ');\r\n            removeClassNames = !arguments[i] ? [] : arguments[i].trim().replace(/\\s+/g, ' ').split(' ');\r\n            removeClassNames.forEach(removeEach);\r\n            this.className = currentClassNames.unique().join(' ');\r\n        }\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'data', function (attr, value) {\r\n        if (!window.__data_cache) window.__data_cache = new WeakMap();\r\n        var elAttrs = window.__data_cache.get(this) || {};\r\n        if (value !== undefined) {\r\n            elAttrs[attr] = value;\r\n            window.__data_cache.set(this, elAttrs);\r\n        } else {\r\n            if (attr) return elAttrs && elAttrs[attr];\r\n            else return elAttrs;\r\n        }\r\n        return this;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'setData', function (data) {\r\n        if (!window.__data_cache) window.__data_cache = new WeakMap();\r\n        window.__data_cache.set(this, data);\r\n        return this;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'attr', function (name, value) {\r\n        if (value !== undefined)\r\n            this.setAttribute(name, value);\r\n        else if (value === null)\r\n            this.removeAttribute(name);\r\n        else\r\n            return this.getAttribute(name);\r\n        return this;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'attrData', function (name, value) {\r\n        return this.attr('data-' + name, value);\r\n    });\r\n\r\n    safeExtend(Element.prototype, 'matches',\r\n        Element.prototype.matchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector ||\r\n        Element.prototype.oMatchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        function(s) {\r\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                i = matches.length;\r\n            while (--i >= 0 && matches.item(i) !== this) {}\r\n            return i > -1;\r\n        }\r\n    );\r\n\r\n    safeExtend(HTMLElement.prototype, 'parent', function (query) {\r\n        if (!query) return this.parentElement;\r\n        var current = this.parentElement;\r\n        while (!current.matches(query))\r\n            current = current.parentElement;\r\n        return current;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'height', function () {\r\n        if (arguments.length == 1) {\r\n            var value = arguments[0];\r\n            if (typeof value === 'number')\r\n                this.style.height = value + 'px';\r\n            else\r\n                this.style.height = value;\r\n        } else\r\n            return this.clientHeight;\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'width', function () {\r\n        if (arguments.length == 1) {\r\n            var value = arguments[0];\r\n            if (typeof value === 'number')\r\n                this.style.width = value + 'px';\r\n            else\r\n                this.style.width = value;\r\n        } else\r\n            return this.clientWidth;\r\n    });\r\n\r\n    safeExtend(window, 'guid', function () {\r\n        return 'GUID-' + s4() + '-' + s4() + '-' + s4();\r\n    });\r\n\r\n    safeExtend(HTMLElement.prototype, 'guid', function () {\r\n        var guid = null, overlap = null;\r\n        do {\r\n            guid = window.guid();\r\n            overlap = document.querySelector('#' + guid);\r\n        } while(overlap);\r\n        this.attr('id', guid);\r\n        return guid;\r\n    });\r\n\r\n    function safeExtend(prototype, property, value) {\r\n        if(!prototype[property]) prototype[property] = value;\r\n    }\r\n\r\n    function s4() {\r\n        return Math.floor((1 + Math.random()) * 0x10000)\r\n            .toString(16).substring(1);\r\n    }\r\n})());\r\n","((function(){\r\n    'use strict';\r\n\r\n    safeExtend(Object, 'clone', function (obj) {\r\n        var newObj = {};\r\n        for (var property in obj)\r\n            if (obj.hasOwnProperty(property)) {\r\n                var value = obj[property];\r\n                if (typeof value === 'object')\r\n                    newObj[property] = Object.clone(obj[property]);\r\n                else\r\n                    newObj[property] = obj[property];\r\n            }\r\n        return newObj;\r\n    });\r\n\r\n    safeExtend(Object, 'assign', function(target, varArgs) {\r\n        if (target === null)\r\n            throw new TypeError('Cannot convert undefined or null to object');\r\n        var to = Object(target);\r\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var nextSource = arguments[index];\r\n            if (nextSource !== null) {\r\n                for (var nextKey in nextSource) {\r\n                    if (hasOwnProperty.call(nextSource, nextKey)) {\r\n                        to[nextKey] = nextSource[nextKey];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    });\r\n\r\n    safeExtend(Object, 'extend', function(options, defaults) {\r\n        return Object.assign({}, defaults, options);\r\n    });\r\n\r\n    function safeExtend(prototype, property, value) {\r\n        if(!prototype[property]) prototype[property] = value;\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var TreeNode = function (parent, data) {\r\n        this.parent = parent || null;\r\n        this.data = data || {};\r\n        this.children = [];\r\n    };\r\n\r\n    window.TreeNode = TreeNode;\r\n\r\n    TreeNode.prototype.isRoot = function () {\r\n        return !this.parent;\r\n    };\r\n\r\n    TreeNode.prototype.add = function (data) {\r\n        var child = new this.constructor(this, data);\r\n        this.children.push(child);\r\n        return child;\r\n    };\r\n\r\n    TreeNode.prototype.remove = function (index) {\r\n        this.children.slice(index, 1);\r\n        return this;\r\n    };\r\n\r\n    TreeNode.prototype.dfs = function (check) {\r\n        var out = [];\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            if (!check || (check && check(this.children[i])))\r\n                out.push(this.children[i]);\r\n            out.concat(this.children[i].dfs(check));\r\n        }\r\n        return out;\r\n    };\r\n\r\n    TreeNode.prototype.bfs = function (check) {\r\n        var out = [], i;\r\n        for (i = 0; i < this.children.length; i++)\r\n            if (!check || (check && check(this.children[i])))\r\n                out.push(this.children[i]);\r\n        for (i = 0; i < this.children.length; i++)\r\n            out.concat(this.children[i].bfs(check));\r\n        return out;\r\n    };\r\n\r\n    TreeNode.extend = function () {\r\n        var _TreeNode = function (parent, data) {\r\n            TreeNode.call(this, parent, data);\r\n        };\r\n        _TreeNode.prototype = Object.create(TreeNode.prototype);\r\n        _TreeNode.prototype.constructor = _TreeNode;\r\n        return new _TreeNode();\r\n    };\r\n})());\r\n","((function() {\r\n    'use strict';\r\n\r\n    var EventHandler = function (isDebug) {\r\n        this.isDebug = !!isDebug;\r\n        this.listeners = {};\r\n    };\r\n\r\n    EventHandler.prototype.trigger = function() {\r\n        var name = arguments[0];\r\n        var listeners = this.listeners[name] || [];\r\n        Array.prototype.splice.call(arguments, 0, 1);\r\n        if (this.isDebug) console.debug(name, arguments);\r\n        for (var i = 0; i < listeners.length; i++)\r\n            listeners[i].apply(null, arguments);\r\n    };\r\n\r\n    EventHandler.prototype.on = function(name, callback) {\r\n        if (!this.listeners[name]) this.listeners[name] = [];\r\n        this.listeners[name].push(callback);\r\n    };\r\n\r\n    EventHandler.prototype.off = function(name) {\r\n        delete this.listeners[name];\r\n    };\r\n\r\n    EventHandler.prototype.off = function(name, callback) {\r\n        if (this.listeners[name]) {\r\n            var array = this.listeners[name];\r\n            if (array.indexOf(callback) > -1) array.splice(index, 1);\r\n        }\r\n    };\r\n\r\n    EventHandler.prototype.reset = function() {\r\n        var own = this;\r\n        Object.keys(this.listeners).forEach(function(key) {\r\n            delete own.listeners[key];\r\n        });\r\n    };\r\n\r\n    window.EventHandler = EventHandler;\r\n})());\r\n","/* jshint loopfunc:true */\r\n\r\n((function(){\r\n    'use strict';\r\n\r\n    var Logger = function (instance) {\r\n        this.handlers = [];\r\n\r\n        this.addHandler(this.level.ALL, function (level, args) {\r\n            if (Logger.prototype.level.DEBUG === level) {\r\n                console.debug.apply(this, args);\r\n            } else if (Logger.prototype.level.INFO === level) {\r\n                console.info.apply(this, args);\r\n            } else if (Logger.prototype.level.WARNING === level) {\r\n                console.warn.apply(this, args);\r\n            } else if (Logger.prototype.level.ERROR === level) {\r\n                console.error.apply(this, args);\r\n            }\r\n        });\r\n    };\r\n\r\n    Logger.prototype.debug = function () {\r\n        this.log(Logger.prototype.level.DEBUG, arguments);\r\n    };\r\n\r\n    Logger.prototype.info = function () {\r\n        this.log(Logger.prototype.level.INFO, arguments);\r\n    };\r\n\r\n    Logger.prototype.warning = function () {\r\n        this.log(Logger.prototype.level.WARNING, arguments);\r\n    };\r\n\r\n    Logger.prototype.error = function () {\r\n        this.log(Logger.prototype.level.ERROR, arguments);\r\n    };\r\n\r\n    Logger.prototype.log = function (level, args) {\r\n        var tmp = level;\r\n        var levelHandlers = this.handlers[tmp] || [];\r\n        while (tmp >= 0) {\r\n            levelHandlers.forEach(function (handler) {\r\n                handler(level, args);\r\n            });\r\n            levelHandlers = this.handlers[--tmp] || [];\r\n        }\r\n    };\r\n\r\n    Logger.prototype.addHandler = function (level, callback) {\r\n        if (!this.handlers[level])\r\n            this.handlers[level] = [];\r\n        this.handlers[level].push(callback);\r\n    };\r\n\r\n    Logger.prototype.removeHandler = function (level, callback) {\r\n        var levelHandlers = this.handlers[level];\r\n        if (levelHandlers) {\r\n            var index = levelHandlers.indexOf(callback);\r\n            if (index > -1)\r\n                levelHandlers.splice(index, 1);\r\n        }\r\n    };\r\n\r\n    Logger.prototype.level = {\r\n        ALL: 0,\r\n        DEBUG: 1,\r\n        INFO: 2,\r\n        WARNING: 3,\r\n        ERROR: 4,\r\n        NONE: 5,\r\n    };\r\n\r\n    window.Logger = Logger;\r\n})());\r\n","(function(){\r\n    'use strict';\r\n\r\n    var defaultOptions = {\r\n        container: {\r\n            selector: '#cobweb'\r\n        }\r\n    };\r\n\r\n    var Cobweb = function (options) {\r\n        this.options = Object.assign({}, defaultOptions, options);\r\n        var instance = this;\r\n\r\n        this.container = document.querySelector(this.options.container.selector);\r\n        if (!this.container)\r\n            throw new Error('Invalid container selector: \\'' +\r\n                this.options.container.selector + '\\'');\r\n        this.container.addClass('cb-container');\r\n        this.container.data('instance', this);\r\n\r\n        this.logger = new Logger(this, true);\r\n        this.events = new EventHandler(true);\r\n        this.modules = new Modules([this], {\r\n            onLoadedAll: function (names) {\r\n                instance.events.trigger('modules.loaded.all', names);\r\n                instance.events.trigger('app.loaded');\r\n            }\r\n        });\r\n    };\r\n\r\n    window.Cobweb = Cobweb;\r\n}());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var Modules = function (params, callbacks) {\r\n        callbacks = callbacks || {};\r\n        var modules = Modules.prototype.all;\r\n        try {\r\n            var sortedNames = topologicalSort(modules);\r\n            for (var i = 0; i < sortedNames.length; i++ ) {\r\n                var name = sortedNames[i];\r\n                var module = modules[name];\r\n                try {\r\n                    module.init.apply(this, params);\r\n                    runCallback(callbacks, 'onLoaded', [name, module]);\r\n                } catch (ex) {\r\n                    console.error('Error loading module:', name, ex);\r\n                    runCallback(callbacks, 'onError', [ex, name, module]);\r\n                }\r\n            }\r\n            runCallback(callbacks, 'onLoadedAll', [sortedNames]);\r\n        } catch (ex) {\r\n            console.error('Error loading modules:', ex);\r\n        }\r\n    };\r\n\r\n    Modules.prototype.all = {};\r\n    Modules.prototype.add = function (name, init, dependencies) {\r\n        dependencies = dependencies || [];\r\n\r\n        var dependant = [];\r\n        var dependencyModule, i;\r\n        for (var moduleName in this.all) {\r\n            var module = this.all[moduleName];\r\n            for (i = 0; i < module.dependencies.length; i++)\r\n                if (module.dependencies[i] === name)\r\n                    dependant.push(moduleName);\r\n        }\r\n        for (i = 0; i < dependencies.length; i++) {\r\n            dependencyModule = this.all[dependencies[i]];\r\n            if (dependencyModule) dependencyModule.dependant.push(name);\r\n        }\r\n\r\n        this.all[name] = {\r\n            dependencies: dependencies,\r\n            dependant: dependant,\r\n            init: init\r\n        };\r\n    };\r\n\r\n    window.Modules = Modules;\r\n\r\n    function topologicalSort (modules) {\r\n        var sortedNames = [];\r\n\r\n        var module = null, i = 0;\r\n        for (var name in modules) {\r\n            module = modules[name];\r\n            for (i = 0; i < module.dependencies.length; i++) {\r\n                var depName = module.dependencies[i];\r\n                if (!modules[depName])\r\n                    throw new Error('Missing module: ' + depName);\r\n            }\r\n        }\r\n\r\n        var nextName = null;\r\n        var candidates = getInitialCandidates(modules);\r\n        while (candidates.length > 0) {\r\n            nextName = candidates.splice(0, 1)[0];\r\n            module = modules[nextName];\r\n            if (module) {\r\n                sortedNames.push(nextName);\r\n                for (i = 0; i < module.dependant.length; i++) {\r\n                    var dependantName = module.dependant[i];\r\n                    if (allDependenciesMet(sortedNames, modules[dependantName]))\r\n                        candidates.push(dependantName);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (Object.keys(modules).length !== sortedNames.length)\r\n            throw new Error('Dependency cycle!');\r\n\r\n        return sortedNames;\r\n    }\r\n\r\n    function getInitialCandidates (modules) {\r\n        var candidates = [];\r\n        for (var name in modules)\r\n            if (modules[name].dependencies.length === 0)\r\n                candidates.push(name);\r\n        return candidates;\r\n    }\r\n\r\n    function allDependenciesMet (loadedUntilNow, module) {\r\n        for (var i = 0; i < module.dependencies.length; i++)\r\n            if (loadedUntilNow.indexOf(module.dependencies[i]) === -1) return false;\r\n        return true;\r\n    }\r\n\r\n    function runCallback (callbacks, name, params) {\r\n        var callback = callbacks[name];\r\n        var isFunction = typeof callback === 'function';\r\n        if (isFunction) callback.apply(null, params);\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('shader', function (instance) {\r\n        instance.asset = instance.asset || {};\r\n        instance.asset.shader = {\r\n            get: function (name, callback) {\r\n                var shader = null, firstSource = null;\r\n                var vertSource = Ajax.get('shader/' + name + '.vert', function (response) {\r\n                    if (firstSource) {\r\n                        shader = new Shader(response, firstSource);\r\n                        callback(shader);\r\n                    } firstSource = response;\r\n                });\r\n                var fragSource = Ajax.get('shader/' + name + '.frag', function (response) {\r\n                    if (firstSource) {\r\n                        shader = new Shader(firstSource, response);\r\n                        callback(shader);\r\n                    } firstSource = response;\r\n                });\r\n            }\r\n        };\r\n    }, ['surface-interaction']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var Camera = function (center, rotation, distance) {\r\n        this.center = center || [0, 0, 0];\r\n        this.rotation = rotation || [-0.5, 0.5];\r\n        this.distance = distance || 15;\r\n        this.projection = mat4.create();\r\n    };\r\n\r\n    Camera.prototype.getViewMatrix = function (view) {\r\n        view = view || mat4.create();\r\n        var eye = [0, 0, 0];\r\n        this.getPosition(eye);\r\n        mat4.lookAt(view, eye, this.center, this.getUpDirection());\r\n        return view;\r\n    };\r\n\r\n    Camera.prototype.getPosition = function (eye) {\r\n        eye = eye || vec3.create();\r\n        vec3.set(eye, 0, 0, -this.distance);\r\n        vec3.rotateX(eye, eye, this.rotation[1]);\r\n        vec3.rotateY(eye, eye, -this.rotation[0]);\r\n        return eye;\r\n    };\r\n\r\n    Camera.prototype.getDirection = function (direction) {\r\n        direction = direction || vec3.create();\r\n        var eye = this.getPosition();\r\n        vec3.sub(direction, this.center, eye);\r\n        vec3.normalize(direction, direction);\r\n        return direction;\r\n    };\r\n\r\n    Camera.prototype.getRay = function (ray, canvasCoords, canvasSize) {\r\n        ray = ray || new Math.Ray();\r\n        this.getPosition(ray.start);\r\n        vec3.set(ray.direction, canvasCoords[0] / (canvasSize[0] * 0.5) - 1.0,\r\n            canvasCoords[1] / (canvasSize[1] * 0.5) - 1.0, 1);\r\n        var auxMat = mat4.create();\r\n        mat4.multiply(auxMat, this.projection, this.getViewMatrix());\r\n        mat4.invert(auxMat, auxMat);\r\n        vec3.transformMat4(ray.direction, ray.direction, auxMat);\r\n        vec3.normalize(ray.direction, ray.direction);\r\n        return ray;\r\n    };\r\n\r\n    Camera.prototype.getUpDirection = function (up) {\r\n        up = up || vec3.create();\r\n        var vRotation = this.rotation[1];\r\n        if (vRotation >= Math.PI / 2 &&\r\n            vRotation <= ((Math.PI * 3) / 2))\r\n            vec3.set(up, 0, 1, 0);\r\n        else vec3.set(up, 0, -1, 0);\r\n        return up;\r\n    };\r\n\r\n    Camera.prototype.computeLocalAxis = function () {\r\n        var left = [0, 0, 0];\r\n        var up = [0, 0, 0];\r\n\r\n        var forward = this.getDirection();\r\n        vec3.cross(left, forward, [0, 1, 0]);\r\n        vec3.cross(up, forward, left);\r\n\r\n        return {up: up, left: left};\r\n    };\r\n\r\n    window.Math.Camera = Camera;\r\n})());\r\n","(function () {\r\n\t'use strict';\r\n\r\n\tvar defaultOptions = {\r\n\t\tmaxItems: 5,\r\n\t\tmaxDepth: 5,\r\n\t\tpadding: 0.1\r\n\t};\r\n\r\n\tvar OctreeNode = function (parent, depth) {\r\n\t\tthis.items = [];\r\n\t\tthis.children = null;\r\n\t\tthis.depth = depth || 0;\r\n\t\tthis.parent = parent || null;\r\n\t\tthis.aabb = { max: [0, 0, 0], min: [0, 0, 0] };\r\n\r\n\t\tthis.root = this;\r\n\t\twhile (this.root.parent !== null)\r\n\t\t\tthis.root = this.root.parent;\r\n\t};\r\n\r\n\tOctreeNode.prototype.getAllItems = function () {\r\n        if (!this.children) return this.items;\r\n        else {\r\n            var allItems = [];\r\n            for (var i = 0; i < this.children.length; i++)\r\n                allItems = allItems.concat(this.children[i].getAllItems());\r\n            return allItems;\r\n        }\r\n\t};\r\n\r\n\tOctreeNode.prototype.addItems = function (items) {\r\n\t\tvar result = false;\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\tvar item = items[i];\r\n\t\t\tresult |= this.addItem(item);\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\r\n\tOctreeNode.prototype.addItem = function (item) {\r\n\t\tif (this.contains(item)) {\r\n\t\t\tif (this.children) {\r\n\t\t\t\tfor (var i = 0; i < 8; i++)\r\n\t\t\t\t\tif (this.children[i].addItem(item))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.items.push(item);\r\n\t\t\t\tthis.splitIfNeeded();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tOctreeNode.prototype.removeItem = function (item) {\r\n\t\tvar removed = false;\r\n\t\tvar index = this.items.indexOf(item);\r\n\t\tif (index > -1) {\r\n\t\t\tthis.items.splice(index, 1);\r\n\t\t\tthis.mergeIfNeeded();\r\n\t\t\tremoved = true;\r\n\t\t} else {\r\n\t\t\tif (this.children) {\r\n\t\t\t\tfor (var i = 0; i < this.children.length; i++) {\r\n\t\t\t\t\tremoved |= this.children[i].removeItem(item);\r\n\t\t\t\t\tif (removed) break;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (removed) this.mergeIfNeeded();\r\n\t\treturn removed;\r\n\t};\r\n\r\n\tOctreeNode.prototype.splitIfNeeded = function () {\r\n\t\tif (this.root.options.maxItems < this.items.length &&\r\n\t\t\tthis.root.options.maxDepth >= this.depth) {\r\n\t\t\tthis.children = [];\r\n\t\t\tfor (var i = 0; i < 8; i++) {\r\n\t\t\t\tthis.children[i] = new OctreeNode(this, this.depth + 1);\r\n\t\t\t\tthis.children[i].updateDimensions(this.aabb, i);\r\n\t\t\t}\r\n\t\t\twhile (this.items.length > 0) {\r\n\t\t\t\tvar item = this.items.pop();\r\n\t\t\t\tfor (i = 0; i < 8; i++) {\r\n\t\t\t\t\tvar child = this.children[i];\r\n\t\t\t\t\tif (child.addItem(item)) break;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tOctreeNode.prototype.mergeIfNeeded = function () {\r\n\t\t//console.debug('mergeIfNeeded');\r\n\t};\r\n\r\n\tOctreeNode.prototype.contains = function (item) {\r\n\t\treturn isContained(item, this.aabb);\r\n\t};\r\n\r\n\tOctreeNode.prototype.getCollidingNodes = function (ray) {\r\n\t\tvar nodes = [];\r\n\t\tvar aabb = this.aabb;\r\n\t\tvar collidingPoint = [0, 0, 0];\r\n\t\tif (Math.geo.rayAABBCollision(ray.start, ray.direction,\r\n\t\t\tthis.aabb.min, this.aabb.max, collidingPoint)) {\r\n\t\t\tif (this.children) {\r\n\t\t\t\tfor (var i = 0; i < this.children.length; i++) {\r\n\t\t\t\t\tvar child = this.children[i];\r\n\t\t\t\t\tnodes = nodes.concat(child.getCollidingNodes(ray));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnodes.push(this);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn nodes;\r\n\t};\r\n\r\n\tOctreeNode.prototype.getCollidingItems = function (ray) {\r\n\t\tvar items = [];\r\n\t\tthis.getCollidingNodes(ray).forEach(function (node) {\r\n\t\t\titems = items.concat(node.items);\r\n\t\t});\r\n\t\treturn items;\r\n\t};\r\n\r\n\tOctreeNode.prototype.updateDimensions = function (parentAabb, index) {\r\n\t\tvar half = [0, 0, 0];\r\n\t\tvec3.sub(half, parentAabb.max, parentAabb.min);\r\n\t\tvec3.scale(half, half, 0.5);\r\n\t\tvar ref = [!(index & 1), !(index & 2), !(index & 4)];\r\n\t\tvec3.mul(this.aabb.min, half, ref);\r\n\t\tvec3.add(this.aabb.min, this.aabb.min, parentAabb.min);\r\n\t\tvec3.add(this.aabb.max, this.aabb.min, half);\r\n\t\tif (this.children)\r\n\t\t\tfor (var i = 0; i < this.children.length; i++)\r\n\t\t\t\tthis.children[i].updateDimensions(this.aabb, i);\r\n\t};\r\n\r\n\tvar Octree = function (options) {\r\n\t\tthis.options = Object.assign({}, defaultOptions, options);\r\n\t\tOctreeNode.call(this);\r\n\t};\r\n\r\n\tOctree.prototype = Object.create(OctreeNode.prototype);\r\n\tOctree.prototype.constructor = OctreeNode;\r\n\r\n\tvar _addItems = Octree.prototype.addItems;\r\n\tOctree.prototype.addItems = function (items) {\r\n\t\tthis.updateBounds(items);\r\n\t\t_addItems.call(this, items);\r\n\t};\r\n\r\n\tOctree.prototype.onVertexMove = function (item) {\r\n\t\tthis.updateDimensions();\r\n\t\tif (this.removeItem(item)) this.addItem(item);\r\n\t};\r\n\r\n\tOctree.prototype.updateDimensions = function (newItems) {\r\n\t\tvar allItems = this.getAllItems();\r\n\t\tif (newItems) allItems.push(newItems);\r\n\t\tthis.updateBounds(allItems);\r\n\t\tif (this.children) {\r\n\t\t\tfor (var i = 0; i < this.children.length; i++) {\r\n\t\t\t\tthis.children[i].updateDimensions(this.aabb, i);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tOctree.prototype.updateBounds = function (items) {\r\n\t\tvar max = [0, 0, 0].fill(-Number.MAX_VALUE);\r\n\t\tvar min = [0, 0, 0].fill(Number.MAX_VALUE);\r\n\t\tvar padding = this.options.padding;\r\n\t\titems.forEach(function (item) {\r\n\t\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\t\tmin[j] = Math.min(min[j], item[j] - padding);\r\n\t\t\t\tmax[j] = Math.max(max[j], item[j] + padding);\r\n\t\t\t}\r\n\t\t});\r\n\t\tvec3.copy(this.aabb.min, min);\r\n\t\tvec3.copy(this.aabb.max, max);\r\n\t};\r\n\r\n\tMath.Octree = Octree;\r\n\r\n\tfunction isContained (item, aabb) {\r\n\t\tfor (var j = 0; j < 3; j++) {\r\n\t\t\tif (item[j] < aabb.min[j]) return false;\r\n\t\t\tif (item[j] > aabb.max[j]) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n})();\r\n","((function () {\r\n    'use strict';\r\n\r\n    var Plane = function (point, normal) {\r\n        this.normal = normal || [0, 1, 0];\r\n        this.point = point || vec3.create();\r\n        vec3.normalize(this.normal, this.normal);\r\n    };\r\n\r\n    window.Math.Plane = Plane;\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var Ray = function (start, direction) {\r\n        this.direction = direction || [0, 0, 1];\r\n        this.start = start || vec3.create();\r\n        vec3.normalize(this.direction, this.direction);\r\n    };\r\n\r\n    Ray.fromPoints = function (a, b) {\r\n        var direction = vec3.create();\r\n        vec3.sub(direction, b, a);\r\n        return new Ray(a, direction);\r\n    };\r\n\r\n    window.Math.Ray = Ray;\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('pane-header', function (instance) {\r\n        instance.events.on('pane.create', function (pane) {\r\n            onCreateCallback(pane, instance);\r\n        });\r\n    }, ['pane-types']);\r\n\r\n    function onCreateCallback (pane, instance) {\r\n        var header = createHeader();\r\n        pane.appendChild(header);\r\n    }\r\n\r\n    function createHeader () {\r\n        var div = document.createElement('div');\r\n        div.className = 'pane-header';\r\n        return div;\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('pane-types', function (instance) {\r\n\r\n        instance.events.on('pane.split', function (oldPane, newPane) {\r\n            var oldType = oldPane.attrData('pane-type');\r\n            if (oldType) instance.pane.setType(newPane, oldType);\r\n        });\r\n\r\n        instance.pane.types = {};\r\n\r\n        instance.pane.setType = function (pane, name) {\r\n            if (this.types[name]) {\r\n                var typeCallbacks = this.types[name];\r\n                typeCallbacks.onPaneType(pane, instance);\r\n                var paneHeader = pane.querySelector('.pane-header');\r\n                typeCallbacks.onCreateHeader(paneHeader, instance);\r\n                pane.dataset.paneType = name;\r\n            }\r\n        };\r\n    }, ['pane']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('pane', function (instance) {\r\n        instance.events.on('app.loaded', function () {\r\n            instance.pane.internal = new Pane({\r\n                container: instance.options.container.selector,\r\n                separator: {\r\n                    size: 3\r\n                },\r\n                callbacks: {\r\n                    onPaneCreate: onPaneCreate,\r\n                    onPaneSplit: onPaneSplit,\r\n                    onPaneResize: onPaneResize,\r\n                    //onPaneMerge: onPaneMerge,\r\n                    //onPaneDestroy: onPaneDestroy,\r\n                }\r\n            });\r\n\r\n            var root = instance.pane.internal.container.querySelector('.pane');\r\n            instance.pane.setType(root, 'surface');\r\n        });\r\n\r\n        instance.pane = {};\r\n\r\n        function onPaneCreate (pane) {\r\n            instance.events.trigger('pane.create', pane);\r\n        }\r\n\r\n        function onPaneSplit (origin, newPane) {\r\n            instance.events.trigger('pane.split', origin, newPane);\r\n        }\r\n\r\n        function onPaneResize (pane) {\r\n            instance.events.trigger('pane.resize', pane);\r\n        }\r\n\r\n        function onPaneMerge (merger, toRemove) {\r\n            console.debug('onPaneMerge', merger, toRemove);\r\n        }\r\n\r\n        function onPaneDestroy (pane) {\r\n            console.debug('onPaneDestroy', pane);\r\n        }\r\n    });\r\n})());\r\n","(function () {\r\n    'use strict';\r\n\r\n    var EPSILON = 0.000001;\r\n\r\n    Math.geo = Math.geo || {};\r\n\r\n    Math.geo.rayFaceCollision = function (start, direction, vertices, result) {\r\n        var triangles = Math.geo.triangulateFace(vertices);\r\n        for (var i = 0; i < triangles.length; i++) {\r\n            var triangle = triangles[i];\r\n            if (Math.geo.rayTriangleCollision(start, direction,\r\n                triangle[0], triangle[1], triangle[2], result))\r\n                return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Math.geo.rayTriangleCollision = function (start, direction, v1, v2, v3, result) {\r\n        result = result || [0, 0, 0];\r\n    \tvar triangleNormal = getNormal(v1, v2, v3);\r\n        if (Math.geo.rayPlaneCollision(start, direction, v1, triangleNormal, result)) {\r\n            var bary = getBarycentricCoordinates(v1, v2, v3, result);\r\n        \treturn (bary[0] <= 1 && bary[0] >= 0) &&\r\n                (bary[1] <= 1 && bary[1] >= 0) &&\r\n                (bary[2] <= 1 && bary[2] >= 0);\r\n        }\r\n    \treturn false;\r\n    };\r\n\r\n    Math.geo.rayPlaneCollision = function (start, direction, planePoint, planeNormal, result) {\r\n\t\tvar numer = vec3.dot(planePoint, planeNormal) -\r\n            vec3.dot(planeNormal, start);\r\n\t\tvar denom = vec3.dot(planeNormal, direction);\r\n\t\tif (Math.abs(denom) < EPSILON) return false;\r\n\t\tvar t = numer / denom;\r\n\t\tif (t < 0.0) return false;\r\n\t\tif (result) {\r\n            vec3.scale(result, direction, t);\r\n            vec3.add(result, start, result);\r\n        }\r\n\t\treturn true;\r\n    };\r\n\r\n    //TODO: refactor to reduce number of operations\r\n    Math.geo.rayAABBCollision = function (start, direction, minB, maxB, result) {\r\n        result = result || vec3.create();\r\n\r\n\t\tvar inside = true;\r\n\t\tvar quadrant = new Float32Array(3);\r\n\t\tvar i = 0|0;\r\n\t\tvar whichPlane;\r\n\t\tvar maxT = new Float32Array(3);\r\n\t\tvar candidatePlane = new Float32Array(3);\r\n\r\n\t\t/* Find candidate planes; this loop can be avoided if\r\n\t\trays cast all from the eye(assume perpsective view) */\r\n\t\tfor (i=0; i < 3; ++i)\r\n\t\t\tif(start[i] < minB[i]) {\r\n\t\t\t\tquadrant[i] = 1;\r\n\t\t\t\tcandidatePlane[i] = minB[i];\r\n\t\t\t\tinside = false;\r\n\t\t\t}else if (start[i] > maxB[i]) {\r\n\t\t\t\tquadrant[i] = 0;\r\n\t\t\t\tcandidatePlane[i] = maxB[i];\r\n\t\t\t\tinside = false;\r\n\t\t\t}else\t{\r\n\t\t\t\tquadrant[i] = 2;\r\n\t\t\t}\r\n\r\n\t\t/* Ray origin inside bounding box */\r\n\t\tif(inside)\t{\r\n\t\t\tvec3.copy(result, start);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/* Calculate T distances to candidate planes */\r\n\t\tfor (i = 0; i < 3; ++i)\r\n\t\t\tif (quadrant[i] !== 2 && direction[i] !== 0)\r\n\t\t\t\tmaxT[i] = (candidatePlane[i] - start[i]) / direction[i];\r\n\t\t\telse\r\n\t\t\t\tmaxT[i] = -1;\r\n\r\n\t\t/* Get largest of the maxT's for final choice of intersection */\r\n\t\twhichPlane = 0;\r\n\t\tfor (i = 1; i < 3; i++)\r\n\t\t\tif (maxT[whichPlane] < maxT[i])\r\n\t\t\t\twhichPlane = i;\r\n\r\n\t\t/* Check final candidate actually inside box */\r\n\t\tif (maxT[whichPlane] < 0) return false;\r\n\t\tif (maxT[whichPlane] > Number.MAX_VALUE) return false; //NOT TESTED\r\n\r\n\t\tfor (i = 0; i < 3; ++i)\r\n\t\t\tif (whichPlane != i) {\r\n\t\t\t\tresult[i] = start[i] + maxT[whichPlane] * direction[i];\r\n\t\t\t\tif (result[i] < minB[i] || result[i] > maxB[i])\r\n\t\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tresult[i] = candidatePlane[i];\r\n\t\t\t}\r\n\t\treturn true;\r\n    };\r\n\r\n    //TODO: refactor to reduce number of operations\r\n    Math.geo.closestPointsBetweenSegments = function (a0,a1, b0,b1, p_a, p_b) {\r\n\t\tvar u = vec3.subtract( vec3.create(), a1, a0 );\r\n\t\tvar v = vec3.subtract( vec3.create(), b1, b0 );\r\n\t\tvar w = vec3.subtract( vec3.create(), a0, b0 );\r\n\r\n\t\tvar a = vec3.dot(u,u);         // always >= 0\r\n\t\tvar b = vec3.dot(u,v);\r\n\t\tvar c = vec3.dot(v,v);         // always >= 0\r\n\t\tvar d = vec3.dot(u,w);\r\n\t\tvar e = vec3.dot(v,w);\r\n\t\tvar D = a*c - b*b;        // always >= 0\r\n\t\tvar sc, tc;\r\n\r\n\t\t// compute the line parameters of the two closest points\r\n\t\tif (D < EPSILON) {          // the lines are almost parallel\r\n\t\t\tsc = 0.0;\r\n\t\t\ttc = (b>c ? d/b : e/c);    // use the largest denominator\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsc = (b*e - c*d) / D;\r\n\t\t\ttc = (a*e - b*d) / D;\r\n\t\t}\r\n\r\n\t\t// get the difference of the two closest points\r\n\t\tif(p_a)\tvec3.add(p_a, a0, vec3.scale(vec3.create(),u,sc));\r\n\t\tif(p_b)\tvec3.add(p_b, b0, vec3.scale(vec3.create(),v,tc));\r\n\r\n\t\tvar dP = vec3.add( vec3.create(), w, vec3.subtract( vec3.create(), vec3.scale(vec3.create(),u,sc) , vec3.scale(vec3.create(),v,tc)) );  // =  L1(sc) - L2(tc)\r\n\t\treturn vec3.length(dP);   // return the closest distance\r\n\t};\r\n\r\n    Math.geo.rayPointDistance = function (start, direction, point) {\r\n        var aux = [0, 0, 0];\r\n        vec3.sub(aux, point, start);\r\n        vec3.cross(aux, direction, aux);\r\n        return vec3.len(aux);\r\n    };\r\n\r\n    Math.geo.pointPointDistance = function (p1, p2) {\r\n        var aux = [0, 0, 0];\r\n        vec3.sub(aux, p2, p1);\r\n        return vec3.len(aux);\r\n    };\r\n\r\n    Math.geo.triangulateFace = function (vertices) {\r\n        var triangulated = [];\r\n        for (var i = 0; i < vertices.length - 2; i++) {\r\n            triangulated.push([vertices[0], vertices[i + 1], vertices[i + 2]]);\r\n        }\r\n        return triangulated;\r\n    };\r\n\r\n    Math.geo.computePointsCenter = function (points) {\r\n        if (!points || points.length === 0) return null;\r\n        var center = [0, 0, 0];\r\n        points.forEach(function(point) {\r\n            vec3.add(center, center, point);\r\n        });\r\n        vec3.scale(center, center, 1 / points.length);\r\n        return center;\r\n    };\r\n\r\n    Math.geo.findClosestPointIndex = function (position, points) {\r\n        if (!points || !points.length) return null;\r\n        var distance = Math.geo.pointPointDistance(position, points[0]);\r\n        var closestIndex = 0;\r\n        for (var i = 1; i < points.length; i++) {\r\n            var newDistance = Math.geo.pointPointDistance(position, points[i]);\r\n            if (newDistance < distance) {\r\n                distance = newDistance;\r\n                closestIndex = i;\r\n            }\r\n        }\r\n        return closestIndex;\r\n    };\r\n\r\n    Math.geo.findClosestPoint = function (position, points) {\r\n        if (!points || !points.length) return null;\r\n        var index = Math.geo.findClosestPointIndex(position, points);\r\n        return points[index];\r\n    };\r\n\r\n    Math.geo.findClosestFace = function (position, faces) {\r\n        if (!faces || !faces.length) return null;\r\n        var centers = faces.map(function (face) {\r\n            return face.computeCenter();\r\n        });\r\n        var index = Math.geo.findClosestPointIndex(position, centers);\r\n        return faces[index];\r\n    };\r\n\r\n    function getBarycentricCoordinates (p1, p2, p3, point) {\r\n        var v0 = getVectorFromPoints(p1, p2);\r\n        var v1 = getVectorFromPoints(p1, p3);\r\n        var v2 = getVectorFromPoints(p1, point);\r\n\r\n    \tvar d00 = vec3.dot(v0, v0);\r\n    \tvar d01 = vec3.dot(v0, v1);\r\n    \tvar d11 = vec3.dot(v1, v1);\r\n    \tvar d20 = vec3.dot(v2, v0);\r\n    \tvar d21 = vec3.dot(v2, v1);\r\n    \tvar denom = d00 * d11 - d01 * d01;\r\n\r\n        var result = [(d11 * d20 - d01 * d21) / denom,\r\n            (d00 * d21 - d01 * d20) / denom, 0];\r\n        result[2] = 1 - result[0] - result[1];\r\n    \treturn result;\r\n    }\r\n\r\n    function getNormal (v1, v2, v3) {\r\n        var tmp1 = vec3.create();\r\n        var tmp2 = vec3.create();\r\n        vec3.sub(tmp1, v2, v1);\r\n        vec3.sub(tmp2, v3, v1);\r\n        vec3.cross(tmp1, tmp1, tmp2);\r\n        return tmp1;\r\n    }\r\n\r\n    function getVectorFromPoints (a, b) {\r\n        var output = vec3.create();\r\n        vec3.sub(output, b, a);\r\n        return output;\r\n    }\r\n})();\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('halfedge-cache', function (instance) {\r\n        var superConstructor = Math.HalfEdgeMesh;\r\n        var cachedHalfEdgeMesh = function () {\r\n            superConstructor.call(this);\r\n            var heMesh = this;\r\n            this.cache = {\r\n                meshes: {},\r\n                get: function (key) {\r\n                    var e = this.meshes[key];\r\n                    var builder = Math.HalfEdgeMesh.prototype.builders[key];\r\n                    if (!e) {\r\n                        e = builder.onCreate(heMesh);\r\n                        this.meshes[key] = e;\r\n                    }\r\n                    builder.onClean(e);\r\n                    return e;\r\n                },\r\n                onVertexChange: function (vertex) {\r\n                    for (var key in this.meshes) {\r\n                        var e = this.meshes[key];\r\n                        var builder = Math.HalfEdgeMesh.prototype.builders[key];\r\n                        if (builder.onVertexChange)\r\n                            builder.onVertexChange(vertex, e);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        cachedHalfEdgeMesh.prototype = Object.create(Math.HalfEdgeMesh.prototype);\r\n        cachedHalfEdgeMesh.prototype.constructor = cachedHalfEdgeMesh;\r\n\r\n        Math.HalfEdgeMesh = cachedHalfEdgeMesh;\r\n\r\n        Math.HalfEdgeMesh.prototype.builders = {};\r\n        Math.HalfEdgeMesh.prototype.addBuilder = function (key, builder) {\r\n            this.builders[key] = builder;\r\n        };\r\n\r\n    }, ['halfedge']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('halfedge-cube', function (instance) {\r\n        function cube () {\r\n            var mesh = new Math.HalfEdgeMesh();\r\n\r\n            var vhandle = [];\r\n            vhandle[0] = [-1, -1,  1];\r\n            vhandle[1] = [ 1, -1,  1];\r\n            vhandle[2] = [ 1,  1,  1];\r\n            vhandle[3] = [-1,  1,  1];\r\n            vhandle[4] = [-1, -1, -1];\r\n            vhandle[5] = [ 1, -1, -1];\r\n            vhandle[6] = [ 1,  1, -1];\r\n            vhandle[7] = [-1,  1, -1];\r\n            mesh.addVertices(vhandle);\r\n\r\n            var face_vhandles = [];\r\n            face_vhandles.push(vhandle[0]);\r\n            face_vhandles.push(vhandle[1]);\r\n            face_vhandles.push(vhandle[2]);\r\n            face_vhandles.push(vhandle[3]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            face_vhandles = [];\r\n            face_vhandles.push(vhandle[7]);\r\n            face_vhandles.push(vhandle[6]);\r\n            face_vhandles.push(vhandle[5]);\r\n            face_vhandles.push(vhandle[4]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            face_vhandles = [];\r\n            face_vhandles.push(vhandle[1]);\r\n            face_vhandles.push(vhandle[0]);\r\n            face_vhandles.push(vhandle[4]);\r\n            face_vhandles.push(vhandle[5]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            face_vhandles = [];\r\n            face_vhandles.push(vhandle[2]);\r\n            face_vhandles.push(vhandle[1]);\r\n            face_vhandles.push(vhandle[5]);\r\n            face_vhandles.push(vhandle[6]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            face_vhandles = [];\r\n            face_vhandles.push(vhandle[3]);\r\n            face_vhandles.push(vhandle[2]);\r\n            face_vhandles.push(vhandle[6]);\r\n            face_vhandles.push(vhandle[7]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            face_vhandles = [];\r\n            face_vhandles.push(vhandle[0]);\r\n            face_vhandles.push(vhandle[3]);\r\n            face_vhandles.push(vhandle[7]);\r\n            face_vhandles.push(vhandle[4]);\r\n            mesh.addFace(face_vhandles);\r\n\r\n            return mesh;\r\n        }\r\n\r\n        Math.HalfEdgeCube = cube;\r\n    }, ['halfedge']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('halfedge', function (instance) {\r\n        Math.HalfEdgeMesh = HalfEdgeMesh;\r\n    });\r\n\r\n    var HalfEdgeMesh = function () {\r\n        this.bounds = new Math.Octree();\r\n        this.halfEdges = [];\r\n        this.vertices = [];\r\n        this.faces = [];\r\n    };\r\n\r\n    HalfEdgeMesh.prototype.addVertices = function (vertices) {\r\n        if (arguments.length > 1) this.addVertices.apply(this, arguments);\r\n        if (!Array.isArray(vertices)) return;\r\n        this.bounds.addItems(vertices);\r\n        for (var i = 0; i < vertices.length; i++) {\r\n            var vertex = vertices[i];\r\n            var index = this.vertices.indexOf(vertex);\r\n            if (index < 0) {\r\n                var _halfEdge = {};\r\n                _halfEdge.computeNormal = VertexComputeNormal;\r\n                _halfEdge.ownIndex = this.vertices.length;\r\n                _halfEdge.getFaces = VertexGetFaces;\r\n                _halfEdge.outEdges = [];\r\n                vertex._halfEdge = _halfEdge;\r\n                this.vertices.push(vertex);\r\n            } else {\r\n                console.error('addVertices: Adding vertex twice!', vertex);\r\n            }\r\n        }\r\n    };\r\n\r\n    HalfEdgeMesh.prototype.addFace = function (vertices) {\r\n        if (arguments.length > 1) this.addFace.apply(this, arguments);\r\n        if (!Array.isArray(vertices)) return;\r\n        if (vertices.length >= 3) {\r\n            var he1 = buildEdge(vertices[0], vertices[1]);\r\n            var he2 = buildEdge(vertices[1], vertices[2], he1.face);\r\n            he1.next = he2;\r\n            this.halfEdges.push(he1, he2);\r\n            if (vertices.length > 3) {\r\n                var last, prev = he2;\r\n                for (var i = 2; i < vertices.length - 1; i++) {\r\n                    last = buildEdge(vertices[i], vertices[i + 1], he1.face);\r\n                    if (!he2.next) he2.next = last;\r\n                    last.next = prev;\r\n                    this.halfEdges.push(last);\r\n                    prev = last;\r\n                }\r\n                last = buildEdge(vertices[i], vertices[0], he1.face);\r\n                last.next = he1;\r\n                this.halfEdges.push(last);\r\n                prev.next = last;\r\n            }\r\n            this.faces.push(he1.face);\r\n        } else {\r\n            console.error('addFace: 3 or more vertices needed to form a face!');\r\n        }\r\n    };\r\n\r\n    HalfEdgeMesh.prototype.onVertexChange = function (vertex) {\r\n        if (this.cache && this.cache.onVertexChange)\r\n            this.cache.onVertexChange(vertex);\r\n        this.bounds.onVertexMove(vertex);\r\n    };\r\n\r\n    HalfEdgeMesh.prototype.clear = function () {\r\n        this.halfEdges = [];\r\n        this.vertices = [];\r\n        this.faces = [];\r\n    };\r\n\r\n    function buildEdge (start, end, face) {\r\n        var edge = {};\r\n        edge.vertex = end;\r\n        edge.face = face ? face : new HalfEdgeFace(edge);\r\n        edge.opposite = findOppositeEdge(start, end) || edge;\r\n        edge.next = null;\r\n        start._halfEdge.outEdges.push(edge);\r\n        return edge;\r\n    }\r\n\r\n    function findOppositeEdge(start, end) {\r\n        var opposites = end._halfEdge.outEdges.filter(function (he) {\r\n            return he.vertex === start;\r\n        });\r\n        return (opposites && opposites[0]) ? opposites[0] : null;\r\n    }\r\n\r\n    function VertexGetFaces () {\r\n        return this.outEdges.map(function (edge) {\r\n            return edge.face;\r\n        });\r\n    }\r\n\r\n    function VertexComputeNormal () {\r\n        var normal = [0, 0, 0];\r\n        this.getFaces().forEach(function (face) {\r\n            vec3.add(normal, normal, face.computeRawNormal());\r\n        });\r\n        vec3.normalize(normal, normal);\r\n        return normal;\r\n    }\r\n\r\n    var HalfEdgeFace = function (halfEdge) {\r\n        this.halfEdge = halfEdge;\r\n    };\r\n\r\n    HalfEdgeFace.prototype.getEdges = function () {\r\n        var output = [];\r\n        var he = this.halfEdge;\r\n        while (he.next !== this.halfEdge) {\r\n            output.push(he);\r\n            he = he.next;\r\n        }\r\n        output.push(he);\r\n        return output;\r\n    };\r\n\r\n    HalfEdgeFace.prototype.getVertices = function () {\r\n        return this.getEdges().map(function (edge) {\r\n            return edge.vertex;\r\n        });\r\n    };\r\n\r\n    HalfEdgeFace.prototype.getVerticesTriangulated = function () {\r\n        var triangulated = [];\r\n        var vertices = this.getVertices();\r\n        for (var i = 0; i < vertices.length - 2; i++) {\r\n            triangulated.push([vertices[0], vertices[i + 1], vertices[i + 2]]);\r\n        }\r\n        return triangulated;\r\n    };\r\n\r\n    HalfEdgeFace.prototype.computeRawNormal = function () {\r\n        var normal = [0, 0, 0];\r\n        this.getVerticesTriangulated().forEach(function (triplet) {\r\n            var triangleNormal = computeNormal(triplet[0], triplet[1], triplet[2]);\r\n            vec3.add(normal, normal, triangleNormal);\r\n        });\r\n        return normal;\r\n    };\r\n\r\n    HalfEdgeFace.prototype.computeNormal = function () {\r\n        var normal = this.computeRawNormal();\r\n        vec3.normalize(normal, normal);\r\n        return normal;\r\n    };\r\n\r\n    HalfEdgeFace.prototype.computeCenter = function () {\r\n        return Math.geo.computePointsCenter(this.getVertices());\r\n    };\r\n\r\n    function computeNormal (v1, v2, v3) {\r\n        var tmp1 = vec3.create();\r\n        var tmp2 = vec3.create();\r\n        vec3.sub(tmp1, v2, v1);\r\n        vec3.sub(tmp2, v3, v1);\r\n        vec3.cross(tmp1, tmp1, tmp2);\r\n        return tmp1;\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('surface', function (instance) {\r\n        instance.pane.types.surface = {\r\n            onPaneType: onSurfacePaneType,\r\n            onCreateHeader: onCreateSurfaceHeader\r\n        };\r\n\r\n        instance.events.on('pane.resize', function (pane) {\r\n            if (pane.attrData('pane-type') === 'surface')\r\n                updateCanvasSize(instance, pane);\r\n        });\r\n\r\n        window.addEventListener('resize', function (event) {\r\n            var surfaces = instance.pane.internal.container\r\n                .querySelectorAll('.pane canvas');\r\n            for (var i = 0; i < surfaces.length; i++) {\r\n                updateCanvasSize(instance, surfaces[i].parentNode);\r\n            }\r\n        });\r\n\r\n        instance.surface = {};\r\n    }, ['pane-types']);\r\n\r\n    var surfaceIndex = 0;\r\n    function onSurfacePaneType (pane, instance) {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.id = 'surface' + (surfaceIndex++);\r\n        canvas.addEventListener('mouseover', function (event) {\r\n            event.target.focus();\r\n        });\r\n        canvas.className = 'surface';\r\n        pane.appendChild(canvas);\r\n\r\n        instance.surface.map = instance.surface.map || {};\r\n        instance.surface.map[canvas.id] = {\r\n            camera: new Math.Camera()\r\n        };\r\n\r\n        updateCanvasSize(instance, pane);\r\n\r\n        instance.events.trigger('surface.create', canvas);\r\n    }\r\n\r\n    function onCreateSurfaceHeader (header, instance) {\r\n        var label = document.createElement('label');\r\n        label.innerHTML = 'Surface Pane';\r\n        header.appendChild(label);\r\n    }\r\n\r\n    function updateCanvasSize (instance, pane) {\r\n        var canvas = pane.querySelector('canvas');\r\n        var context = canvas.getContext('2d');\r\n        var data = instance.surface.map[canvas.id];\r\n\r\n        var header = pane.querySelector('.pane-header');\r\n        var headerHeight = header ? header.height() : 0;\r\n\r\n        var width = pane.width(), height = pane.height() - headerHeight;\r\n        data.imgData = context.createImageData(width, height);\r\n        data.buffer = new Uint8Array(width * height * 4);\r\n\r\n        canvas.height = height;\r\n        canvas.width = width;\r\n\r\n        mat4.perspective(data.camera.projection, 45 * DEG2RAD, width / height, 0.1, 1000);\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var originalRotation = null;\r\n    var mouseDownCoords = null;\r\n\r\n    Modules.prototype.add('common-interaction', function (instance) {\r\n        instance.surface.interactions.common = {\r\n            onMouseWheel: function (event, realCoords) {\r\n                var canvas = event.target;\r\n                var delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\r\n                delta /= 2;\r\n\r\n                var data = instance.surface.map[canvas.id];\r\n                data.camera.distance -= delta;\r\n                data.camera.distance = Math.max(data.camera.distance, 0);\r\n\r\n                return true;\r\n            },\r\n            onMouseMove: function (event, realCoords) {\r\n                if (event.target.dataset.moving) {\r\n                    var canvas = event.target;\r\n                    var data = instance.surface.map[canvas.id];\r\n                    if (data) {\r\n                        var delta = getCoordsDelta(mouseDownCoords, realCoords);\r\n                        combine(data.camera, originalRotation, delta);\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            onMouseDown: function (event, realCoords) {\r\n                var canvas = event.target;\r\n                var data = instance.surface.map[canvas.id];\r\n                if (event.which === 3) {\r\n                    event.target.dataset.moving = 'true';\r\n                    upNormalMouseDown = vec3.equals(data.camera.getUpDirection(), [0, 1, 0]);\r\n                    originalRotation = data.camera.rotation.slice();\r\n                    mouseDownCoords = realCoords;\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            onMouseUp: function (event, realCoords) {\r\n                if (event.which === 3) {\r\n                    delete event.target.dataset.moving;\r\n                    var data = instance.surface.map[event.target.id];\r\n                    mouseDownCoords = null;\r\n                }\r\n                return true;\r\n            }\r\n        };\r\n    }, ['surface-interaction']);\r\n\r\n    var upNormalMouseDown = true;\r\n    function combine (surface, originalRotation, delta) {\r\n        if (!originalRotation) return;\r\n        if (!upNormalMouseDown) delta[0] = -delta[0];\r\n\r\n        var rotation = surface.rotation;\r\n        rotation[0] = originalRotation[0] + delta[0] * 0.005;\r\n        rotation[1] = originalRotation[1] + delta[1] * 0.005;\r\n        clampRotations(rotation);\r\n    }\r\n\r\n    function getCoordsDelta (initial, current) {\r\n        if (!initial) return [0, 0];\r\n        return [\r\n            initial[0] - current[0],\r\n            current[1] - initial[1]\r\n        ];\r\n    }\r\n\r\n    function clampRotations (rotations) {\r\n        var pi2 = Math.PI * 2;\r\n        if (rotations[0] < 0) rotations[0] = pi2 + rotations[0];\r\n        if (rotations[0] >= pi2) rotations[0] = rotations[0] - pi2;\r\n        if (rotations[1] < 0) rotations[1] = pi2 + rotations[1];\r\n        if (rotations[1] >= pi2) rotations[1] = rotations[1] - pi2;\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('edit-interaction-render-cache', function (instance) {\r\n        Math.HalfEdgeMesh.prototype.addBuilder('edit-interaction-render', wireframeBuilder);\r\n    }, ['edit-interaction', 'shader']);\r\n\r\n    var wireframeBuilder = {\r\n        onCreate: function (halfEdgeMesh) {\r\n            var buffers = {\r\n                vertices: new Float32Array(halfEdgeMesh.vertices.length * 3),\r\n                colors: new Float32Array(halfEdgeMesh.vertices.length * 4)\r\n            };\r\n\r\n            var indices = [];\r\n            halfEdgeMesh.faces.forEach(function (face) {\r\n                face.getVertices().forEach(function (vertex, i, array) {\r\n                    var index = i >= array.length - 1 ? 0 : i + 1;\r\n                    indices.push(vertex._halfEdge.ownIndex);\r\n                    indices.push(array[index]._halfEdge.ownIndex);\r\n                });\r\n            });\r\n            buffers.lines = new Uint16Array(indices);\r\n            var mesh = GL.Mesh.load(buffers);\r\n            for (var i = 0; i < halfEdgeMesh.vertices.length; i++)\r\n                this.onVertexChange(halfEdgeMesh.vertices[i], mesh);\r\n\r\n            return mesh;\r\n        },\r\n        onVertexChange: function (vertex, mesh) {\r\n            var buffer = mesh.vertexBuffers;\r\n            var index = vertex._halfEdge.ownIndex;\r\n            for (var j = 0; j < 3; j++)\r\n                buffer.vertices.data[index * 3 + j] = vertex[j];\r\n            buffer.vertices.dirty = true;\r\n            var color = vertex._selected ? [1, 0.4, 0.1, 1] : [0, 0, 0, 1];\r\n            for (j = 0; j < 4; j++)\r\n                buffer.colors.data[index * 4 + j] = color[j];\r\n            buffer.colors.dirty = true;\r\n        },\r\n        onClean: function (mesh) {\r\n            if (mesh.vertexBuffers.vertices.dirty) {\r\n                mesh.vertexBuffers.vertices.upload();\r\n                delete mesh.vertexBuffers.vertices.dirty;\r\n            }\r\n            if (mesh.vertexBuffers.colors.dirty) {\r\n                mesh.vertexBuffers.colors.upload();\r\n                delete mesh.vertexBuffers.colors.dirty;\r\n            }\r\n        }\r\n    };\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('edit-interaction-render', function (instance) {\r\n        var shader = null;\r\n        instance.asset.shader.get('wireframe', function (s) {\r\n            shader = s;\r\n        });\r\n\r\n        var uniforms = {\r\n            u_mvp: mat4.create()\r\n        };\r\n\r\n        var temp = mat4.create();\r\n        instance.surface.interactions.edit.onRender = function (surface) {\r\n            instance.scene.getObjects().forEach(function (node) {\r\n                var obj = node.data;\r\n\r\n                surface.camera.getViewMatrix(temp);\r\n                mat4.multiply(temp, surface.camera.projection, temp);\r\n                mat4.multiply(uniforms.u_mvp, temp, obj.model);\r\n\r\n                if (shader) {\r\n                    shader.uniforms(uniforms);\r\n                    if (obj.mesh instanceof Math.HalfEdgeMesh) {\r\n                        var mesh = obj.mesh.cache.get('edit-interaction-render');\r\n                        shader.draw(mesh, instance.graphics.gl.LINES);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n    }, ['edit-interaction', 'shader', 'edit-interaction-render-cache']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('edit-interaction-selection', function (instance) {\r\n        instance.surface.interactions.edit.selection = {\r\n            objects: {},\r\n            addAll: function (object) {\r\n                var result = [];\r\n                var selection = this;\r\n                object.mesh.vertices.forEach(function (vertex) {\r\n                    toggleVertex(selection, object, vertex);\r\n                    result.push(vertex);\r\n                });\r\n                return result;\r\n            },\r\n            add: function (ray, object, position) {\r\n                position = position || [0, 0, 0];\r\n                var selection = this;\r\n\r\n                var result = {\r\n                    vertices: [],\r\n                    edges: [],\r\n                    faces: []\r\n                };\r\n\r\n                var vertices = object.mesh.bounds.getCollidingItems(ray);\r\n                var rayVertices = vertices.filter(function (vertex) {\r\n                    return Math.geo.rayPointDistance(ray.start, ray.direction, vertex) <= 0.2;\r\n                });\r\n                var vertex = Math.geo.findClosestPoint(position, rayVertices);\r\n                if (vertex) {\r\n                    toggleVertex(selection, object, vertex);\r\n                    result.vertices.push(vertex);\r\n                    return result;\r\n                }\r\n\r\n                //TODO: check edge collisions & add to selection\r\n\r\n                var uniqueFaces = getFacesFromVertices(vertices);\r\n                uniqueFaces = uniqueFaces.filter(function (face) {\r\n                    return Math.geo.rayFaceCollision(ray.start, ray.direction,\r\n                        face.getVertices());\r\n                });\r\n                var closestFace = Math.geo.findClosestFace(position, uniqueFaces);\r\n                if (closestFace) {\r\n                    toggleFace(selection, object, closestFace);\r\n                    result.faces.push(closestFace);\r\n                }\r\n\r\n                //TODO: keep only closest element of all 3 types\r\n\r\n                return result;\r\n            },\r\n            getCenter: function () {\r\n                var name = Object.keys(this.objects)[0];\r\n                return Math.geo.computePointsCenter(this.objects[name].vertices);\r\n            },\r\n            clear: function () {\r\n                for (var name in this.objects) {\r\n                    var selectedObj = this.objects[name];\r\n                    var sceneObj = instance.scene.getObjectByName(name);\r\n                    for (var i = 0; i < selectedObj.vertices.length; i++) {\r\n                        var vertex = selectedObj.vertices[i];\r\n                        if (vertex._selected) {\r\n                            delete vertex._selected;\r\n                            sceneObj.mesh.onVertexChange(vertex);\r\n                        }\r\n                    }\r\n                }\r\n                this.objects = {};\r\n            },\r\n            isEmpty: function () {\r\n                return !Object.keys(this.objects).length;\r\n            }\r\n        };\r\n\r\n    }, ['edit-interaction']);\r\n\r\n    function toggleVertex (selection, object, vertex) {\r\n        if (vertex) {\r\n            if (toggle(selection, object, vertex, 'vertices')) {\r\n                vertex._selected = true;\r\n                vertex.originalPosition = vertex.slice();\r\n                vertex._halfEdge.getFaces().forEach(function (face) {\r\n                    var selectedVertices = selection.objects[object.name].vertices;\r\n                    var faceVertices = face.getVertices();\r\n                    var allSelected = true;\r\n                    faceVertices.forEach(function (vertex) {\r\n                        allSelected &= selectedVertices.includes(vertex);\r\n                    });\r\n                    if (allSelected && !face._selected)\r\n                        toggleFace(selection, object, face);\r\n                });\r\n            } else delete vertex._selected;\r\n        }\r\n    }\r\n\r\n    function toggleEdge (selection, object, edge) {\r\n        if (edge) {\r\n            if (toggle(selection, object, edge, 'edges')) {\r\n                edge._selected = true;\r\n            } else delete edge._selected;\r\n        }\r\n    }\r\n\r\n    function toggleFace (selection, object, face) {\r\n        if (face) {\r\n            if (toggle(selection, object, face, 'faces')) {\r\n                face._selected = true;\r\n                face.getVertices().forEach(function (vertex) {\r\n                    if (!vertex._selected)\r\n                        toggleVertex(selection, object, vertex);\r\n                });\r\n            } else delete face._selected;\r\n        }\r\n    }\r\n\r\n    function toggle (selection, object, item, arrayName) {\r\n        initObjectIfNeeded(selection, object);\r\n        var array = selection.objects[object.name][arrayName];\r\n        var index = array.indexOf(item);\r\n        if (index >= 0) {\r\n            array.splice(index, 1);\r\n            delObjectIfNeeded(selection, object);\r\n            return false;\r\n        } else {\r\n            array.push(item);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function initObjectIfNeeded (selection, object) {\r\n        var name = object.name;\r\n        if (!selection.objects[name]) {\r\n            selection.objects[name] = {\r\n                faces: [],\r\n                edges: [],\r\n                vertices: []\r\n            };\r\n        }\r\n    }\r\n\r\n    function delObjectIfNeeded (selection, object) {\r\n        var name = object.name;\r\n        if (selection.objects[name]) {\r\n            var objSelection = selection.objects[name];\r\n            if (!objSelection.vertices.length &&\r\n                !objSelection.vertices.length &&\r\n                !objSelection.vertices.length)\r\n                delete selection.objects[name];\r\n        }\r\n    }\r\n\r\n    function getEdgesFromVertices (vertices) {\r\n        var edges = [];\r\n        vertices.forEach(function (vertex) {\r\n            vertex._halfEdge.outEdges.forEach(function (edge) {\r\n                if (edges.indexOf(edge) === -1)\r\n                    edges.push(edge);\r\n            });\r\n        });\r\n        return edges;\r\n    }\r\n\r\n    function getFacesFromVertices (vertices) {\r\n        var faces = [];\r\n        vertices.forEach(function (vertex) {\r\n            vertex._halfEdge.getFaces().forEach(function (face) {\r\n                if (faces.indexOf(face) === -1)\r\n                    faces.push(face);\r\n            });\r\n        });\r\n        return faces;\r\n    }\r\n\r\n    function saveOriginalVertexPosition (vertices) {\r\n        vertices.forEach(function (vertex) {\r\n            vertex.originalPosition = vertex.slice();\r\n        });\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var isMouseDown = false;\r\n    var isShiftDown = false;\r\n    var isControlDown = false;\r\n\r\n    var initialCoords = [0, 0];\r\n\r\n    Modules.prototype.add('edit-interaction', function (instance) {\r\n        instance.surface.interactions.edit = {\r\n            onMouseMove: function (event, realCoords) {\r\n                if (isMouseDown && !this.selection.isEmpty()) {\r\n                    var canvas = event.target;\r\n                    var data = instance.surface.map[canvas.id];\r\n\r\n                    var currentRay = data.camera.getRay(null, realCoords,\r\n                        [canvas.width, canvas.height]);\r\n                    var initialRay = data.camera.getRay(null, initialCoords,\r\n                        [canvas.width, canvas.height]);\r\n                    var cameraDirection = data.camera.getDirection();\r\n\r\n                    var hitPointInitial = [0, 0, 0], hitPointCurrent = [0, 0, 0];\r\n\r\n                    var delta = [0, 0, 0], aux = [0, 0, 0];\r\n                    var selectionCenter = this.selection.getCenter();\r\n                    Math.geo.rayPlaneCollision(currentRay.start, currentRay.direction,\r\n                        selectionCenter, cameraDirection, hitPointCurrent);\r\n                    Math.geo.rayPlaneCollision(initialRay.start, initialRay.direction,\r\n                        selectionCenter, cameraDirection, hitPointInitial);\r\n                    vec3.sub(delta, hitPointCurrent, hitPointInitial);\r\n\r\n                    if (isControlDown)\r\n                        for (var j = 0; j < 3; j++)\r\n                            delta[j] = Math.round(delta[j]);\r\n\r\n                    for (var name in this.selection.objects) {\r\n                        var hitPoint = [0, 0, 0];\r\n                        var selectedObj = this.selection.objects[name];\r\n                        var sceneObj = instance.scene.getObjectByName(name);\r\n\r\n                        for (var i = 0; i < selectedObj.vertices.length; i++) {\r\n                            var vertex = selectedObj.vertices[i];\r\n                            if (vertex.originalPosition) {\r\n                                vec3.add(vertex, vertex.originalPosition, delta);\r\n                                sceneObj.mesh.onVertexChange(vertex);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            onMouseUp: function (event, realCoords) {\r\n                isMouseDown = false;\r\n                for (var name in this.selection.objects) {\r\n                    var selectedObj = this.selection.objects[name];\r\n                    for (var i = 0; i < selectedObj.vertices.length; i++) {\r\n                        var vertex = selectedObj.vertices[i];\r\n                        if (vertex.originalPosition) {\r\n                            delete vertex.originalPosition;\r\n                        }\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            onMouseDown: function (event, realCoords) {\r\n                var canvas = event.target;\r\n                var data = instance.surface.map[canvas.id];\r\n                if (event.which === 1) {\r\n                    isMouseDown = true;\r\n\r\n                    var ray = data.camera.getRay(null, realCoords,\r\n                        [canvas.width, canvas.height]);\r\n\r\n                    var selection = this.selection;\r\n                    instance.scene.getObjects().forEach(function (node) {\r\n                        if (!isShiftDown) selection.clear();\r\n                        var result = selection.add(ray, node.data, data.camera.getPosition());\r\n                        result.vertices.forEach(function (vertex) {\r\n                            node.data.mesh.cache.onVertexChange(vertex);\r\n                            initialCoords = realCoords;\r\n                        });\r\n                        result.faces.forEach(function (face) {\r\n                            face.getVertices().forEach(function (vertex) {\r\n                                node.data.mesh.cache.onVertexChange(vertex);\r\n                            });\r\n                            initialCoords = realCoords;\r\n                        });\r\n                    });\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            onKeyDown: function (event, realCoords) {\r\n                isControlDown = event.ctrlKey;\r\n                isShiftDown = event.shiftKey;\r\n\r\n                if (event.key === 'a') {\r\n                    if (!this.selection.isEmpty()) this.selection.clear();\r\n                    else {\r\n                        var selection = this.selection;\r\n                        instance.scene.getObjects().forEach(function (object) {\r\n                            var result = selection.addAll(object.data);\r\n                            result.forEach(function (vertex) {\r\n                                object.data.mesh.cache.onVertexChange(vertex);\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            onKeyUp: function (event, realCoords) {\r\n                isControlDown = event.ctrlKey;\r\n                isShiftDown = event.shiftKey;\r\n            }\r\n        };\r\n\r\n        instance.events.on('surface.create', function (surface) {\r\n            instance.surface.setInteraction(surface, 'edit');\r\n        });\r\n\r\n    }, ['surface-interaction']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('object-interaction', function (instance) {\r\n        instance.surface.interactions.object = {\r\n            onMouseDown: function (event, realCoords) {\r\n                var canvas = event.target;\r\n                var data = instance.surface.map[canvas.id];\r\n                if (event.which === 1) {\r\n                    var ray = data.camera.getRay(null, realCoords,\r\n                        [canvas.width, canvas.height]);\r\n\r\n                    var isHit = false, hitPoint = vec3.create();\r\n                    instance.scene.getObjects().forEach(function (node) {\r\n                        isHit = geo.testRayBBox(ray.start, ray.direction, node.data.mesh.bounding, node.data.model, hitPoint);\r\n                        if (isHit) {\r\n                            node.data.selected = true;\r\n                        } else delete node.data.selected;\r\n                    });\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n        };\r\n\r\n    }, ['surface-interaction']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('surface-interaction', function (instance) {\r\n        instance.surface.interactions = {};\r\n\r\n        instance.surface.setInteraction = function (surface, name) {\r\n            surface.dataset.interaction = name;\r\n        };\r\n\r\n        instance.surface.getInteractionCallbacks = function (surface) {\r\n            var interactionName = surface.dataset.interaction;\r\n            return instance.surface.interactions[interactionName];\r\n        };\r\n\r\n        instance.surface.onRender = function (canvas, surface) {\r\n            var keepRunning = true;\r\n            var callbacks = instance.surface.getInteractionCallbacks(canvas);\r\n            if (callbacks.onRender) keepRunning = callbacks.onRender(surface);\r\n            if (keepRunning) {\r\n                var common = instance.surface.interactions.common;\r\n                common.onRender(surface);\r\n            }\r\n        };\r\n\r\n        instance.events.on('surface.create', function (surface) {\r\n            surface.tabIndex = 1000;\r\n\r\n            surface.oncontextmenu = onContextMenu;\r\n\r\n            surface.onkeydown = onSurfaceEvent;\r\n            surface.onkeyup = onSurfaceEvent;\r\n\r\n            surface.onmousewheel = onSurfaceEvent;\r\n            surface.onmousemove = onSurfaceEvent;\r\n            surface.onmousedown = onSurfaceEvent;\r\n            surface.onmouseup = onSurfaceEvent;\r\n            surface.onclick = onSurfaceEvent;\r\n        });\r\n\r\n        function onSurfaceEvent (event) {\r\n            var callbacks = instance.surface.getInteractionCallbacks(event.target);\r\n            var keepRunning = runCallback(callbacks, event);\r\n            if (keepRunning) {\r\n                var common = instance.surface.interactions.common;\r\n                runCallback(common, event);\r\n            }\r\n        }\r\n\r\n        instance.events.on('pane.split', function (oldPane, newPane) {\r\n            var initialValue = oldPane.dataset.interaction;\r\n            newPane.dataset.interaction = initialValue;\r\n        });\r\n    }, ['surface']);\r\n\r\n    function runCallback (callbacks, event) {\r\n        var realCoords = getLocalCoordinates(event);\r\n        switch (event.type) {\r\n            case 'keydown': if (callbacks.onKeyDown) return callbacks.onKeyDown(event, realCoords); break;\r\n            case 'keyup': if (callbacks.onKeyUp) return callbacks.onKeyUp(event, realCoords); break;\r\n\r\n            case 'mousewheel': if (callbacks.onMouseWheel) return callbacks.onMouseWheel(event, realCoords); break;\r\n            case 'mousemove': if (callbacks.onMouseMove) return callbacks.onMouseMove(event, realCoords); break;\r\n            case 'mousedown': if (callbacks.onMouseDown) return callbacks.onMouseDown(event, realCoords); break;\r\n            case 'mouseup': if (callbacks.onMouseUp) return callbacks.onMouseUp(event, realCoords); break;\r\n            case 'click': if (callbacks.onClick) return callbacks.onClick(event, realCoords); break;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function getLocalCoordinates (event) {\r\n        return [event.layerX, event.layerY];\r\n    }\r\n\r\n    function onContextMenu (event) {\r\n        event.preventDefault();\r\n        return false;\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('render-solid-cache', function (instance) {\r\n        Math.HalfEdgeMesh.prototype.addBuilder('render-solid', solidBuilder);\r\n    }, ['halfedge-cache']);\r\n\r\n    var solidBuilder = {\r\n        onCreate: function (halfEdgeMesh) {\r\n            var buffers = {\r\n                vertices: new Float32Array(halfEdgeMesh.vertices.length * 3),\r\n                normals: new Float32Array(halfEdgeMesh.vertices.length * 3)\r\n            };\r\n\r\n            var indices = [];\r\n            halfEdgeMesh.faces.forEach(function (face) {\r\n                var faceNormal = face.computeNormal();\r\n                face.getVerticesTriangulated().forEach(function (t) {\r\n                    indices.push(t[0]._halfEdge.ownIndex,\r\n                        t[1]._halfEdge.ownIndex, t[2]._halfEdge.ownIndex);\r\n                });\r\n            });\r\n            buffers.triangles = new Uint16Array(indices);\r\n            var mesh = GL.Mesh.load(buffers);\r\n            for (var i = 0; i < halfEdgeMesh.vertices.length; i++)\r\n                this.onVertexChange(halfEdgeMesh.vertices[i], mesh);\r\n\r\n            return mesh;\r\n        },\r\n        onVertexChange: function (vertex, mesh) {\r\n            var buffer = mesh.vertexBuffers;\r\n            var index = vertex._halfEdge.ownIndex;\r\n            for (var j = 0; j < 3; j++)\r\n                buffer.vertices.data[index * 3 + j] = vertex[j];\r\n            buffer.vertices.dirty = true;\r\n            var normal = vertex._halfEdge.computeNormal();\r\n            for (j = 0; j < 3; j++)\r\n                buffer.normals.data[index * 3 + j] = normal[j];\r\n            buffer.normals.dirty = true;\r\n        },\r\n        onClean: function (mesh) {\r\n            if (mesh.vertexBuffers.vertices.dirty) {\r\n                mesh.vertexBuffers.vertices.upload();\r\n                delete mesh.vertexBuffers.vertices.dirty;\r\n            }\r\n            if (mesh.vertexBuffers.normals.dirty) {\r\n                mesh.vertexBuffers.normals.upload();\r\n                delete mesh.vertexBuffers.normals.dirty;\r\n            }\r\n        }\r\n    };\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('render-solid', function (instance) {\r\n        var shader = null;\r\n        instance.asset.shader.get('solid', function (s) {\r\n            shader = s;\r\n        });\r\n\r\n        var bounds = {\r\n            type: 'object',\r\n            mesh: GL.Mesh.box({wireframe:true}),\r\n            model: mat4.create(),\r\n        };\r\n        var grid = GL.Mesh.grid({lines:17,size:16});\r\n        var axisX = GL.Mesh.load({\r\n            vertices: new Float32Array([-8, 0.001, 0, 8, 0.001, 0]),\r\n            colors: new Float32Array([1, 0, 0, 1, 1, 0, 0, 1])\r\n        });\r\n        var axisZ = GL.Mesh.load({\r\n            vertices: new Float32Array([0, 0.001, -8, 0, 0.001, 8]),\r\n            colors: new Float32Array([0, 1, 0, 1, 0, 1, 0, 1])\r\n        });\r\n\r\n        instance.surface.renders.solid = function (surface) {\r\n            var lightDirection = vec3.create();\r\n            surface.camera.getPosition(lightDirection);\r\n            vec3.add(lightDirection, lightDirection, [1, 2, 0]);\r\n            vec3.normalize(lightDirection, lightDirection);\r\n            uniforms.u_lightvector = lightDirection;\r\n\r\n            renderObject(surface, grid, shader, instance.graphics.gl.LINES);\r\n            renderObject(surface, axisX, shader, instance.graphics.gl.LINES);\r\n            renderObject(surface, axisZ, shader, instance.graphics.gl.LINES);\r\n            instance.scene.getObjects().forEach(function (node) {\r\n                var mesh = node.data.mesh.cache.get('render-solid');\r\n                renderBounds(surface, shader, bounds, node.data.mesh.bounds, instance.graphics.gl.LINES);\r\n                renderObject(surface, mesh, shader, node.data.primitive, node.data.model);\r\n            });\r\n        };\r\n\r\n        instance.events.on('surface.create', function (surface) {\r\n            instance.surface.setRender(surface, 'solid');\r\n        });\r\n    }, ['surface-render', 'shader', 'render-solid-cache']);\r\n\r\n    var uniforms = {\r\n        u_color: [0.5, 0.5, 0.5, 1],\r\n        u_lightvector: null,\r\n        u_model: null,\r\n        u_mvp: mat4.create()\r\n    };\r\n\r\n    var temp = mat4.create();\r\n    function renderObject (surface, mesh, shader, primitive, model, indexBufferName) {\r\n        model = model || mat4.create();\r\n\r\n        surface.camera.getViewMatrix(temp);\r\n        mat4.multiply(temp, surface.camera.projection, temp);\r\n        mat4.multiply(uniforms.u_mvp, temp, model);\r\n\r\n        uniforms.u_model = model;\r\n\r\n        if (shader) {\r\n            shader.uniforms(uniforms);\r\n            if (mesh instanceof Math.HalfEdgeMesh) {\r\n                if (mesh) shader.draw(mesh, primitive, indexBufferName);\r\n            } else {\r\n                shader.draw(mesh, primitive, indexBufferName);\r\n            }\r\n        }\r\n    }\r\n\r\n    function renderBounds (surface, shader, bounds, octree, primitive) {\r\n        updateBoundsModel(bounds.model, octree);\r\n        renderObject(surface, bounds.mesh, shader, primitive, bounds.model, 'wireframe');\r\n        if (octree.children)\r\n            for (var i = 0; i < octree.children.length; i++)\r\n                renderBounds(surface, shader, bounds, octree.children[i], primitive);\r\n    }\r\n\r\n    function updateBoundsModel (model, octree) {\r\n        mat4.identity(model);\r\n        var scale = [0, 0, 0], position = [0, 0, 0];\r\n        vec3.lerp(position, octree.aabb.min, octree.aabb.max, 0.5);\r\n        mat4.translate(model, model, position);\r\n        vec3.sub(scale, octree.aabb.max, octree.aabb.min);\r\n        mat4.scale(model, model, scale);\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    Modules.prototype.add('surface-render', function (instance) {\r\n        instance.surface.renders = {};\r\n\r\n        instance.surface.setRender = function (surface, name) {\r\n            surface.dataset.render = name;\r\n        };\r\n\r\n        instance.surface.getRender = function (surface) {\r\n            var renderName = surface.dataset.render;\r\n            return instance.surface.renders[renderName];\r\n        };\r\n\r\n        var panes = document.querySelectorAll('.pane');\r\n        for (var i = 0; i < panes.length; i++) {\r\n            if (panes[i].dataset.paneType == 'surface') {\r\n                var canvas = panes[i].querySelector('canvas');\r\n                canvas.dataset.render = 'solid';\r\n            }\r\n        }\r\n\r\n        instance.events.on('pane.split', function (oldPane, newPane) {\r\n            newPane.attrData('surface-render', oldPane.attrData('surface-render'));\r\n        });\r\n    }, ['surface']);\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var Graphics = function (instance) {\r\n        this.gl = GL.create({\r\n            height: screen.height,\r\n            width: screen.width\r\n        });\r\n        this.gl.animate();\r\n        this.gl.ondraw = function () {\r\n            var renderTargets = document.querySelectorAll('canvas');\r\n            for (var i = 0; i < renderTargets.length; i++)\r\n                drawRenderTarget(instance, renderTargets[i]);\r\n        };\r\n        this.gl.clearColor(0.349, 0.349, 0.349, 1);\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n    };\r\n\r\n    Modules.prototype.add('graphics', function (instance) {\r\n        instance.graphics = new Graphics(instance);\r\n    });\r\n\r\n    function drawRenderTarget (instance, canvas) {\r\n        var data = instance.surface.map[canvas.id];\r\n        var gl = instance.graphics.gl;\r\n\r\n        var width  = canvas.clientWidth, height = canvas.clientHeight;\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        gl.viewport(0, 0, width, height);\r\n\r\n        var mainRender = instance.surface.getRender(canvas);\r\n        if (mainRender) mainRender(data);\r\n        instance.surface.onRender(canvas, data);\r\n\r\n        var context = canvas.getContext('2d');\r\n        if (context) {\r\n            gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, data.buffer);\r\n            data.imgData.data.set(data.buffer);\r\n            context.putImageData(data.imgData, 0, 0);\r\n        }\r\n    }\r\n})());\r\n","((function () {\r\n    'use strict';\r\n\r\n    var objectCount = 0;\r\n    var lightCount = 0;\r\n\r\n    Modules.prototype.add('scene', function (instance) {\r\n        instance.scene = TreeNode.extend();\r\n\r\n        instance.scene.addObject = function (info) {\r\n            if (!info.primitive) info.primitive = instance.graphics.gl.TRIANGLES;\r\n            if (!info.model) info.model = mat4.create();\r\n            if (!info.type) info.type = 'object';\r\n            if (!info.name) info.name = 'object_' + (objectCount++);\r\n            this.add(info);\r\n        };\r\n\r\n        instance.scene.addLight = function (info) {\r\n            if (!info.model) info.position = [0, 0, 0];\r\n            if (!info.color) info.color = [0.5, 0.5, 0.5];\r\n            if (!info.type) info.type = 'light';\r\n            if (!info.name) info.name = 'light_' + (lightCount++);\r\n            this.add(info);\r\n        };\r\n\r\n        instance.scene.getObjectByName = function (name) {\r\n            return getObjectByName(this, name);\r\n        };\r\n\r\n        instance.scene.getObjects = function () {\r\n            return this.dfs(function (node) {\r\n                return node.data.type === 'object';\r\n            });\r\n        };\r\n\r\n        instance.scene.getLights = function () {\r\n            return this.dfs(function (node) {\r\n                return node.data.type === 'light';\r\n            });\r\n        };\r\n\r\n        instance.scene.addObject({mesh: Math.HalfEdgeCube()});\r\n        instance.scene.addLight({position: [0, 10, 5]});\r\n    }, ['graphics', 'halfedge-cube']);\r\n\r\n    function getObjectByName (rootNode, name) {\r\n        for (var i = 0; i < rootNode.children.length; i++) {\r\n            var child = rootNode.children[i];\r\n            if (child.data.name === name) {\r\n                return child.data;\r\n            } else {\r\n                var node = getObjectByName(child, name);\r\n                if (node) return node.data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n})());\r\n"]}