"use strict";!function(){function e(e,t,n){e[t]||(e[t]=n)}e(Array.prototype,"unique",function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e}),e(HTMLElement.prototype,"addClass",function(){for(var e in arguments){var t=this.className?this.className.trim().replace(/\s+/g," ").split(" "):[],n=arguments[e]?arguments[e].trim().replace(/\s+/g," ").split(" "):[];this.className=t.concat(n).unique().join(" ")}}),e(HTMLElement.prototype,"height",function(){return this.getBoundingClientRect().height}),e(HTMLElement.prototype,"width",function(){return this.getBoundingClientRect().width})}(),function(){window.EventHandler=function(){this.listeners={},this.trigger=function(){for(var e=arguments[0],t=arguments[1]||null,n=this.listeners[e]||[],i=0;i<n.length;i++){Array.prototype.splice.call(arguments,0,2);var s=this.listeners[e][i];s.apply(t,arguments)}},this.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},this.off=function(e){delete this.listeners[e]},this.off=function(e,t){if(this.listeners[e]){var n=this.listeners[e];n.indexOf(t)>-1&&n.splice(index,1)}}}}(),function(){function e(t,n){for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];"object"==typeof s?e(t[i],n[i]):t[i]=n[i]}}window.WebMesh=function(t){this.options={container:{selector:"#webmesh",className:"wm-container"},menu:{className:"wm-menu"},logger:{className:"wm-logger"}},t&&"object"==typeof t&&e(this.options,t),this.container=document.querySelector(this.options.container.selector),this.container.addClass(this.options.container.className),this.gl=GL.create({height:container.height(),width:container.width()}),this.container.append(this.gl.canvas),this.events=new EventHandler,WebMesh.prototype.enablePlugins(this),window.addEventListener("resize",function(e){this.gl.canvas.height=this.container.height(),this.gl.canvas.width=this.container.width(),this.events.trigger("resize")})}}(),function(){WebMesh.prototype.plugins={},WebMesh.prototype.enablePlugins=function(e){for(var t in WebMesh.prototype.plugins)e[t]=new WebMesh.prototype.plugins[t](e)}}(),function(){WebMesh.prototype.plugins.logger=function(e){var t=document.createElement("DIV");t.addClass(e.options.logger.className),e.container.append(t);var n=document.createElement("DIV");n.innerHTML="Lorem ipsum...",n.addClass("info"),t.append(n),this.info=function(e){n.innerHTML=e},e.events.on("logger.info",this.info)}}(),function(){WebMesh.prototype.plugins.menu=function(e){var t=document.createElement("DIV");t.addClass(e.options.menu.className),e.container.append(t);var n=document.createElement("UL");t.append(n),this.items={File:[{"Load...":function(){console.log("item click!")}}],"Alert!":function(){e.events.trigger("logger.info",null,"LOOK AT ME! O_O"),window.setTimeout(function(){e.events.trigger("logger.info",null,"STAPH!")},2e3)},Help:[{"About WebMesh":function(){console.log("About what?!")}}]},this.update=function(){for(var e in this.items){var t=document.createElement("LI");t.innerHTML=e,t.addClass(e);var i=this.items[e];"function"==typeof i&&(t.onclick=i),n.append(t)}},this.update()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiZXZlbnRzLmpzIiwid2VibWVzaC5qcyIsInBsdWdpbnMuanMiLCJsb2dnZXIuanMiLCJtZW51LmpzIl0sIm5hbWVzIjpbInNhZmVPdmVycmlkZSIsInByb3RvdHlwZSIsInByb3BlcnR5IiwidmFsdWUiLCJBcnJheSIsImEiLCJ0aGlzIiwiY29uY2F0IiwiaSIsImxlbmd0aCIsImoiLCJzcGxpY2UiLCJIVE1MRWxlbWVudCIsImFyZ3VtZW50cyIsIm9sZENsYXNzTmFtZXMiLCJjbGFzc05hbWUiLCJ0cmltIiwicmVwbGFjZSIsInNwbGl0IiwibmV3Q2xhc3NOYW1lcyIsInVuaXF1ZSIsImpvaW4iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsIndpbmRvdyIsIkV2ZW50SGFuZGxlciIsImxpc3RlbmVycyIsInRyaWdnZXIiLCJuYW1lIiwic2NvcGUiLCJjYWxsIiwiY2FsbGJhY2siLCJhcHBseSIsIm9uIiwicHVzaCIsIm9mZiIsImFycmF5IiwiaW5kZXhPZiIsImluZGV4IiwiZXh0ZW5kIiwic291cmNlIiwicHJvcGVydGllcyIsImhhc093blByb3BlcnR5IiwiV2ViTWVzaCIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJzZWxlY3RvciIsIm1lbnUiLCJsb2dnZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDbGFzcyIsImdsIiwiR0wiLCJjcmVhdGUiLCJhcHBlbmQiLCJjYW52YXMiLCJldmVudHMiLCJlbmFibGVQbHVnaW5zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicGx1Z2lucyIsImluc3RhbmNlIiwiY3JlYXRlRWxlbWVudCIsImluZm8iLCJpbm5lckhUTUwiLCJ0ZXh0IiwiaXRlbXMiLCJGaWxlIiwiTG9hZC4uLiIsImNvbnNvbGUiLCJsb2ciLCJBbGVydCEiLCJzZXRUaW1lb3V0IiwiSGVscCIsIkFib3V0IFdlYk1lc2giLCJ1cGRhdGUiLCJpdGVtIiwibGkiLCJvbmNsaWNr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LE9BQUE5QixRQUFBLGNBQUEsS0FBQSxXQUNBLE1BRUErQyxPQUVBQyxnQkFBQSxXQUNBTCxRQUFBQyxJQUFBLG9CQU1BbEUsS0FBQXVFLE9BQUEsV0FDQSxJQUFBLEdBQUFDLEtBQUF4RSxNQUFBOEQsTUFBQSxDQUNBLEdBQUFXLEdBQUE3QixTQUFBYyxjQUFBLEtBQ0FlLEdBQUFiLFVBQUFZLEVBQ0FDLEVBQUEzQixTQUFBMEIsRUFFQSxJQUFBM0UsR0FBQUcsS0FBQThELE1BQUFVLEVBQ0EsbUJBQUEzRSxLQUNBNEUsRUFBQUMsUUFBQTdFLEdBR0E2QyxFQUFBUSxPQUFBdUIsS0FHQXpFLEtBQUF1RSIsImZpbGUiOiJ3ZWJtZXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbigoZnVuY3Rpb24oKXtcclxuICAgIHNhZmVPdmVycmlkZShBcnJheS5wcm90b3R5cGUsICd1bmlxdWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMuY29uY2F0KCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBpZihhW2ldID09PSBhW2pdKSBhLnNwbGljZShqLS0sIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZU92ZXJyaWRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2FkZENsYXNzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9yKHZhciBpIGluIGFyZ3VtZW50cyl7XHJcbiAgICAgICAgICAgIHZhciBvbGRDbGFzc05hbWVzID0gIXRoaXMuY2xhc3NOYW1lID8gW10gOiB0aGlzLmNsYXNzTmFtZS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHZhciBuZXdDbGFzc05hbWVzID0gIWFyZ3VtZW50c1tpXSA/IFtdIDogYXJndW1lbnRzW2ldLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJykuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBvbGRDbGFzc05hbWVzLmNvbmNhdChuZXdDbGFzc05hbWVzKS51bmlxdWUoKS5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2FmZU92ZXJyaWRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ2hlaWdodCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIH0pO1xyXG5cclxuICAgIHNhZmVPdmVycmlkZShIVE1MRWxlbWVudC5wcm90b3R5cGUsICd3aWR0aCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2FmZU92ZXJyaWRlKHByb3RvdHlwZSwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXByb3RvdHlwZVtwcm9wZXJ0eV0pIHByb3RvdHlwZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgIH1cclxufSkoKSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbigoZnVuY3Rpb24oKSB7XHJcbiAgICB3aW5kb3cuRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLnRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgIHZhciBzY29wZSA9IGFyZ3VtZW50c1sxXSB8fCBudWxsO1xyXG4gICAgICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNbbmFtZV0gfHwgW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAyKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMubGlzdGVuZXJzW25hbWVdW2ldO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc2NvcGUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub24gPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW25hbWVdKSB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub2ZmID0gZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5saXN0ZW5lcnNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyYXkuaW5kZXhPZihjYWxsYmFjaykgPiAtMSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59KSgpKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB3aW5kb3cuV2ViTWVzaCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjoge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICcjd2VibWVzaCcsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICd3bS1jb250YWluZXInXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lbnU6IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3dtLW1lbnUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxvZ2dlcjoge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnd20tbG9nZ2VyJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lci5zZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNvbnRhaW5lci5jbGFzc05hbWUpO1xyXG5cclxuICAgICAgICB0aGlzLmdsID0gR0wuY3JlYXRlKHtcclxuICAgICAgICAgICAgaGVpZ2h0OiBjb250YWluZXIuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHdpZHRoOiBjb250YWluZXIud2lkdGgoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5nbC5jYW52YXMpO1xyXG5cclxuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXIoKTtcclxuICAgICAgICBXZWJNZXNoLnByb3RvdHlwZS5lbmFibGVQbHVnaW5zKHRoaXMpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5nbC5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jb250YWluZXIuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2wuY2FudmFzLndpZHRoID0gdGhpcy5jb250YWluZXIud2lkdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcigncmVzaXplJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGV4dGVuZChzb3VyY2UsIHByb3BlcnRpZXMpe1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwcm9wZXJ0aWVzW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kKHNvdXJjZVtwcm9wZXJ0eV0sIHByb3BlcnRpZXNbcHJvcGVydHldKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlW3Byb3BlcnR5XSA9IHByb3BlcnRpZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4oKGZ1bmN0aW9uKCkge1xyXG4gICAgV2ViTWVzaC5wcm90b3R5cGUucGx1Z2lucyA9IHt9O1xyXG5cclxuICAgIFdlYk1lc2gucHJvdG90eXBlLmVuYWJsZVBsdWdpbnMgPSBmdW5jdGlvbihpbnN0YW5jZSkge1xyXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gV2ViTWVzaC5wcm90b3R5cGUucGx1Z2lucylcclxuICAgICAgICAgICAgaW5zdGFuY2VbbmFtZV0gPSBuZXcgV2ViTWVzaC5wcm90b3R5cGUucGx1Z2luc1tuYW1lXShpbnN0YW5jZSk7XHJcbiAgICB9O1xyXG59KSgpKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuKChmdW5jdGlvbigpe1xyXG4gICAgV2ViTWVzaC5wcm90b3R5cGUucGx1Z2luc1snbG9nZ2VyJ10gPSBmdW5jdGlvbihpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoaW5zdGFuY2Uub3B0aW9ucy5sb2dnZXIuY2xhc3NOYW1lKTtcclxuICAgICAgICBpbnN0YW5jZS5jb250YWluZXIuYXBwZW5kKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHZhciBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgICAgICAgaW5mby5pbm5lckhUTUwgPSAnTG9yZW0gaXBzdW0uLi4nO1xyXG4gICAgICAgIGluZm8uYWRkQ2xhc3MoJ2luZm8nKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKGluZm8pO1xyXG5cclxuICAgICAgICB0aGlzLmluZm8gPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICAgICAgICAgIGluZm8uaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluc3RhbmNlLmV2ZW50cy5vbignbG9nZ2VyLmluZm8nLCB0aGlzLmluZm8pO1xyXG4gICAgfTtcclxufSkoKSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbigoZnVuY3Rpb24oKXtcclxuICAgIFdlYk1lc2gucHJvdG90eXBlLnBsdWdpbnNbJ21lbnUnXSA9IGZ1bmN0aW9uKGluc3RhbmNlKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhpbnN0YW5jZS5vcHRpb25zLm1lbnUuY2xhc3NOYW1lKTtcclxuICAgICAgICBpbnN0YW5jZS5jb250YWluZXIuYXBwZW5kKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHZhciBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnVUwnKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKG1lbnUpO1xyXG5cclxuICAgICAgICB0aGlzLml0ZW1zID0ge1xyXG4gICAgICAgICAgICAnRmlsZSc6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAnTG9hZC4uLic6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaXRlbSBjbGljayEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICdBbGVydCEnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmV2ZW50cy50cmlnZ2VyKCdsb2dnZXIuaW5mbycsIG51bGwsICdMT09LIEFUIE1FISBPX08nKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZXZlbnRzLnRyaWdnZXIoJ2xvZ2dlci5pbmZvJywgbnVsbCwgJ1NUQVBIIScpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdIZWxwJzogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICdBYm91dCBXZWJNZXNoJzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBYm91dCB3aGF0PyEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb3IodmFyIGl0ZW0gaW4gdGhpcy5pdGVtcyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdMSScpO1xyXG4gICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuaXRlbXNbaXRlbV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkub25jbGljayA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1lbnUuYXBwZW5kKGxpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH07XHJcbn0pKCkpO1xyXG4iXX0=
